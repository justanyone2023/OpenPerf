{"sentences": "Cannot connect to vercel postgres database from wsl", "answer": "I just converted wsl 2 to wsl 1 and the issue is now solved. It's weird. idk what really happened there. but for some reason wsl 1 do no have any issues."}
{"sentences": "Best way to show loading state when using server action on client", "answer": "Here's our recommendations for loading states with forms! https://nextjs.org/docs/app/building-your-application/data-fetching/forms-and-mutations#displaying-loading-state"}
{"sentences": "Use 'import' with ESM packages instead", "answer": "This fixed it: https://github.com/vercel/next.js/discussions/35217#discussioncomment-2343861"}
{"sentences": "How to handle database connections with Hot Reloading in API section", "answer": "Okay, we should assign variables we wish to be global to the global object in node. So in my case I can use 'global.connectionPool'. This way it persists through reloads."}
{"sentences": "@next/swc-win32-x64-msvc", "answer": "Hi! Try downloading Microsoft Visual C++ Redistributable.\r\nI had the same issue and this fixed it for me.\r\nGet it here: https://aka.ms/vs/17/release/vc_redist.x64.exe"}
{"sentences": "Why is the middleware not working?", "answer": "```js\r\n  const cookie = cookies().get(cookie_auth)?.value;\r\n  if (!cookie) {\r\n    return;\r\n  }\r\n```\r\n\r\nThis tells the middleware, to take no action, and let the request proceed. Same as returning `NextResponse.next()`"}
{"sentences": "Is custom server supported with app router? Documentation is missing.", "answer": "Yes, it is supported. We will get that page added in both Pages and App Router documentation."}
{"sentences": "Invariant: Missing 'next-action' header", "answer": "Hi! Can you all try the latest canary version? This issue should be fixed with https://github.com/vercel/next.js/pull/64315."}
{"sentences": "Image size error while running divs in a loop to place the image.. ( I got the individual images fixed in other pages)", "answer": "For this one I ended up doing media queries.. not my best option but made the image size error go away...  don't know why it didn't take the JavaScript if it still giving size to the div... but again, it didn't like it with the loop."}
{"sentences": "How do I access `VERCEL_ENV` and `VERCEL_URL` environment variables on client side in Next?", "answer": "I found the answer here:\r\nhttps://vercel.com/docs/concepts/projects/environment-variables#radix-:R10mp9il8m:-trigger-tab1"}
{"sentences": "Auto open browser when run dev", "answer": "Unfortunately that is not possible currently. See https://github.com/zeit/next.js/issues/12233\r\n\r\n> We're not planning to add automatically opening the browser at this point (keeping the CLI minimal and features contained).\r\n\r\n"}
{"sentences": "Image Tag might need more development?  ... or how can I get rid of this error CLS error?", "answer": "This fixed it:\r\n\r\nMust include aspect ratio of the image in the parent div:\r\n\r\n```\r\n.oil-analysis-span {\r\n  padding-left: 2em;\r\n  position: relative;\r\n  aspect-ratio: 1.75;\r\n}\r\n```"}
{"sentences": "Error: Command \"npm run build\" exited with 1", "answer": "did you try making sure that TypeScript is installed?"}
{"sentences": "Why do I get a \"useForm is not a function\" error when using React Hook forms in a Next JS project?", "answer": "I was trying to figure this out too. Need to set `'use client'`"}
{"sentences": "How do I change only the static folder path?", "answer": "https://github.com/vercel/next.js/issues/5602#issuecomment-673382891\r\n\r\nThis solutions works for me."}
{"sentences": "Image optimizations for background images", "answer": "`next/image` now supports the prop `objectFit=\"cover\"` which can make the component work as a background image\r\n\r\nofficial demo:\r\nhttps://image-component.nextjs.gallery/background\r\n\r\ndocs: \r\nhttps://nextjs.org/docs/api-reference/next/image#objectfit"}
{"sentences": "Error: 'sharp' is required to be installed in standalone mode for the image optimization to function correctly. Read more at: https://nextjs.org/docs/messages/sharp-missing-in-production", "answer": "I was able to get the solution from https://github.com/lovell/sharp/issues/3877, I made a repo that works fine with Docker, Postgres and Nextjs. https://github.com/99lalo/nextjs-prisma-docker"}
{"sentences": "Rename /api route ?", "answer": "Unfortunately the `/api` route name is not changeable currently.\r\n\r\nDepending on your proxy setup, you could \"whitelist\" the API routes associated with Next while your other API handles the other routes."}
{"sentences": "Help with webpack config monorepo/workspace with drizzle, node:events build error.", "answer": "Fairly certain this was due to a client-side import from the same file"}
{"sentences": "How to always hide the defaultLocale?", "answer": "When using the /pages folder, I found it better to use the suggested method in https://github.com/vercel/next.js/discussions/18419  in stead of always trying to strip it. That would also make it easier when using the new app directory."}
{"sentences": "Need help with the Image tag.. can't make it work.", "answer": "So I got this to work with plain old CSS\r\n\r\nI don't know what changed in Bootstrap, but keeping it plain CSS is better either way.\r\n\r\nWhat B it was...\r\n\r\nStill have to check for image sizing errors.."}
{"sentences": "sitemap.ts and robots.ts file error when building nextjs project", "answer": "@nikettongare\r\nResolved: Friend, I managed to solve it after racking my brains a lot, my project was on the Desktop and One Drive, I removed it and put it in the Downloads folder, it worked perfectly!!"}
{"sentences": "Can someone help me understand why my site doesn't seem to be using SSR?", "answer": "Turns out this was because I was using `export const dynamic = 'auto'`. I assumed that would behave the same as omitting `dynamic` but apparently not. Issue here: https://github.com/vercel/next.js/issues/65799"}
{"sentences": "How to create different middleware for route groups?", "answer": "you need to chain middlewares this video gonna solve your problem\r\nhttps://www.youtube.com/watch?v=fmFYH_Xu3d0&ab_channel=HamedBahram"}
{"sentences": "How to properly setup bundle analyzer?", "answer": "Correct way to call this\r\n ```module.exports = withBundleAnalyzer(nextConfig);```"}
{"sentences": "cached manifest can't get renewed", "answer": "I just Redeployed and it worked."}
{"sentences": "Is there a way to get rid of NextJS image inline styles for better SEO?", "answer": "Inline styles shouldn't affect SEO – these styles are needed for the component to work properly. "}
{"sentences": "next/image, how to set image width to 100%?", "answer": "In Version 10.0.1 they added the `layout` prop to the image component. Setting it to `responsive` sets the css max-/min-width to 100%. Maybe this works for your usecase."}
{"sentences": "fetch priority error..", "answer": "Looks like this was fixed, and should come in the next Next.js version release: https://github.com/vercel/next.js/issues/65161"}
{"sentences": "How to deal with large packages.(chunk load error)", "answer": "If your package is too large and you want to avoid loading failures or affecting page performance, you may need to [load dynamically](https://nextjs.org/docs/pages/building-your-application/optimizing/lazy-loading#nextdynamic)"}
{"sentences": "What is the TypeScript type of App Router (useRouter)?", "answer": "The right type for router is \"AppRouterInstance\" @don-esteban and you don't should pass router as Props this isn't a good practice, call the hook inside the component."}
{"sentences": "Error: You're importing a component that needs useState. It only works in a Client Component but none of its parents are marked with \"use client\", so they're Server Components by default.", "answer": "Maybe try with `use client`? Rather than `use Client`? It is case sensitive it'd seem: https://github.com/Mohit-au50/NextjsError/blob/main/app/ui/dashboard/income-card.tsx#L1"}
{"sentences": "\"You're importing a component that needs useEffect\" - ERROR", "answer": "`CountriesList.{js | jsx}` needs to be a client component as it uses functions that need the browser enviroment (useState, UseEffect and fetch). And there's no problem to import a client component in a server one! \r\n\r\nI hope it helps!"}
{"sentences": "Preserving State with Link Component and searchParams After Page Refresh", "answer": "Setting `<Link href=\"/\" prefetch={true}>` and then starting in production solved the problem. I completely forgot that `prefetch` doesn't work in development.\r\n\r\nSince the issue is resolved, I'll close this discussion."}
{"sentences": "App router with custom server?", "answer": "It should work with latest canary."}
{"sentences": "NextJS 14.2.3 with sanity is not building the application for production.", "answer": "The problem was with the Suspense boundary. Added Suspense in root layout before children and it worked like a charm."}
{"sentences": "loading/error.tsx ignored for parallel routes", "answer": "Probably related issue https://github.com/vercel/next.js/issues/49243"}
{"sentences": "How the hell do I enable Server Actions in my project", "answer": "Hi,\r\n\r\nIt is as simple as, in your `next.config.js`:\r\n\r\n```js\r\n/** @type {import('next').NextConfig} */\r\nconst config = {\r\n  experimental: {\r\n    serverActions: true,\r\n  },\r\n};\r\n\r\nmodule.exports = config;\r\n\r\n```"}
{"sentences": "Nextjs project is very slow to save file in VS Code", "answer": "I have tried a lot in the past few days, and there seems to be no better solution. I found that using `WebStorm` will not have such a problem. Maybe using `WebStorm` is a good solution."}
{"sentences": "[dynamic]/[route].js getServerSideProps favicon.ico in params", "answer": "I had the same issue and was able to fix it by setting a `/public/favicon.ico` icon (does not exist as part of next.js boilerplate)"}
{"sentences": "Prevent `generateMetadata()` from destroying TTFB metric", "answer": "It seems that 'appDir' still has significant issues as of summer 2023. I hope it will be ready for production by the end of autumn."}
{"sentences": "Build very slow: 30+ minutes with Vercel and 10+ minutes with Laptop", "answer": "This assistance has helped to resolve the issue. https://github.com/vercel/next.js/issues/65398#issuecomment-2095610170"}
{"sentences": "Error [NextFontError]: Failed to fetch `Inter` from Google Fonts.", "answer": "```diff\r\n\r\nimport Head from 'next/head'\r\nimport Image from 'next/image'\r\n- import { Inter } from '@next/font/google'\r\nimport styles from '@/styles/Home.module.css'\r\n\r\n- const inter = Inter({ subsets: ['latin'] })\r\n\r\n```"}
{"sentences": "favicon not showing on macos safari", "answer": "Often you have to hard-reload the page, https://help.codehs.com/en/articles/4951972-how-to-clear-your-browser-cache-and-hard-refresh"}
{"sentences": "SyntaxError: \"undefined\" is not valid JSON", "answer": "I change all the pages and components and layouts to arrow functions and it resolve the issue."}
{"sentences": "How to get the project sub-directory path?", "answer": "Solved the issue with:\r\n```\r\npath.join(process.cwd(), '/src/locales')\r\n```\r\nAs it turned out, the localization files (and as a result the `locales` dir) were missed due to the tracing step and the `@vercel/nft` package."}
{"sentences": "Error during Deployment", "answer": "Are you using remote patterns for next/image? https://nextjs.org/docs/api-reference/next/image#remote-patterns @debug-jay @AkhilsWorkshop \r\n\r\nNo custom server right?\r\n\r\n"}
{"sentences": "Prop did not match. Client: X, Server: Y", "answer": "As mentioned above, the server doesn't have a `window` (it's undefined); therefore, the hook will always fall back to `0`. As such, the only time the `style` prop will match is if the device window is initially less than 500px."}
{"sentences": "How to exclude routes from build?", "answer": "Could you look into doing: https://github.com/vercel/next.js/discussions/51891"}
{"sentences": "What is the future for Pages Router?", "answer": "https://github.com/vercel/next.js/discussions/56655#discussion-5721236"}
{"sentences": "StyleX styles not being applied on first Vercel deployment", "answer": "Was able to resolve this issue by ensuring that deployments built without cache enabled. This was done by setting an environment variable for my application: https://vercel.com/docs/deployments/troubleshoot-a-build#managing-build-cache"}
{"sentences": "ECONNREFUSED: Error occurred prerendering page [app router]", "answer": "Fixed it by adding to my `page.tsx` the folowing:\r\n\r\n```\r\nexport const dynamic = 'force-dynamic'\r\n```\r\n\r\nSee more: https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config"}
{"sentences": "Conditional rendering for permission check", "answer": "@mluksch your solution is fine. users who don't have permission won't get the children. this happens on the server."}
{"sentences": "SWR and getserversideprops", "answer": "SWR with Next.js / SSR example: https://github.com/vercel/swr#ssr-with-nextjs for googlers"}
{"sentences": "`router.query` returns undefined parameter on first render in Next.js", "answer": "useRouter is a react hook, it catches up to the current query on `ReactDOM.hydrate`.\r\n[You can read more about it here.](https://nextjs.org/docs/routing/dynamic-routes#caveats)"}
{"sentences": "return notFound() doesn't work in parallel routing", "answer": "I found the solution. I haven't configured a not-found.tsx page. Creating a not-found page solved the problem."}
{"sentences": "With Vercel's free version, for Next.js, how do I know when I have exceeded the allowed traffic for this level?", "answer": "See the **Usage** tab in your dashboard"}
{"sentences": "Why is this onClick not doing anything?", "answer": "I had the component too high up on top of another component, and it wasn't allowing the onClick .... moved the component a bit down, and it worked again."}
{"sentences": "Body Limit 1mb using Server Actions, Even though already set body parser", "answer": "See \r\n\r\nhttps://nextjs.org/docs/app/building-your-application/data-fetching/server-actions#size-limitation"}
{"sentences": "Allow /api routes to be private to the client app", "answer": "It looks like @leerob implemented something like this in the on-demand ISR demo in the `pages/api/webhook.js` file, check it out here: https://github.com/leerob/on-demand-isr/blob/main/pages/api/webhook.js"}
{"sentences": "next/image flicker when switching pages", "answer": "This is because the image is lazy-loaded by default. Since the image is at the top (\"above the fold\"), you can use `priority` so that it's properly preloaded.\r\n\r\n**Note:** there was a bug fix for this that shipped in `10.0.5`, so update to that!"}
{"sentences": "Console.log's not working in Production on Vercel", "answer": "Console logging just started working like 15 minutes later. Is there a delay sometimes? "}
{"sentences": "500 on Server Action POST", "answer": "Vercel seems to a have fixed this, with no changes from me.\r\n![image](https://github.com/vercel/next.js/assets/11378702/269025cd-2b70-4792-823a-ba634e6fc4a8)\r\n"}
{"sentences": "Attempted to load @next/swc-win32-ia32-msvc, but an error occurred", "answer": "The issue was I had node 32 and needed node 64.\r\nInstalling nvm really helped in making it easier to figure that out."}
{"sentences": "(shallow routing) Updating search params causes server component to rerun.", "answer": "This has been solved for a while but apparently there were multiple issues/discussions asking for the same thing. Here's the docs: https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#using-the-native-history-api."}
{"sentences": "Why is it taking 10s+ for a hot reload for a small change? 😞", "answer": "The slow reload in my project was due to my tailwindcss file structure. So imported the tailwind styles and the my normal stylesheet separately. This solved it"}
{"sentences": "What would be the proper way to trigger a function in the Next Script?", "answer": "Hi,\r\n\r\nChange your handler to:\r\n\r\n```ts\r\n() => {\r\n  if (typeof window.allConsentGranted !== 'undefined') {\r\n    window.allConsentGranted();\r\n  } else {\r\n    console.log(\"allConsentGranted not found in global scope\")\r\n  }\r\n}\r\n```"}
{"sentences": "Using next/router outside of components", "answer": "You should be able to import the Router instance and then call `Router.push` on it via:\r\n\r\n```js\r\nimport Router from 'next/router'\r\n```\r\n\r\n"}
{"sentences": "should Link prefetch also fetch the page json?", "answer": "If the page uses getStaticProps the data is prefetched. When you use getServerSideProps it is not as it would increase server load."}
{"sentences": "Why is this div doesn't seem to catch any CSS style?", "answer": "ClassName\r\n\r\ninstead of \r\n\r\nclassName\r\n\r\nsilly.."}
{"sentences": "How to properly build NextJS application?", "answer": "Build in a separate image and copy artifacts into production one. You aren't going to win the fight against the framework on its own turf."}
{"sentences": "Using cookies in client-components", "answer": "For client-side cookies, you can implement third-party modules like [js-cookie](https://www.npmjs.com/package/js-cookie) and will work like a charm."}
{"sentences": "Am I missing something? App router tutorial strange behavior", "answer": "Paths start form app:\n\nApp: /\nApp/ui: /ui\nApp/ui/dashboard: /ui/dashboard\n"}
{"sentences": "Next 14.2.x is showing different build output for functions", "answer": "We changed the output format to use `ƒ` for all dynamic functions. If you are wanting to see the infrastructure outputs in the Vercel dashboard, you can look at the deployment summary. \r\n\r\nhttps://vercel.com/docs/deployments/overview#deployment-summary"}
{"sentences": "Recently started getting \"Error: aborted\" randomly", "answer": "just update next version to canary-9 \r\nnpm command: npm i next@12.2.4-canary.9"}
{"sentences": "Where is the next.js offical website source code?", "answer": "> ### Summary\r\n> The next.js repo only has docs\r\n> \r\n> ### Additional information\r\n> _No response_\r\n> \r\n> ### Example\r\n> _No response_\r\n\r\nNot in the organization. I believe it is not open source, for content protection reasons."}
{"sentences": "Cant find my site on google", "answer": "Seems that the site is indexed just fine 🤔 \r\n\r\n<img width=\"858\" alt=\"Screen Shot 2020-04-07 at 10 47 12\" src=\"https://user-images.githubusercontent.com/6324199/78649226-72e53f00-78bd-11ea-8842-54c69792960f.png\">\r\n\r\n"}
{"sentences": "NextJS v12.2.5 Blank white screen appears when page router loads first", "answer": "please use production build to evaluate performance"}
{"sentences": "intermittent blank screen issues (parallel routes + interceptor routes)", "answer": "I've resolved this issue using `<Link prefetch={false} />`"}
{"sentences": "API is slow when deloy to Vercel", "answer": "The default region of Vercel serverless functions deployment is Washington DC, USA. The first request if for the HTML file which you get it from a Hong Kong CDN and then the serverless function.\r\n\r\n\r\n\r\n"}
{"sentences": "NextJS 14 with NX monorepo and MUI theme -  build fails when exporting middleware from libs", "answer": "Closed since it is related to MUI and not to NextJS -> https://github.com/mui/material-ui/issues/41871"}
{"sentences": "PostCSS transform skipped Unable to find PostCSS config", "answer": "**Update:** After updating to the latest canary \r\n\r\n> next: 14.2.1-canary.0 // Latest available version is detected (14.2.1-canary.0).\r\n\r\nThe warnings disappeared until now, i will check more and update the discussion. "}
{"sentences": "Dynamic Redirects, best way?", "answer": "Please check out our new docs here!\r\n\r\nhttps://nextjs.org/docs/app/building-your-application/routing/redirecting"}
{"sentences": "Why would the Google lighthouse give me a bad ratio from a picture?", "answer": "Try giving the image a CSS property of `height: auto;`"}
{"sentences": "source map for large first-party JavaScript not working for the config?", "answer": "The source maps are for prod builds, do `npm run build`, and then `npm run start`, you can run lighthouse on that instead."}
{"sentences": "Vercel.json's \"includeFiles\" with `pages/api` serverless functions", "answer": "I updated our guide with more documentation and examples here for different frameworks. Hope this helps!\r\n\r\nhttps://vercel.com/guides/how-can-i-use-files-in-serverless-functions"}
{"sentences": "How do I get a source map for large first-party JavaScript in Next.js?", "answer": "- https://nextjs.org/docs/app/api-reference/next-config-js/productionBrowserSourceMaps\r\n\r\nThe path to solve Lighthouse issues is but a fun one... "}
{"sentences": "Console warning: `API handler should not return a value`", "answer": "For anyone stumbling here: the answer is **only return `undefined` from your API routes**."}
{"sentences": "\"Error: The Edge Function \"middleware\" is referencing unsupported modules: crypto\" upon deployment to vercel with next-auth", "answer": "I got the same issue and found a way to fix it.\r\n\r\nIn the Project Settings > Build & Development Settings, I changed the Framework Presets from `Others` to `Next.js` and it worked perfectly.\r\n\r\nHope it help!"}
{"sentences": "How to handle FormData using formidable in Next 13 App Router (beta)", "answer": "OK. Scrap that. Next 13 can simply \r\n\r\n```\r\n const data = await request.formData();\r\n```"}
{"sentences": "newbie question, why can't i create a new page?", "answer": "it's supposed to be outside the src directory, not in..."}
{"sentences": "process.env is undefined in app directory", "answer": "In case anyone else has this same issue, I just had to expose the variables to the client side by prefixing them with `NEXT_PUBLIC_`. For example, `SERVICE_ID` to `NEXT_PUBLIC_SERVICE_ID`."}
{"sentences": "Test next/image src with Jest and react testing library", "answer": "The Next Image component loads the image lazily, usually only after entering the viewport. You might have to wait for that or add a `priority={true}` prop on the image."}
{"sentences": "How do I get an array of all pages within a certain directory?", "answer": "I think I found the solution I wanted. This exact scenario is covered by the documentation of `getStaticProps`:\r\nhttps://nextjs.org/docs/basic-features/data-fetching#reading-files-use-processcwd"}
{"sentences": "ImageError: \"url\" parameter is valid but upstream response is invalid", "answer": "> It looks like the upstream image is unavailable (gives 404). \r\n\r\nAgreed\r\n\r\n![image](https://github.com/vercel/next.js/assets/39565703/f86b4458-60b5-41d1-9f33-3e87f822fdc9)\r\n"}
{"sentences": "Heroku: Warning: No build cache found. Please configure build caching for faster rebuilds.", "answer": "https://devcenter.heroku.com/articles/nodejs-support#custom-caching\r\n\r\nYou need to include `.next/cache`."}
{"sentences": "Where should I load a sitemap.xml and a robot.txt ... and can I view it?", "answer": "Yes. They go under the public folder. https://nextjs.org/docs/basic-features/static-file-serving\r\n\r\nYou can view them at `example.com/Sitemap.xml` or `example.com/robot.txt` as you have them."}
{"sentences": "How to import SwiperJS module dynamically", "answer": "With the new Swiper v7 API, you don't need to activate modules using SwiperCore. Migration guide: https://swiperjs.com/migration-guide. React usage: https://swiperjs.com/react"}
{"sentences": "How to build about 1M static pages on vercel?", "answer": "Ended up with [this discussion](https://github.com/vercel/next.js/discussions/21834)"}
{"sentences": "handling 404 json after deployment", "answer": "> The result is that the client navigation enforces a page reload and the new version is loaded.\r\n\r\nThis is expected behavior and ensures that most users are immediately on the newly deployed application which is generally what you want."}
{"sentences": "How to run Next Js application build (out) directory in local?", "answer": "You could use [`serve`](https://github.com/vercel/serve#usage) locally to test it out.\r\n\r\n```bash\r\nserve out\r\n```"}
{"sentences": "Dsable the API Routes Response Size Limited warning", "answer": "Hi, it sounds like you are looking for the below config, which is documented here https://nextjs.org/docs/api-routes/api-middlewares#custom-config \r\n\r\n```js\r\nexport const config = {\r\n  api: {\r\n    responseLimit: '8mb',\r\n  },\r\n}\r\n```"}
{"sentences": "Opening a web page that points to an app hosted on Vercel, downloads a file instead of opening the app", "answer": "This was fixed in v13.0.4 https://github.com/vercel/next.js/discussions/42834#discussioncomment-4124532."}
{"sentences": "Next/Image not found?", "answer": "You can use it in any folder within your Next.js project. What version are you running of Next?"}
{"sentences": "state resets when transitioning route(page)", "answer": "You need to put your context provider in a place where it doesn't get unmounted when you do a page transition. For that you can use [`pages/_app.js`](https://nextjs.org/docs/advanced-features/custom-app) and wrap your page with the provider."}
{"sentences": "[Next 13] Make Loaders between Pages Transitions", "answer": "Exit animations are broken in app router, see #49279"}
{"sentences": "Handling Authentication with Next.js and Middleware Across Client-Side Navigations", "answer": "https://www.julianmwagner.com/articles/nextjs-secure-seamless-private-data\r\n\r\nmy solution"}
{"sentences": "Text in Link causing hydration error", "answer": "I have solved it by using dynamic import, but I don't what the problem."}
{"sentences": "opengraph-image file url is NOT right, always start with localhost:3000", "answer": "there is a `metadataBase` option, but it only works build&start that very confusing me 🤣 "}
{"sentences": "Fix for viewport height change on Chrome on Android", "answer": "Thanks for this info. I will look into `interactive-widget`. My solution using `beforeInteractive` and tracking initial `window.innerHeight` is afaik working still, but I would be happy for a cleaner solution using meta tags."}
{"sentences": "on `next/image`, hostname is not configured under images in your `next.config.js`", "answer": "Try setting up your domains like this:\r\n\r\n```js\r\nmodule.exports = {\r\n  images: {\r\n    domains: ['tmdb.org', 'themoviedb.org'],\r\n  },\r\n};\r\n```\r\n\r\nOnly the actual domain should need setup without the protocol and any subdomains. "}
{"sentences": "Issue with Displaying Image in Next.js Application Using Image Component", "answer": "Your issue would happened in Next.js 14.x.\r\nYou can use `unoptimized` attribute in Image component. Here is my solution.\r\n\r\n```\r\nimport Image from \"next/image\";\r\n\r\n<Image\r\n  src={imageURL}\r\n  width={48}\r\n  height={48}\r\n  alt=\"logo\"\r\n  unoptimized\r\n/>\r\n```"}
{"sentences": "In app router, server component, how can I get the current url (similar of window.location)", "answer": "`request.nextUrl.pathname;`\r\n\r\nFor more, [here](https://nextjs.org/docs/app/building-your-application/routing/middleware)"}
{"sentences": "NextJS Router not mounted in Playwright?", "answer": "I solved this in the end by using `import { useRouter } from 'next/compat/router';` which is not documented anywhere I might add..."}
{"sentences": "<Link/> sometime stop working with app router in production", "answer": "i try to set prefetch to false and it work"}
{"sentences": "How to view documentation from previous version", "answer": "Versions older than 8.0.0 iirc had a single readme for docs, for Next.js 7 you can see the docs here: https://github.com/vercel/next.js/tree/7.0.0"}
{"sentences": "Client side navigation not working even on a brand new empty barebones project (App router)", "answer": "Thanks for providing the steps to reproduce! \r\n\r\nThe issue has been resolved, thanks!"}
{"sentences": "Error occurred prerendering page \"/\". Deployment Error on Vercel", "answer": "Following this post same issue, been smashing my head at it for a few days works perfect locally."}
{"sentences": "Does Caching function work if I use Axios Library on Next.js- Next.js14", "answer": "The same question has not been answered until now.. Cache control in NextJS using Axios doesn't work :("}
{"sentences": "defer -> async of next scripts caused a page speed drop", "answer": "Since https://github.com/vercel/next.js/pull/26021 (June 11th) scripts are loaded with `defer` as default again.\r\n"}
{"sentences": "bodyparser does not work in nextjs 13.3.0", "answer": "For route under /app with next.js v13.3, you may need to get the JSON format of the request first, as mentioned in the beta docs (https://beta.nextjs.org/docs/routing/route-handlers#request-body):\r\n\r\n    const { username } = await req.json();\r\n "}
{"sentences": "Error: Unable to find any supported Python versions.", "answer": "I resolved the issue! It seems that defining a Node engine version in package.json can interfere with Python deployment. Removing the Node engine version allowed Vercel to deploy my app smoothly.  ¯\\\\\\_(ツ)_/¯"}
{"sentences": "[SERVER ACTIONS] No digest number on error in production", "answer": "looks like this PR will fix it - https://github.com/vercel/next.js/pull/61592"}
{"sentences": "Can't run tests locally because of swc error", "answer": "It looks like i had an old swc version built in the repo, i had to delete them with\r\n\r\n```\r\nrm -rf packages/next-swc/native/*\r\n```"}
{"sentences": "bundle-analyzer, The term 'ANALYZE=true' is not recognized as the name of a cmdlet, function, script file, or operable program.", "answer": "Hi, this is due to how environment variables are handled in the Windows command prompt, you should be able to use `set ANALYZE=true` and then `yarn build` instead or you can use `npx cross-env ANALYZE=true yarn build`. "}
{"sentences": "Certain CSS styles not being applied when deployed on Vercel", "answer": "Seeing this when building locally too. Didn't copy your repo, but just the css bits that are affected. Strange... but i think I've seen this before, I'll give it a go at producing a minimal repro. Perhaps it is the nesting?"}
{"sentences": "How to handle errors in ServerActions", "answer": "Thanks, guys! I've managed to return a value as a Promise on the Server Function. Just using await and I can get it on the client."}
{"sentences": "Deployed NextJS app's API returns 404", "answer": "The issue was not with API routes - the issue is that Vercel is masking unhandled exceptions to `404`. So if something bad happens on back-end and you do not catch the exception **AND** returrn it to front-end you will never know what actually happened."}
{"sentences": "Next 13.4.1 : Images, Js and Css not loading after build. Shows 404 for all", "answer": "The Fix is\r\nManually copy the _next folder in dockerfile\r\nFor js and css\r\n```COPY --from=builder --chown=10101 /app/.next ./_next```\r\nFor images\r\n```COPY --from=builder --chown=10101 /app/public ./public```\r\n\r\nThank you @icyJoseph "}
{"sentences": "Get static page nested in dynamic page with Link", "answer": "I think the easiest solution is to call the `useParams` hook and pass the id as a variable in the href string: \r\n```js\r\nconst params= useParams()\r\n\r\nreturn (\r\n...\r\n   <Link href={`dictionary/${params.id}/${item.link}`}>Menu Link</Link>\r\n...\r\n)\r\n```"}
{"sentences": "Issue with hosting an app on vercel", "answer": "the error is clear enough to google and find: https://github.com/prisma/prisma/discussions/11929"}
{"sentences": "Image component doesn't work with Google profile images urls", "answer": "I fixed it by trying the following setting\r\n\r\n`pathname: \"**\"`\r\n"}
{"sentences": "How run next.js with node-sharp for docker", "answer": "> Sharp is installed in package.json\r\n\r\nIf you have installed sharp in package.json, you do not need to specify sharp location in the `.env` file. "}
{"sentences": "Invariant: incrementalCache missing in unstable_cache", "answer": "The issue was solved by moving the usage of `unstable_cache` into a component rather than defining it outside of one."}
{"sentences": "App router in nextjs doesn't render page.js and layout.js at the same time (only one of those)", "answer": "Hi! It's not a bug.\r\nEach layout should accept children.\r\n\r\n[docs](https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#nesting-layouts)"}
{"sentences": "help detecting client disconnections in route handlers", "answer": "https://github.com/vercel/next.js/issues/50364"}
{"sentences": "process.env.VERCEL_URL is undefined", "answer": "You need to add \"VERCEL_URL\" to your environment variables UI: https://vercel.com/docs/concepts/projects/environment-variables#system-environment-variables"}
{"sentences": "Calling route handler in client component", "answer": "Try renaming your method to `GET`, all uppercased:\r\n\r\n```ts\r\n// all uppercased\r\nexport function GET() {\r\n// rest of your implementation\r\n\r\n```"}
{"sentences": "Deployment error on latest canary branch with PPR enabled", "answer": "Marked this as closed, the issue came about because the `14.1.1` was released and therefore the `14.1.1-canary.82` canary was out of date, and I just had to wait till `14.1.2-canary.0` released to get the builds working again"}
{"sentences": "assetlinks.json file on root", "answer": "You can add this folder inside the `public` folder, this will make it available directly from the root of your app: https://nextjs.org/docs/basic-features/static-file-serving"}
{"sentences": "How Do I Persist Cache With Docker?", "answer": "I found the answer, this is what I needed: \r\n```\r\nRUN mkdir -p /app/.next/cache && chown nextjs:nodejs /app/.next/cache\r\nVOLUME [\"/app/.next/cache\"]\r\n```"}
{"sentences": "How do I use onClick with next/image (<Image>)?", "answer": "The `Image component does not accept an `onClick` prop, but you could wrap the `<Image />` element in a `<div>` or `<a>` tag and place the `onClick` handler on that element."}
{"sentences": "revalidatePath not working on the first attempt", "answer": "Found the solution!\r\n\r\nChanged the prisma call to an `await` 😅\r\n\r\nChanged code:\r\n\r\n```tsx\r\ntry {\r\n    note = await db.notes.create({\r\n        ...\r\n  } catch (error) {\r\n  }\r\n```"}
{"sentences": "Redirection from \"example.com/path/\" to \"example.com/path\" with 308 Permanent Redirect status code", "answer": "Hi,\r\n\r\nThis a bit of an annoying thing, but trailing slash `/` is handled as either yes, or not, in Next.js apps. You can read more about it here: \r\n\r\n- https://nextjs.org/docs/app/api-reference/next-config-js/trailingSlash"}
{"sentences": "Intl.NumberFormat returning error, server and client side locales misaligned", "answer": "the problem should be solved in node v14.x.x"}
{"sentences": "Metadata and GraphQL", "answer": "Doc says just to do two identical queries. React will cache them. Howful, but works. Not sure helm will work in server components."}
{"sentences": "I didn't encounter any errors on my local build, but when I deployed it on Vercel, I received an error message.", "answer": "What version of node are you using?\r\nTry using version 20.x.\r\n\r\nAlso check that the casing of your file import matches what's on disk. Windows isn't case sensitive like our Linux build environments are!"}
{"sentences": "Cannot find package 'drizzle-orm' in Docker Container even though I do npm install in Dockerfile?", "answer": "[Found the solution myself.](https://stackoverflow.com/a/78034830/6141587)"}
{"sentences": "where to add google-site-verification file", "answer": "You can do the verification in a lot of ways I'm using the meta tag approach:\r\n\r\nRead more here: https://support.google.com/webmasters/answer/9008080?hl=en"}
{"sentences": "Is there any way to upload and serve images in the nextjs application in runtime?", "answer": "I am afraid not:\r\n\r\n- https://github.com/orgs/vercel/discussions/3582#discussioncomment-6732865"}
{"sentences": "\"npm run dev\" not working", "answer": "One thing that's often causing issues is, having Node.js 32 bits on a 64 bits OS. \r\n\r\nRun this command:\r\n\r\n```console\r\nnode -p 'process.arch'\r\n```\r\n\r\nWhatever it prints, should match your OS' architecture."}
{"sentences": "searchParams.get('partition'); not get 'partition'", "answer": "this was the cause.\r\napp/api/route.ts\r\n```\r\n......\r\nexport const dynamic = 'force-static'\r\n```"}
{"sentences": "Next/Head encode URI?", "answer": "\"That's the behavior of `react-dom/server`. Here's a codesandbox using the snippet you're referencing.\r\n\r\nhttps://q6o1b.csb.app\"\r\n\r\nhttps://twitter.com/rauchg/status/1374190846963113989"}
{"sentences": "Why I can't process the .env.local?", "answer": "├── .env.local\r\n├── README.md\r\n├── jest.config.js\r\n├── next-env.d.ts\r\n├── next.config.js\r\n├── package.json\r\n├── pages\r\n├── public\r\n└── yarn.lock\r\n\r\n\r\n^^^  this made the error go away... "}
{"sentences": "Custom 404 not-found page not working in Vercel", "answer": "Ok so I try to host on another provider in Docker  and the custom 404 page is working, looks like it didn't work only when I deploy in Vercel in 13.4.12. And once I update into 13.4.19  now the custom 404 is finally working in Vercel."}
{"sentences": "Image cache issue. Images rendered by next/image disappears/ doesn't load on page refresh.", "answer": "fixed my issue by configuring a loader--\r\n\r\n\t\tloader={({ src, width, quality }: ImageLoaderProps) => {\r\n\t\t\t\t\t\treturn `${content ? content : '/user.png'}?w=${width}&q=${\r\n\t\t\t\t\t\t\tquality || 75\r\n\t\t\t\t\t\t}`;\r\n\t\t\t\t\t}}"}
{"sentences": "How to set Title in client component", "answer": "```\r\nexport default function Page() {\r\n  return (\r\n    <>\r\n      <title>Page title</title>\r\n\r\n      <OtherComponent />\r\n    </>\r\n  )\r\n}\r\n```\r\n\r\nhttps://stackoverflow.com/questions/76397721/how-to-set-title-of-a-client-component-in-next-13"}
{"sentences": "Nature of error.digest", "answer": "To answer myself after comparing the hash on localhost deployment and the hash on server deployment: it is not deterministic 😄 "}
{"sentences": "Error collecting traces on build, RangeError: Maximum call stack size exceeded", "answer": "Apparently the error was related to sharp 0.33.2, a dependency that appeared as a recommendation in the terminal when I started using 'next/image'. When I uninstalled it everything worked perfectly."}
{"sentences": "Different solution to prefix static resources", "answer": "Fixed in https://github.com/vercel/next.js/pull/61676"}
{"sentences": "Getting error trying to start development server", "answer": "Hello.\r\n\r\nIt seems that there might be a solution here: https://github.com/vercel/next.js/discussions/30519#discussioncomment-1556021\r\n\r\nRemove `.yarnclean`, `node_modules`, `yarn.lock` and run yarn again."}
{"sentences": "Problem with parallel routes and server actions", "answer": "**v14.0.4** resolves the problem 🥳🥳🥳. But, i still have it with Turbopack enabled"}
{"sentences": "unhandledRejection: TypeError: Cannot read properties of null (reading 'useReducer')", "answer": "Here is how i solved it:\r\n\r\n- yarn set version stable \r\n- yarn install \r\n- yarn cache clean \r\n- yarn dev\r\n\r\napparently it was just the yarn cache"}
{"sentences": "Next.js fonts are erroring out on `pnpm build`?", "answer": "try edit your package.json script\r\n\"dev\": \"next dev\"  to \"next dev --turbo\"\r\n\r\nbut its only work in dev i dont know about build"}
{"sentences": "Selector \":root\" is not pure", "answer": "Are you using CSS modules by any chance? How are you importing this css file?"}
{"sentences": "Routes in app/api is not working", "answer": "Dang it, I have figured out the cause. There's a space at the end of the api folder name. Wasted me 2 days. "}
{"sentences": "Website not Responsive on Next js 14.0.4", "answer": "**ok i fixed it by setting my navbar and footer to** \r\n\r\n`position:fixed`"}
{"sentences": "How do you read x-www-form-urlencoded content in api route?", "answer": "This content type is already supported and made available to `req.body` in an API route."}
{"sentences": "Getting strange `;` at the end of HTML output", "answer": "Nevermind just sorted it myself - it was a trailing semicolon that sneaked into the SEO component from nowhere ..."}
{"sentences": "Upgraded from v12 to v12.2.3 -> ValidationError: Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema", "answer": "I've just updated `next-superjson` from 0.0.2 to 0.0.4 and it appears to run again, phew. I had updated `superjson`, but not `next-superjson` originally to no avail."}
{"sentences": "Sharp `0.33.2` makes build at deployment fail", "answer": "This seems to be fixed in Next.js 14.1.0\r\nCan anyone confirm?"}
{"sentences": "Help me. I can't fix error after npm run build  \"ReferenceError: window is not defined\". Where should I fix the code?", "answer": "Hi, \r\nI tried dynamic import PostionMarker component can fixed it\r\n`import PositionMarker from \"./positionmarker\";` =>`const PositionMarker = dynamic(() => import('./positionmarker'),{ssr: false,});`"}
{"sentences": "400 bad request in production after upgrading to 14.0.2 (and after)", "answer": "Has been fixed. \r\n\r\nThe issue was that I was accidentally setting `proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;` **twice** in my Nginx config. That it only broke with this version and upwards, is most likely related to #57815 ."}
{"sentences": "Provider not work in function - nextJs 14", "answer": "How are you using `SocketProvider`? that has to wrap your React tree at some point."}
{"sentences": "Route Caching, am I doing it wrong? or it can't handle this simple scenario?", "answer": "Hey 👋\r\nHere is an in-depth caching discussion with a proposal to make a 30-second cache configurable.\r\n\r\nhttps://github.com/vercel/next.js/discussions/54075#discussioncomment-6754339"}
{"sentences": "using {GoogleAnalytics} showing \"Unsupported Server Component\"", "answer": "It worked out of no where, I made a new website and thought to give it a try, i tried it and it worked. Reinstalling third-parties package might have fixed it. Last time i checked their was no google analytics in `google.d.ts`but now it is present"}
{"sentences": "getServerSideProps cached at Vercel", "answer": "I seem to recall a couple of ways in which this can happen.\r\n\r\nWe should discard `next-pwa`, do you have enabled? Meanwhile I can search through the discussions to find the other case."}
{"sentences": "API routes using Firebase break in Production", "answer": "Wait... I think I know! You should be using `firebase-admin` when you're on the server.\r\n\r\nHere's an example: https://github.com/leerob/nextjs-vercel-firebase"}
{"sentences": "\"Linting and checking validity of types ... Failed to compile. \" - Unable to deploy", "answer": "Hi,\r\n\r\nYou need to remove the `export const` for a `const` in:\r\n\r\n- https://github.com/gowthamc0702/vak/blob/main/app/products/%5Bid%5D/page.tsx#L29\r\n\r\nIn App Router, page.tsx files can only export a few things, and `ProductPage` is not one of them."}
{"sentences": "Next 13 api route handler status code", "answer": "The 2nd param is options, you can set status there.\r\n\r\n```js\r\nreturn new NextResponse.json(data, { status: 201 })\r\n```"}
{"sentences": "How to use middleware to protect api auth (pages dir)", "answer": "If you have a `src` directory, then you should have `src/middleware.ts` and `src/pages/`.\r\n\r\nIf there's no `src` directory, `middleware.ts` should be at the same level of `pages/`"}
{"sentences": "Multiple middleware functions", "answer": "Starting with `next@12.2.0` there's only one top level middleware. So to OP's question, not anymore, it was only possible on a per level basis, but now it is all from the root in one single function/file.\r\n"}
{"sentences": "[Static export] Generated inline scripts, `self.__next_f.push` raises CSP errors", "answer": "- How it works: https://github.com/vercel/next.js/discussions/42170#discussioncomment-8137079\r\n- Docs for `nonce` and CSP: https://nextjs.org/docs/app/building-your-application/configuring/content-security-policy"}
{"sentences": "NEXTJS 13: self.__next_f.push append to <script> tag in source code", "answer": "https://github.com/vercel/next.js/discussions/42170#discussioncomment-8137079"}
{"sentences": "How Do I Remove `self.__next_f.push` From Static HTML Exports", "answer": "https://github.com/vercel/next.js/discussions/42170#discussioncomment-8137079"}
{"sentences": "I'm using Next.js 13.3 app route, I got self.__next_f.push and .txt file in routed URL", "answer": "https://github.com/vercel/next.js/discussions/42170#discussioncomment-8137079"}
{"sentences": "Server component requires 'use client' to execute server action", "answer": "I think the problem is that server components do not serialize functions, unless these are marked with use server. So you are essentially passing a generic callback to your `action` prop, and that won't be serialized into a server action. "}
{"sentences": "Create new Nextjs app", "answer": "Did you try again? Or maybe, clear your npm cache? \r\n\r\n```console\r\nnpm cache clean --force\r\n```"}
{"sentences": "need to show product description and varients when a particular product is selected", "answer": "I guess, this is an issue with your CSM/DB and how you query the description from it? Could you share more information about what is it you are doing?"}
{"sentences": "Hard Reload a Route/Component to Reset the state", "answer": "This works for me, I'm going to go ahead with this.\r\n\r\n```js\r\nexport const hardRefresh = () => {\r\n    window.location.reload();\r\n}\r\n```"}
{"sentences": "Error: Array must contain at most 50 element(s) at \"images.remotePatterns\"", "answer": "You can try this but then your images can be served from every other domain.\r\n\r\n```js\r\nconst nextConfig = {\r\n  images: {\r\n    remotePatterns: [\r\n      {\r\n        protocol: \"https\",\r\n        hostname: \"**\",\r\n      },\r\n    ],\r\n  },\r\n};\r\n```"}
{"sentences": "Error while creating cooking in server action", "answer": "Could it be that `expiresIn` doesn't exist? Could you verify the shape of `resData`?"}
{"sentences": "Not found (not-found.tsx) not using root layout?", "answer": "What next.js version do you have? I think in 13.4.10, and 13.4.11 this bug was present, but it was fixed in next@13.4.12"}
{"sentences": "Custom api routes using Next.js router", "answer": "@cseas You should be able to leverage the [upcoming custom routes](https://github.com/vercel/next.js/discussions/9081) feature to achieve this:\r\n```js\r\n  rewrites: () => [\r\n    { source: '/my-api-route', destination: '/api/my-api-route' },\r\n  ]\r\n```"}
{"sentences": "TypeError: Expected a non-empty string while pushing data to a state", "answer": "Hi @chamodRash \r\n\r\nCould you share your `next.config.js` file? More specifically, the `remotePatterns` section for images? I think you might have something incorrect there."}
{"sentences": "How to only allow API requests from Next.js app", "answer": "By default, API routes are [same-origin only](https://nextjs.org/docs/api-routes/introduction#caveats). Therefore they are secured to your application by default. "}
{"sentences": "Permission denied when building application", "answer": "Are you using MyDevil hosting perhaps? Change hosting. "}
{"sentences": "Next 13 is doing a full page refresh instead of client side navigation on route changes", "answer": "Can confirm that the issue seems to be resolved on `13.2.1-canary.0`. Please upgrade and test - I have upgraded all my apps (medium sized) and the issue is gone :) "}
{"sentences": "NEXT JS POST REQUEST ISSUE", "answer": "Hi,\r\n\r\nYou need to await the call to `.json()`, here:\r\n\r\n```js\r\n// signup.js\r\n\r\nconst { username, email, password } = await request.json(); // Add await here!\r\n\r\n```"}
{"sentences": "Failed to load plugin '@next/next' declared in '.eslintrc.js'", "answer": "mmm what is @next/next? the next plugin is called `eslint-config-next`, and we typically extend `next/core-web-vitals` in the eslint config.\r\n\r\nWould you mind sharing more? `package.json` and `.eslintrc.js`, also file structure if possible."}
{"sentences": "Does _document's getInitialProps invalidate Auto Static Optimization?", "answer": "`_document` only runs in the server, and it doesn't affect static optimization."}
{"sentences": "Next.js doesn't respect Browserslist", "answer": "You can now add browserslist when enabling an experimental flag: https://github.com/vercel/next.js/discussions/33227#discussioncomment-3047837"}
{"sentences": "How can I quickly find all TypeScript errors?", "answer": "You can add a `type-check` command in the NPM scripts:\r\n\r\n```\r\n\"scripts\": {\r\n  \"type-check\": \"tsc\",\r\n  ...\r\n},\r\n```\r\n\r\nThis runs only the type-checking and will report all errors."}
{"sentences": "Where can I find a changelog for human?", "answer": "Read their blog https://nextjs.org/blog\r\n"}
{"sentences": "Next.js sends back empty html from the server", "answer": "Are you using redux-persist by any chance?"}
{"sentences": "getInitialProps not saving to store - redux-toolkit & next-redux-wrapper", "answer": "Nvm, managed it to get working! Cheers"}
{"sentences": "Blank screen on Vercel deployment", "answer": "Never mind I found the issue. I had a left over index.html inside public folder from Create React App, then I had to set my project settings to Next.js framework as it had defaulted to \"Other\"."}
{"sentences": "Same code, same dependencies, and one build has: Uncaught Error: Minified React error #423;", "answer": "Interesting case, Ubuntu somehow corrupt sqlite DB and was generate wrong data, and that's was a problem."}
{"sentences": ".next/cache in production", "answer": "Hello.\r\n\r\nYou do not need `.next/cache` to run your application !\r\nThis folder is used for build caching purposes to speed up the build process but is not a requirement to run in production."}
{"sentences": "opengraph-image.jpg in public folder", "answer": "The file does not go in the `public/` folder, but instead the `app/` folder 👍 \r\n\r\nSecondly, ensure you are using `metadataBase` for your layout or page:\r\n\r\n```js\r\nexport const metadata = {\r\n  metadataBase: new URL('https://acme.com'),\r\n}\r\n```"}
{"sentences": "Page is blocked from indexing, according to web.dev/meaure", "answer": "Staging urls are automatically set to noindex by Vercel to avoid accidentally indexing feature branches. Once you merge to the main branch and a production domain is aliased it won't have the noindex header."}
{"sentences": "Next 13.3.0 DELETE HTTP method issue ( Edit: issue still persists in 13.4 ( April 6, 2023 - May 6, 2023 ))", "answer": "Issue resolved;\nRef: #51874"}
{"sentences": "Next.js Link Component Not Updating Dynamic Pages on Subsequent Navigation", "answer": "It might be due to hydration error or size of first load js during build is red.\r\nBelow solution worked for us,\r\n\r\nIn app.jsx file,\r\n\r\n<Suspense fallback={<></>}>\r\n      <Body>{children}</Body>\r\n  </Suspense>"}
{"sentences": "OG Image Not Working", "answer": "> Having the same issue here, also the example rendering just some text with no custom font also don't work, they return an empty (white) image.\r\n\r\nSame here, using an enterprise account\r\n\r\n"}
{"sentences": "does next js 14 has pages router or now only app router?", "answer": "It is still [supported](https://nextjs.org/docs/pages) but they recommend us to use App Router to leverage the React's latest features."}
{"sentences": "next/font/google does not create CSS Variables after refresh", "answer": "I figured out the issue. Another CSS file was defining `--font-family-mono` and `--font-family-sans` as hard coded values – `Roboto Mono` and `Inter`. These were overriding the values generated by Next.js."}
{"sentences": "Are there any downsides or limitations of using Next.js api routes instead of custom server?", "answer": "Serverless functions scale better, are faster, and cost less. The only limitation afaik is that you can't have live connections (like websockets), because that would require the serverless function to stay alive."}
{"sentences": "how to get the client Ip address in app router?", "answer": "Updated the docs here to make it more clear this depends on the infra provider, but you can also read some things from headers if provided: https://github.com/vercel/next.js/pull/59719"}
{"sentences": "How do I use css variables with css modules in Next.JS", "answer": "You can define variables inside global css and use them in all modules as if they were defined there."}
{"sentences": "Vercel deployment failing with \"ReferenceError: document is not defined\"", "answer": "I'm getting this exact issue tonight as well, did you manage to get it working?"}
{"sentences": "IP addresses of Vercel servers", "answer": "https://vercel.com/guides/how-to-allowlist-deployment-ip-address"}
{"sentences": "Access client IP address in server action", "answer": "Updated the docs here to make it more clear this depends on the infra provider, but you can also read some things from headers if provided: https://github.com/vercel/next.js/pull/59719"}
{"sentences": "Geolocation Header on every request from node server.", "answer": "Updated the docs here to make it more clear geolocation depends on the infra provider, but you can also read some things from headers if provided: https://github.com/vercel/next.js/pull/59719"}
{"sentences": "Middleware with geolocation", "answer": "Updated the docs here to make it more clear this depends on the infra provider, but you can also read some things from headers if provided: https://github.com/vercel/next.js/pull/59719"}
{"sentences": "Why can't getStaticProps include the \"req\" object when not executed during build", "answer": "With Next.js 12, this is now possible out of the box with [middlewares](https://nextjs.org/blog/next-12#introducing-middleware). You have access to the request (e.g. for cookies) and can redirect, before the static site was sent to the user."}
{"sentences": "NextJS App Router Course - Question where are the images stored?", "answer": "Hi,\r\n\r\n- https://github.com/vercel/next-learn/tree/main/dashboard/starter-example/public/customers"}
{"sentences": "Share the data and full route caches across multiple instances", "answer": "See https://nextjs.org/docs/app/api-reference/next-config-js/incrementalCacheHandlerPath\r\n"}
{"sentences": "Fast Refresh takes 20+ seconds to trigger", "answer": "I got it fixed by rebooting my Mac. Uptime was 100 days 😅"}
{"sentences": "Multi page form cache issue", "answer": "I used vercel-kv (a redis cache) with revalidate and it works well."}
{"sentences": "No router instance found.  and  You should only use \"next/router\" on the client side of your app.", "answer": "https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating  \r\n已经解决 文档没看仔细"}
{"sentences": "Where loading.tsx should be located with dynamic segments to keep instant state", "answer": "Seems like instant `loading.tsx` does not work.\r\nThe following issues can be related.\r\n- https://github.com/vercel/next.js/issues/54667\r\n- https://github.com/vercel/next.js/issues/49125\r\n- https://github.com/vercel/next.js/issues/43548\r\n"}
{"sentences": "Observability: OpenTelemetry", "answer": "I think this can be closed: https://nextjs.org/docs/app/building-your-application/optimizing/open-telemetry"}
{"sentences": "How to ignore a folder when running \"next build\"", "answer": "This issue was fixed on next@canary, please try it out."}
{"sentences": "Unable to setup Opentelemetry in Next.js", "answer": "I think instrumentation.ts needs to be in src if using src directory. "}
{"sentences": "SyntaxError: Unexpected token '??=' after creating nextjs app and running it", "answer": "Hi,\r\n\r\nThe `??=` syntax is only supported after Node 15. Please upgrade your Node version. Do remember that Node 18 is the current Long Term Support version."}
{"sentences": "Infinite redirect on 404 not found page (production)", "answer": "After some investigation, a `router.refresh()` was hidden somewhere. We're using supabase, and the refresh was linked to the authentication resetting. I assume the 404 page triggered an auth reset, and so triggered the router refresh."}
{"sentences": "Wrong environment variable used in production", "answer": "The support I received from Vercel told us to check this https://vercel.com/docs/monorepos/turborepo#handling-environment-variables\r\n\r\nThis resolved our issues."}
{"sentences": "Can't get latest data from fetch call, any help is appreciated!", "answer": "Solved: \r\nFetch directly from the Server Component instead of the API.\r\nhttps://nextjs-faq.com/fetch-api-in-rsc"}
{"sentences": "Why is my dynamic sitemap.xml not working?", "answer": "Finally, I found out that there was no issue with my code. For localhost, the correct URL path for the sitemap will be http://localhost:3000/sitemap.xml/0.1. However, when working on production, it will be http://domainname/sitemap.xml."}
{"sentences": "Why there's no new Who's hiring posts?", "answer": "We're pausing doing these posts for now - we might restart them in the future 👍 "}
{"sentences": "Static assets upload returns 404 in production", "answer": "Hi, didn't know this was moved here.\r\n\r\nI solved this by using express to serve my static files\r\n`server.use(express.static(path.join(__dirname, 'public')));`"}
{"sentences": "What import alias would you like confiugred?", "answer": "I had the same question. I found this article by Abdulrahman Afaraetu to be helpful: https://dev.to/rhammy/path-aliases-in-nextjs-2fnc\r\n\r\n![image](https://user-images.githubusercontent.com/3661934/221916390-3a740a0f-d242-4c40-aad3-50913cae0d56.png)\r\n"}
{"sentences": "is there any way to delete all cookies with one command", "answer": "🤔 maybe?\r\n\r\n```ts\r\n cookieStore.getAll().forEach((cookie) => {\r\n    cookieStore.delete(cookie.name);\r\n  });\r\n```\r\n"}
{"sentences": "NextApiRequest  POST METHOD HAS EMPTY BODY", "answer": "Got this figured out by adding headers to the request. Specifically Content-Type : application/json"}
{"sentences": "Hide Warning about Automatic Static Optimization", "answer": "As far as I know there's no way of silencing this warning. Here's the line where it happens in case that helps you, https://github.com/vercel/next.js/blob/4a7ab34baf932c102fbf281660f09f7eb98c4b74/packages/next/build/index.ts#L1141"}
{"sentences": "Is getInitialProps deprecated or just not recommended?", "answer": "`getInitialProps` **is not deprecated**. But **we do not recommend its usage** over `getStaticProps` or `getServerSideProps`. That's doesn't mean you can not use it, it only means that from our opinion you should use the new data fetching methods."}
{"sentences": "Prefetch on hover/on touch option?", "answer": "Update: you can prefetch on hover with prefetch={false} (good or bad).\r\n\r\nSee here: https://nextjs.org/docs/api-reference/next/link"}
{"sentences": "Deploying Next.js to IIS with a custom server", "answer": "`next build` and then `next start` should be enough, it's a Node.js application so it's not any different from hosting a Node.js server on IIS"}
{"sentences": "Express.Js Server as Backend not working on Vercel", "answer": "Check out this link, hope might work: https://github.com/devhasibulislam/ciseco-ecommerce/issues/2#issue-1995070179"}
{"sentences": "Chunks commons bundle big because of ellipses, bn.js etc", "answer": "This would likely be due to a dependency being used in your `pages/_app.js` file."}
{"sentences": "Redirects with wildcards", "answer": "Hi. Please, try the following code:\r\n\r\n```\r\n{\r\n  source: '/Bill-Jones:path*',\r\n  destination: '/artists/bill-jones',\r\n  permanent: true,\r\n},\r\n```"}
{"sentences": "Middleware not compiling with --turbo [Next JS 14]", "answer": "Hey it seems like it has been fixed since `14.0.3-canary.2` with this PR: https://github.com/vercel/next.js/pull/58218\r\n\r\nTry upgrading next to the canary and retry it."}
{"sentences": "How to see list of modules compiled?", "answer": "You can use the [next bundle analyzer](https://github.com/vercel/next.js/tree/canary/packages/next-bundle-analyzer) to analyse the sizes of the different modules in your bundle."}
{"sentences": "Imgix loader seems broken after upgrading from next/legacy/image to next/image", "answer": "Oh, it seems `loader` with the built in `imgix` value is not available in the new `Image` component. A custom loader must be created and defined as `loaderFile`"}
{"sentences": "Why can't we get pathName in server component ?", "answer": "just use ```headers``` from next:\r\n```js\r\nimport { headers } from \"next/headers\";\r\n\r\nconst header = headers();\r\nconst pathname = header.get('next-url')\r\nconsole.log('pathName:', pathname);\r\n```"}
{"sentences": "Return redirect from getServerSideProps", "answer": "Opened a RFC here: https://github.com/vercel/next.js/discussions/14890"}
{"sentences": "You are using a non-standard \"NODE_ENV\" value in your environment. This creates inconsistencies in", "answer": "solution:\r\n\r\nchange `NODE_ENV` to other,   \r\n\r\ni change `NODE_ENV` to `APP_ENV`,  but not work\r\n\r\nmust change to      `NEXT_PUBLIC_APP_ENV`,   \r\n\r\nthe point **NEXT_PUBLIC_**"}
{"sentences": "Best way to switch to maintenance mode", "answer": "We added a template here for a Next.js application that uses Middleware to toggle maintenance mode: https://vercel.com/templates/next.js/maintenance-page"}
{"sentences": "Where to statically fetch site-wide data?", "answer": "Stumbled on this old discussion, but this is now possible with the App Router.\r\n\r\nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating"}
{"sentences": "Semantics of `GET` v `DELETE` for Logging Out", "answer": "Or...\r\n\r\n```jsx\r\n<form method=\"post\" action=\"/api/logout\">\r\n  <button type=\"submit\">\r\n     <ExitIcon /> \r\n  </button>\r\n</form>\r\n```\r\n"}
{"sentences": "Use of ServerAction is triggering \"ReferenceError: FormData is not defined\" while building the application", "answer": "If I remember correctly, Node 16 doesn't have a  FormData API.\r\n\r\nYou need at least Node 18, which introduced the fetch family of API's, included FormData. "}
{"sentences": "intercepting responses in middleware and modifying them", "answer": "That's not possible with the Next.js middleware.\r\n\r\nSee more here: https://github.com/vercel/next.js/discussions/49086#discussioncomment-5788198\r\n\r\n"}
{"sentences": "Can I switch from create-react-app to create-next-app automatically using a CLI?", "answer": "Something like this? https://nextjs.org/docs/app/building-your-application/upgrading/codemods#migrate-from-cra \r\n\r\nNever used it myself though."}
{"sentences": "Build Log shows /_not-found", "answer": "Hi,\r\n\r\nWhy did that worry you? It is the page that Next.js will serve for 404'd paths.\r\n\r\nYou can also make a custom `app/not-found.tsx` file, if you want to customize how that 404 page looks."}
{"sentences": "how to show favicon?", "answer": "Remove favicon.ico on `/app`"}
{"sentences": "Self hosted NextCache config", "answer": "https://nextjs.org/docs/app/api-reference/next-config-js/incrementalCacheHandlerPath"}
{"sentences": "Dynamic routes and state management", "answer": "[Here's](https://github.com/pmndrs/zustand/discussions/2158) what I ended up with. The example is using slightly different entities. "}
{"sentences": "NextJS page keep reloading again and again.", "answer": "There were a few issues here that should be resolved on the latest version of Next.js, e.g. when using `error.js` files. Please update the the latest version and if you're seeing a bug, open an issue with a reproduction 🙏 "}
{"sentences": "window.gtag is not a function on redirect back to site?", "answer": "gtag wasn't available on the window at the time useEffect ran, fixed."}
{"sentences": "How is nextjs.org/docs made?", "answer": "Looks like the source code powering nextjs.org/docs is currently closed source per https://github.com/vercel/next.js/discussions/54936"}
{"sentences": "NextJS 13 : How to get a dynamic page id in the url from a component?", "answer": "I think you want to use `useParams` \r\n\r\n- https://nextjs.org/docs/app/api-reference/functions/use-params"}
{"sentences": "How to request a new example repo?", "answer": "I would recommend creating a new GitHub issue in the repository, outlining the details of the new example repository you'd like to see. \r\n"}
{"sentences": "NextJS 13 + MongoDB - Data won't update in real time in production, but works on dev", "answer": "Your GET function might be getting statically optimised.\r\n\r\nTry adding `export const dynamic = 'force-dynamic'` from the file.\r\n\r\n- https://nextjs.org/docs/app/building-your-application/routing/route-handlers#caching"}
{"sentences": "Problem with yandex metrics", "answer": "I solved the problem. Next js added image preload yandex pixel. What causes ddos metrics"}
{"sentences": "getting full uri/url on getServerSideProps all parameters after an hash (\"#\") are being discarded", "answer": "Hi,\r\n\r\nEverything that comes after the `#` is never sent to the server. This is handled by your browser. The `#` is used as a client side only thing as per spec. \r\n\r\nMore content: https://github.com/vercel/next.js/issues/55044#issuecomment-1708001099"}
{"sentences": "is this is the correct usage of next.js app and pages directories?", "answer": "Yeah, you can incrementally move into App router from Pages, so having them both is to be expected.\r\n\r\nDoing SPA transitions between App and Pages Routes, does trigger a hard navigation though."}
{"sentences": "SignIn throws 405 error", "answer": "I was able to resolve it.\r\nThe issue was I was invoking the `onSubmit` method on the onClick method. Moving it to the form action resolved the issue."}
{"sentences": "Error: getaddrinfo ENOTFOUND in API route", "answer": "i need to point my URL to be the container name instead of http address"}
{"sentences": "Middleware vs Prefetch", "answer": "You can disable the Middleware for certain request headers, including the prefetch requests. Take a look here: https://github.com/vercel/next.js/discussions/37736#discussioncomment-7274460"}
{"sentences": "Why won't my code deploy without this error to Vercel?", "answer": "I was passing an incomplete URL to new URL(), thinking that VERCEL_URL had https:// prepended already, but it didn't"}
{"sentences": "How to change output type parameter in NextJS build command?", "answer": "Not really, but maybe you can use an `env` var, and set the output mode in `next.config.js` to `standalone`, if the env var has a given value, otherwise, keep it `undefined`"}
{"sentences": "404 error  for /public/static just uploaded files only in production mode", "answer": "https://github.com/vercel/next.js/discussions/16417 the public directory isn't an actual directory, it is a collection of mapped routes created at build time."}
{"sentences": "Static pages and A/B testing with middleware - HOW?", "answer": "Wrote some thoughts and included a few examples here: https://vercel.com/docs/concepts/solutions/ab-testing"}
{"sentences": "Next.js 13, ts. Unexpected Video Element in URL Params from layout", "answer": "I guess the problem is the way the video src paths are written, try giving them absolute paths like `/videoBgPoster` or the like"}
{"sentences": "After the app has been running for a period of time, some routes will lose response and will return 304 when accessed", "answer": "it seems to me that disabling etag generation helps:\r\nhttps://nextjs.org/docs/app/api-reference/next-config-js/generateEtags\r\nDoes it work for you too?"}
{"sentences": "How to \"combine\" matchers for different middleware use cases?", "answer": "This article solves brillantly the issue:\r\nhttps://reacthustle.com/blog/how-to-chain-multiple-middleware-functions-in-nextjs"}
{"sentences": "RFC - add rawBody to NextApiRequest", "answer": "This worked for me, for handling a stripe webhook in a route handler.\r\n\r\n```js\r\nexport async function POST(request) {\r\n  const rawBody = await request.text()\r\n  // ...\r\n}\r\n```\r\n\r\nNo special configuration needed. (Next `13.5` app dir)"}
{"sentences": "Why is state update not working when a component is imported into root page?", "answer": "updating node to latest (v20.x.x) fixed the issue. "}
{"sentences": "Puppeteer does not work on vercel plattform", "answer": "Ok so I had to tweak a few things, took me hours. For this usecase I did create a blogpost which explains the solution in detail.\r\n[Puppeteer with NextJS on Vercel](https://www.umuttufanoglu.dev/blog/puppeteer-nextjs)"}
{"sentences": "Serving non-html content from non-api route", "answer": "Could you share a little more about what you're building? Trying to understand the use case for a plain-text response with dynamic routing. "}
{"sentences": "What is a technical definition of \"hydration\" within NextJS?", "answer": "A __hydration__ means \"Each generated HTML is associated with minimal JavaScript code necessary for that page. When a page is loaded by the browser, its JavaScript code runs and makes the page fully interactive \""}
{"sentences": "Error 500 when in production", "answer": "Solved !\r\nIf anyone get the same problem, there is a conflict between next: 13.5.4 and i18next.\r\njust removing the ^ in package.json fixed it (\"next\": \"^13.5.3\" to \"next\": \"13.5.3\")"}
{"sentences": "Modify/filter  __NEXT_DATA__", "answer": "`__NEXT_DATA__` is the data you return from `getStaticProps`, `getServerSideProps`, or `getInitialProps`. So if you want to filter the data in `__NEXT_DATA__` you'll need to filter what props you return from those methods. "}
{"sentences": "Error: An error occurred in the Server Components render. Next 13 App router", "answer": "It is solved. process.env.COOKIE_NAME was undefined. Don't know why. Then I hard-coded the cookie name. Fixed."}
{"sentences": "problem with fetch", "answer": "The problem is fixed now,\r\nI Turned off the Antivirus and Exited it completely."}
{"sentences": "FATAL ERROR: Reached heap limit (Nextjs 13.4.19)", "answer": "Really hard to tell without a code sample, but this is almost certainly a memory leak within your application. Try use [`node-memwatch`](https://www.npmjs.com/package/memwatch-next) to debug it."}
{"sentences": "Static pages are not displaying any UI - only raw arrays and objects", "answer": "After debugging it for the whole day, i literally just solved it half an hour after writing this post "}
{"sentences": "Is useEffect working in the next js version 13.5.3?", "answer": "Let's do some discard first, what Node.js version do you have? It should be at least 16.14 IIRC, but I'd recommend anything on 18."}
{"sentences": "How do I make that all `dashboard` pages are passed `isAdmin` check using `SessionProvider`?", "answer": "found a solution. [3rd solution is the best.](https://stackoverflow.com/a/77192756/6141587)"}
{"sentences": "How can I view the response of an API on the front end?", "answer": "Ok... when putting the code side by side I can see it better...\r\n\r\nNeeds this in the front end instead:\r\n\r\n`console.log(searchRes.output.text);`"}
{"sentences": "Deploying the NextJS blog tutorial to Vercel is failing (no such file or directory, scandir '/vercel/path0/posts')", "answer": "Solved it. For some reason, my initial push completely excluded the /posts folder so I had to add it again. You might also have to stop and rerun \"npm run dev\" if you make a file change."}
{"sentences": "Invalid <Link> with <a> child error is driving me nuts", "answer": "I figured out what was going on [nextjs-breadcrumbs](https://www.npmjs.com/package/nextjs-breadcrumbs) is not supporting Next 13 yet... \r\n\r\nhttps://github.com/NiklasMencke/nextjs-breadcrumbs/issues/47\r\n"}
{"sentences": "I need help with getStaticProps", "answer": "I think Nextjs doesn't allow to use both app and page directory, and if you want to switch, it may need some configuration."}
{"sentences": "getSortedPostsData \"is not a function\"", "answer": "If anyone else has this issue: add a carriage return at the end of posts.js."}
{"sentences": "How to get server side html when using App Router", "answer": "I think you have to do it as it SSRs like this:\r\n\r\n- https://nextjs.org/docs/app/building-your-application/styling/css-in-js#styled-components"}
{"sentences": "App router full-stack debugging doesn't hit break-point for client components", "answer": "If anyone who has a same issue as I had, try deleting .next directory and change localhost port to whatever you are using.\r\nIt worked after this."}
{"sentences": "Deployment fails when Loading UI is deleted", "answer": "fixed: Delete and regenerate build files\r\n\r\n```json \r\n\"scripts\": {\r\n    \"prebuild\": \"rm -rf .next\",\r\n },\r\n```\r\nor\r\n\r\n![Screenshot 2023-09-21 at 15 24 32](https://github.com/vercel/next.js/assets/72281546/1959d02b-b05b-49cb-b47d-083f788a9745)\r\n"}
{"sentences": "cant run docker images after success build.", "answer": "I am a bit busy, but if you try with the docker file from: https://github.com/vercel/next.js/blob/canary/examples/with-docker/Dockerfile do you see the same hanging behavior?"}
{"sentences": "Cannot read file/directory from getServerSideProps", "answer": "Nevermind, I've resolved the issue using `process.cwd()`."}
{"sentences": "Can't deploy my Next app on Vercel platform", "answer": "I guess you need to set `NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME` or something like that in your Vercel Dashboard?"}
{"sentences": "Can I detect draftMode client-side (with pages router)?", "answer": "Hi, yes you can detect if you are in preview mode in pages via the `isPreview` field on the router, related docs here https://nextjs.org/docs/pages/api-reference/functions/use-router#router-object"}
{"sentences": "Static js files being shown on screen", "answer": "Maybe? https://github.com/vercel/next.js/issues/48569#issuecomment-1518887170, https://github.com/vercel/next.js/issues/49130"}
{"sentences": "<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: Unable to snapshot resolve dependencies", "answer": "Omg, 2.5 days of problems, and realized that the similar reported issue in #27650 was refering to E:\\ and I am having problem on K:\\\r\n\r\nSolution: Move the project to C:\\ and it works!\r\n\r\nI leave it up to someone else to find out what the actual error is."}
{"sentences": "Alternative to App.getInitialProps", "answer": "Currently `getInitialProps` in `_app` is the only way to fetch global data for all pages in one place. "}
{"sentences": "nextjs first time load take while", "answer": "I updated my app to use next js 12.1.0 and it fix my problem now first load not taking any time load fast as any other request"}
{"sentences": "BAD_GATEWAY : ROUTER_CANNOT_MATCH", "answer": "Hi, this should be fixed in the latest canary of Next.js `v13.3.1-canary.0`, please update and give it a try!"}
{"sentences": "How can I push() a different key/value set into an object repeatedly?", "answer": "The above code wont work because you cannot push anything into a non array.... \r\n\r\n"}
{"sentences": "How to embedded a Font Awesome Icon inside a Link", "answer": "I was using Link component totally wrong! Here is the correct code:\r\n\r\n```\r\n<section>\r\n  <Link href=\"/counter\">\r\n    <a><FontAwesomeIcon icon={faChevronRight} /></a>\r\n  </Link>\r\n</section>\r\n```"}
{"sentences": "What versioning scheme does Next.js adhere to?", "answer": "They use semantic versioning.\r\n\r\nRef: https://github.com/vercel/next.js/issues/55097"}
{"sentences": "Parallel Route in App Router", "answer": "I got the solution, just delete `.next` folder and restart development server."}
{"sentences": "'use client' not working", "answer": "What Node.js version do you have? We noticed that some Node versions caused this error.  Please try with Node 18.17.1 https://nodejs.org/en"}
{"sentences": "How to configure <Image /> to support hiDpi (Retina) images?", "answer": "Yeah, just use this way:\r\n```\r\ndeviceSizes: [576, 768, 1024, 1440, 1920].flatMap(size => [size, size * 2]),\r\n```"}
{"sentences": "Is the \"Static Exports\" feature still available in the App Router?", "answer": "The feature is still available as you can check here on the docs page: https://nextjs.org/docs/app/building-your-application/deploying/static-exports\n\nAlso as you can see it also supports server components 👌"}
{"sentences": "How is Vercel shipping the Next.js docs?", "answer": "Hey! The source code for rendering the docs isn't open source, just the docs content in this repo. We'd like to get to doing multiple languages for the docs in the future.\r\n\r\nhttps://nextjs.org/docs/community/contribution-guide"}
{"sentences": "TypeError: configDeviceSizes is not iterable", "answer": "I believe what you meant to do is : \r\n\r\n```\r\nmodule.exports = {\r\n  reactStrictMode: true,\r\n  images: {\r\n     domains: ['i.pinimg.com']\r\n  }\r\n}\r\n```"}
{"sentences": "Add option to disable getServerSideProps on client-side navigation", "answer": "For folks exploring the App Router: https://nextjs.org/docs/app/building-your-application/caching"}
{"sentences": "next.js problem compiling - node modules error", "answer": "Are you using `useContext` within `_document`? Is  `_document` a `class` or is it a functional component?\r\n\r\n## Resolution\r\n\r\nOP had installed `next` globally."}
{"sentences": "With the new app router, can you still render components on the server, and then also make them client side?", "answer": "[Yes](https://nextjs.org/docs/app/building-your-application/rendering/client-components#how-are-client-components-rendered)"}
{"sentences": "Next/link not following redirects defined in next.config.js", "answer": "This limitation was kept in mind when building the new App Router and navigations now apply the redirects in middleware and next.config.js. For `pages` we can't do the same without introducing performance issues."}
{"sentences": "in next/image onLoad or onLoadingComplete not trigger any function", "answer": "sorry for this i made a mistake {loading ? (\r\n\r\n) : ( ) when i use this it not allow to make render the Image that why the onLoad not trigger"}
{"sentences": "Standalone build assetPrefix conditional config", "answer": "If you opt for 'standalone' output when building, your next.config file will be serialised into ./next/standalone/server.js. As of now, a dynamic assetPrefix would be only achievable by using a custom server."}
{"sentences": "TypeError: fetch failed with Next 13.4.19", "answer": "Found the error....\r\n\r\nSeems to be our liveness probe that tries to connect with the wrong port.."}
{"sentences": "How to preserve ISR cache on revalidation error", "answer": "You ``return: null`` for ``getStaticProps``"}
{"sentences": "Next.js' own developer guide to getting the product running doesn't work on MacOS", "answer": "In another node project besides Next.js, `pnpm dev` will work. Also, in that project repo, run `pnpm install -g next`. Next will be installed globally, and the `next info` command will work."}
{"sentences": "How can I update the URL in browser address bar when using middleware redirects in Next 13?", "answer": "Please share a repository if possible. What you are describing is the behavior of rewrite, rather than redirect.\r\n\r\nAre you sure you don't have rewrite instead? Or perhaps have next.config.js rewrites setup? Kind of confusing situation you are in."}
{"sentences": "Occasionally get served plain text version of website on DigitalOcean", "answer": "It seems that your error comes from this line:\r\n```\r\n0:[[[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true]\r\n```\r\n\r\nIf you look at what `__PAGE__` is, you find issues like that: https://github.com/vercel/next.js/issues/48082\r\n"}
{"sentences": "document.getElementById(\"root\") in next.js", "answer": "found it... instead of refrecing to `#root`  it requires to be `#__next`\r\n```\r\nhtml,\r\nbody,\r\n#__next {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n```"}
{"sentences": "App router infinite loop when Promise proxied", "answer": "I have verified this issue is fixed in release [13.4.20-canary.5](https://github.com/vercel/next.js/releases/tag/v13.4.20-canary.5)."}
{"sentences": "using the url in generateMetadata Function", "answer": "Found the solution, can read header using `import { headers } from \"next/headers\";` and read host from the header "}
{"sentences": "SSG - App Router - when using { cache: 'no-store' } Next no longer generates static HTML files.", "answer": "Straight from the docs under 'dynamic functions' \r\n\r\nIf you don't want caching, you can't have static generation.\r\n\r\n<img width=\"645\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/124500411/e8238b98-1fdf-499d-a21e-de8f09d2082d\">\r\n"}
{"sentences": "Fetch is caching 404 and returning 200 on subsequent requests", "answer": "This is a bug: https://github.com/vercel/next.js/issues/43831"}
{"sentences": "next/image Error: Invalid src prop", "answer": "fixed after I restart my computer"}
{"sentences": "onClick is not working", "answer": "Check out: https://github.com/vercel/next.js/issues/54269#issuecomment-1685110362\r\n\r\nThey figured it out that node v16.14.0+ fixes this issue."}
{"sentences": "13.4.15 listening host issue in docker", "answer": "fixed in 13.4.19"}
{"sentences": "Does `has` in `cookies` don't work in Route Handler?", "answer": "Resolved with #54112\r\nReleased in [v13.4.17](https://github.com/vercel/next.js/releases/tag/v13.4.17)"}
{"sentences": "generateStaticParams ~~> TypeError: result is not iterable", "answer": "Await the `.json` call:\r\n\r\n```js\r\nconst res = await getCountries.json();\r\n```\r\n\r\nAnd also map returning objects by doing:\r\n\r\n```js\r\nreturn res.map((item) => ({ slug: item.id}))\r\n```\r\n\r\nIn short, you have to return from the `generateStaticParams` function."}
{"sentences": "how to use less in next.js 13.4.13?", "answer": "yarn add less less-loader next-with-less\r\n`\r\n/** @type {import('next').NextConfig} */\r\nconst withLess = require(\"next-with-less\");\r\nmodule.exports = withLess({});\r\n`\r\n\r\nusage： `index.module.less`\r\n\r\nNow, this problem has been resolved"}
{"sentences": "question on preventing css flickering when implementing dark mode", "answer": "Yeah this is a good solution, Dan did the same with his blog: https://github.com/gaearon/overreacted.io/blob/master/src/html.js#L21\r\n\r\nBut I would inline the JS like he did instead of making a request for it."}
{"sentences": "It is posible to send query params when executing router.back()?", "answer": "Answer is no, In router.back() you can not send query params because it always navigate previous route which is in browser's history stack,\r\nsecondly they removed query now with useSearchParams() as replacement."}
{"sentences": "How to install next-js with react 17?", "answer": "After you run your command do:\r\n\r\n```shell\r\nnpm install next@12.1.4 react@17.0.2 react-dom@17.0.2 --exact\r\n```\r\n\r\nand then\r\n\r\n```shell\r\nnpm install --save-dev @types/react@17.0.39 --exact\r\n```\r\n\r\nAnd you should be fine."}
{"sentences": "next/image type declarations are missing on CI", "answer": "I encountered the same issue in my project. I resolved it simply by committing the `next-env.d.ts` file."}
{"sentences": "Why the \"Streaming with Suspense\"  in official App-Rourer demo deployed in vercel not work", "answer": "Thank you for spotting this, it's now fixed: https://github.com/vercel/app-playground/pull/145"}
{"sentences": "info Using wasm build of next-swc", "answer": "Just uninstall your current version of node js whatever you have and download the latest and stable version according to your device architecture from here -> https://nodejs.dev/en/download/ then restart your pc and it will work fine."}
{"sentences": "How to set custom headers for all pages via next.config.js", "answer": "You can use `source: \"/(.*?)\",`"}
{"sentences": "Angular Scully Preset does not access Chromium", "answer": "adding the following to scully.[project].config.ts worked:\r\n\r\n```\r\npuppeteerLaunchOptions: {\r\n  args: ['--no-sandbox'],\r\n},\r\n```"}
{"sentences": "Next13 notFound() working case question", "answer": "`notFound` has to be called while rendering. Inside use-effect, or event handlers it won't have any effect, because those are not happening in the rendering task.\r\n\r\n"}
{"sentences": "Nextjs <Link> not working", "answer": "This solves my problem, i didnt use the 'src/' directory\r\n\r\n![image](https://github.com/vercel/next.js/assets/141541112/75c25018-b724-4001-9992-0724648cdb47)\r\n"}
{"sentences": "Error with cookies (DynamicServerError: Dynamic server usage: cookies)", "answer": "Putting 'use server' on each file when you import {cookies} from 'next/headers' may fix this issue; I don't know why. But it did work for me."}
{"sentences": "Unable to import Html5 Navigator", "answer": "Hi, you need to wrap any usage of client-side APIs in a `if (typeof window !== 'undefined')` check before you attempt to use them or else they will throw an error during SSR or prerendering"}
{"sentences": "redirect() issue, error code: UND_ERR_REQ_CONTENT_LENGTH_MISMATCH", "answer": "I got the solution!\r\n\r\n```js\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n//Inside your async function\r\n\"use client\";\r\nconst router = useRouter();\r\nrouter.push(\"/\");\r\n```"}
{"sentences": "Random socket errors since Next v13.4.2", "answer": "We are running 3.4.13-canary.12 now and this no longer happens."}
{"sentences": "Why can't we have non React files inside our pages folder", "answer": "Solved it. For anyone wanting to know what I did:\r\n\r\non `next.config.js`, add this:\r\n```\r\n    config.plugins.push(new webpack.IgnorePlugin(/test.tsx$/));\r\n    config.plugins.push(new webpack.IgnorePlugin(/stories.tsx$/));\r\n```"}
{"sentences": "Generic error message being shown when a server component throws an error, I'd expect my error page or global-error page to appear?", "answer": "I think this turned out to be caused by https://github.com/vercel/next.js/issues/50863"}
{"sentences": "React Server Component not revalidated", "answer": "solved!  \r\nref: https://github.com/tegarjgap/nextjs-starter/pull/4\r\n"}
{"sentences": "react-hooks/rules-of-hooks", "answer": "Uppercase you react module names "}
{"sentences": "Image SRC Width and Height Issue", "answer": "Are you absolutely sure that this is the image giving the error? What Next version are you using?\r\n\r\nLooking at the source code, this case is only hit if you have a form of:  ` <Image src=\"i.png\" />`"}
{"sentences": "Documentation is very misleading regarding client-side route invalidation.", "answer": "This is being addressed in https://github.com/vercel/next.js/pull/52514, please give that a read! Thank you."}
{"sentences": "Incremental Static Regeneration", "answer": "Add a revalidate to the `notFound` branch:\r\n\r\n```ts\r\nif (!isPublished) {\r\n\t\treturn {\r\n\t\t\tnotFound: true,\r\n                         revalidate: 10\r\n\t\t};\r\n\t}\r\n```"}
{"sentences": "How do I serve a text file?", "answer": "Use a route.ts file."}
{"sentences": "View Page Source included JSON data?", "answer": "This is needed so Next knows what data to render while building your page on the server. It should not contain anything sensitive because you are using that same data to render your page 😄  There is no way to hide it."}
{"sentences": "Server side generated page with a video tag throws an error about failed hydration", "answer": "It turned out it was an issue of browser extension \"Video Speed Controler\", which is changing the source code in browser, but not in the server. After disabling the extension, no more warning."}
{"sentences": "Reusing ISR cache across builds on Vercel", "answer": "This is now possible, learn more here: https://vercel.com/docs/infrastructure/data-cache"}
{"sentences": "Dynamic assetPrefix for ISR pages (custom server)", "answer": "It seems NextJS 10's `fallback: \"blocking\"` might actually fix this :+1:, since it doesn't send a static fallback to browser."}
{"sentences": "How to handle SVG as a React component and an image?", "answer": "Hi,\r\n\r\nAccording to the docs, https://react-svgr.com/docs/next/, you have to do:\r\n\r\n```js\r\nimport Image from 'next/image'\r\nimport starUrl from './star.svg?url'\r\n\r\nconst Example = () => (\r\n  <div>\r\n    <Image src={starUrl} />\r\n  </div>\r\n)\r\n```\r\n\r\nRight? "}
{"sentences": "Force re-render of the Layout", "answer": "This can be solved (sort of) by using a `template.tsx` instead of a `layout.tsx`"}
{"sentences": "Nextjs abnormal Serverless Build error", "answer": "I got it fixed last month.\r\n\r\nAs I was using mono repo, Vercel also included files outside the frontend project while building. I unchecked, \"Include files out of the project folder\" and it fixed the issue."}
{"sentences": "Next.js API route error on Vercel - Unhandled Promise Rejection", "answer": "Mmm looks like it is something with phosphor icons.\r\n\r\n- https://github.com/phosphor-icons/react/issues/45#issuecomment-1488729840\r\n- https://github.com/vercel/next.js/issues/52646"}
{"sentences": "Module not found: Can't resolve 'private-next-root-dir/middleware.ts'", "answer": "I got it ! It results from custom config of webpack in next.config.js which rewrites the path alias. Either removing the whole alias field from config or adding a field named 'private-next-root-dir' resolved as __dirname can fix it."}
{"sentences": "How can i use dynamic route in Korean language ???", "answer": "Use `decodeURIComponent`, if you expect such characters :) \r\n\r\n```js\r\nlet x = '%ED%9A%8C%EA%B3%A0'\r\ndecodeURIComponent(x) // '회고'\r\n```\r\n\r\n"}
{"sentences": "'use client' causes page to crash, in dev but not in build", "answer": "Ok, I should have tried this before posting : \r\n\r\n_The problem happens on Safari but doesn't on Chrome._\r\n\r\nI'm fine working with Chrome, so this is a non issue.\r\n"}
{"sentences": "Next.js Slack Workspace", "answer": "There's an official Discord channel: https://discord.com/invite/w8p9Psrk2M\r\nI think it launched at the same time as their NextJS conf'"}
{"sentences": "Tailwind CSS installation question", "answer": "Hi,\r\n\r\nYou can read a bit more here:\r\n\r\n- https://github.com/vercel/next.js/issues/51161#issuecomment-1588848409\r\n- https://github.com/vercel/next.js/issues/51161#issuecomment-1590479944\r\n"}
{"sentences": "Getting error when trying to use a package that imports JSON file for i18n", "answer": "It turned out that the way my translations package was importing the json file did not work within the context of Next.js."}
{"sentences": "Local port calls since v13 upgrade", "answer": "Could it be this? https://github.com/vercel/next.js/discussions/51691#discussioncomment-6341657?"}
{"sentences": "Meta title is not updated in browser tab on route change.", "answer": "Fixed in v13.4.9\r\n\r\nhttps://github.com/vercel/next.js/issues/49409"}
{"sentences": "Is Next.js patching the built-in Promise?", "answer": "For future readers: https://github.com/swc-project/swc/issues/7658"}
{"sentences": "minimumCacheTTL for images not setting correct caching header?", "answer": "Related https://github.com/vercel/next.js/issues/52569?"}
{"sentences": "getStaticPaths ran but getStaticProps didn't", "answer": "@icyJoseph Okay so i found the reason why. I set `ssr` option to `true` in `createTRPCNext`, it has to set to `false`."}
{"sentences": "Unable to run Next App in Ubantu", "answer": "@vignesh-gupta isnt' the issue that your path has a `!` and webpack can't tolerate that? `/home/vignesh/Desktop/Code It!/` <-> This one bit with `Code It!`, remove the `!` -"}
{"sentences": "Route group can not contain `route.ts`?", "answer": "Looks like you can't have both `page.ts` and `route.ts` on same URL. For me the error was gone when I removed the route file away (ie, `./api/route.ts`)\r\n\r\nbtw, I'm not using dynamic routes in my case."}
{"sentences": "There is a way to create a route that opens a popup in my app?", "answer": "Hi @wilsonneto-dev. Check out the [with-route-as-modal](https://github.com/vercel/next.js/tree/canary/examples/with-route-as-modal) example. It shows how to open a modal depending on what route the user is on."}
{"sentences": "Third party scripts in root layout of app folder", "answer": "ok so I put it to root `template.tsx` and disabled lint error with \r\n\r\n```javascript\r\n/* eslint-disable @next/next/no-before-interactive-script-outside-document */\r\n```"}
{"sentences": "How to build docker with appDir", "answer": "For anyone who might have this issue, check your `.dockerignore`. I had this problem because the `src` dir was in `.dockerignore` from a previous branch."}
{"sentences": "Route handler: How to append userId inside request on middlewares", "answer": "What you want to do is set up a cookie and read it whenever you need to know `userId`."}
{"sentences": "Best way to style <Link> components using Tailwind", "answer": "You can add a section in the `global.css` to style anchors.\r\n\r\n```css\r\na {\r\n    @apply px-3 py-1 rounded-full bg-black dark:bg-slate-200 text-white dark:text-black;\r\n}\r\n```"}
{"sentences": "Why is there no new \"Who is hiring/wants to be hired\" thread for two months?", "answer": "Just posted the job threads for this month, thanks for the reminder!\r\n\r\nhttps://github.com/vercel/next.js/discussions/52399\r\nhttps://github.com/vercel/next.js/discussions/52398"}
{"sentences": "How to identify when the next.js hydration finishes hydration on client side?", "answer": "You should be able to use `useEffect` for this! `useEffect` does not run on the server, so that would be a good choice to run some code after the client loads."}
{"sentences": "Next generates localhost url for opengraph-image", "answer": "Need to set metadataBase for this to work, doesn't seem to be mentioned in the docs."}
{"sentences": "View and modify body in NextJs 12 Middlewares", "answer": "@davidecutrupi  a year+ later since posting the question `request.json()` works for me in `v13.1`"}
{"sentences": "Telemetry is catching an error and I cannot know the origin", "answer": "You need to use Node 16+, I'd recommend going all the way up to Node 18.16.0.\r\n\r\nMore info here: https://github.com/vercel/next.js/discussions/49923#discussioncomment-5926482"}
{"sentences": "where is the place of using root layout file in electron template?", "answer": "Have you tried adding a `_app.tsx` under `examples/with-electron-typescript/renderer/pages`? what happens if you do?"}
{"sentences": "Improving Style Element Loading Order in Next.js for Enhanced Rendering Stability", "answer": "I'm sorry :) The reason for the problem during the reboot was different. The image is loaded with a delay, and because of this, the flex element first has one child, then two :)"}
{"sentences": "EROFS: read-only file system, open '/app/.next/package.json'", "answer": "I fixed this by updating the container file system to writable. "}
{"sentences": "Add files to directory during build", "answer": "solved it, how to close this discussion"}
{"sentences": "File Uploader using Route Handlers", "answer": "For those payloads, I think so yeah. The API routes are not made to be a replacement for a CDN, both in terms of uploading and serving. "}
{"sentences": "Memory usage continuously increase under standalone mode", "answer": "This issue may be related: #49929 "}
{"sentences": "[Help] \"use client\" Could not get process.env.NEXT_PUBLIC_APP_ENV", "answer": "Try `process.env.NEXT_PUBLIC_APP_ENV` instead of `process.env?.NEXT_PUBLIC_APP_ENV`. It is looking for specific syntax because it is statically replaced during the build. You don't have to worry about `?.` in this case."}
{"sentences": "[Next 13.4] Middleware acts like a client component", "answer": "Turns out it wasn't because of the fetch call. It just doesn't seem to be possible to import `next/headers` in middleware at all, but there's a `cookies` object on `NextRequest`."}
{"sentences": "Errors on combination with NodeJs 18/20, Next.js 13.4.6, standalone output and ES Modules", "answer": "This seems to be fixed in 13.4.7"}
{"sentences": "All pages in app dir throws 'TypeError: createContext only works in Client Components. Add the \"use client\" directive at the top of the file to use it.'", "answer": "Framer Motion was causing this. It's probably using many client side hooks once animations only happens on client side. Not sure how to animate components with framer motion inside server components."}
{"sentences": "ISR and On demande revalidation", "answer": "solution \r\nhttps://github.com/vercel/next.js/discussions/51612#discussioncomment-6250425"}
{"sentences": "How to build NextJS using Docker and separated backend under VPN restricted access.", "answer": "`export const dynamic = \"force-dynamic\"` in `app/layout.ts` resolves my problem."}
{"sentences": "Modify request objects within middleware function", "answer": "Looks like we finally got the feature!\r\n\r\nhttps://github.com/vercel/next.js/pull/41380\r\n\r\nThere's a bug being addressed, but I'm very happy."}
{"sentences": "About errors using Analytics. Next.js(/app)", "answer": "How did you install the package? Yarn or npm? What was the package name you installed?"}
{"sentences": "useRouter returns undefined locale settings", "answer": "Hi, can you try the latest canary of Next.js `v10.0.2-canary.2`, this sounds related to some bug fixes that aren't in `v10.0.1`"}
{"sentences": "async RSC Streaming Content after </html> - Abuse of standards?", "answer": "Which version of Next.js do you have? IIRC they fixed the script tags after HTML closing a couple of versions back."}
{"sentences": "PageProps not getting updated on client side navigation", "answer": "To conclude, in version \"12.1.5\" of next the Link tag behaves in the way that the page data is (pre)fetched only when the link for the page comes in the viewport, and in version \"12.3.0\" the Link tag fetches the page data every time the link is hovered on."}
{"sentences": "v13.4.4 socket error", "answer": "I was using this script for dev:\r\n`\"dev\": \"NODE_OPTIONS='--inspect' next dev\"`\r\n\r\nIt seems the issues is with this. If I use just `\"dev\": \"next dev\"` it works fine.\r\n\r\nNot sure if it's related to this change in the last release: #48019 "}
{"sentences": "headers key name that contains underscore is missing", "answer": "Just learned that NGINX servers drop headers with underscore, https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/?highlight=disappearing%20http%20headers#missing-disappearing-http-headers \r\n\r\nWhere did you take the screenshot from?"}
{"sentences": "Hide Navbar and footer for the Login and Registration page", "answer": "You should use `router.path` instead of `router.asPath` for this use case. Can you try this?"}
{"sentences": "Why the changes made are not taking effect in nextjs?", "answer": "_make sure you save the file in order to track the changes_"}
{"sentences": "How to disable redirect on browser when i have an error on my code on nextjs?", "answer": "Hi,\r\n\r\nIs this happening on Safari, when Safari is the default browser? It is such a weird bug... It's more like, Safari steals the focus, and I can't figure out why! In the mean time, please use other browser. I am still investigating what's going on..."}
{"sentences": "Type for API route handlers does not exist", "answer": "The Request can also be a NextRequest. \r\n\r\nAnd the return type can be a Response.\r\n\r\n```ts\r\nexport type ApiHandler = (req: Request | NextRequest) => Promise<Response | NextResponse> | Response | NextResponse;\r\n```\r\n"}
{"sentences": "Error: Hydration failed because the initial UI does not match what was rendered on the server.", "answer": "I can't reproduce. Is this in pages or app dir? Do you have any extensions that mutate the DOM?"}
{"sentences": "Cannot use server actions in same file?", "answer": "Removing \"use server\" solved the problem--this is unintuitive though."}
{"sentences": "NextJs 13.4.0 has two new processes (jest-worker/processChild) running in NODE_ENV=production", "answer": "Closing and moving the conversation to https://github.com/vercel/next.js/issues/45508"}
{"sentences": "How do I password protect a page (using basic HTTP auth) in the app router?", "answer": "lazy internet, I googled it for you: `https://vancelucas.com/blog/how-to-add-http-basic-auth-to-next-js/`"}
{"sentences": "Error on every first line.", "answer": "if anyone facing this issue replace your .eslintrc file code with this line \r\n{\r\n  \"extends\": [\"next/babel\",\"next/core-web-vitals\"]\r\n}\r\n"}
{"sentences": "Next Image: 400 INVALID_IMAGE_OPTIMIZE_REQUEST on deployment", "answer": "Just ended up using a different image host which works fine."}
{"sentences": "Security headers missed in home page (index) but in subpages it's OK", "answer": "```  async headers() {\r\n    return [  \r\n        {\r\n          source: '/(.*)',\r\n          headers: [ security headers ]\r\n```\r\nThe problem was in the source path...\r\n\r\n```\r\n     source: '/:path*',\r\n        headers: ...\r\n```"}
{"sentences": "Is everyone supposed to be able to upgrade to Next JS 13 right now?", "answer": "@0xabrar install node `>=16` or `>18`"}
{"sentences": "Development server gets stuck at \"Creating an optimized production build\" step", "answer": "i fixed it by updating node version to 18.16.0 and deleting .next folder and rerunning npm run dev again"}
{"sentences": "Render different views at the same route based on authentication status?", "answer": "Found it! Buried at the bottom of the [parallel routes section.](https://nextjs.org/docs/app/building-your-application/routing/parallel-routes#conditional-routes) 😁  "}
{"sentences": "[app directory] Routing doesn't work inside not-found.tsx component", "answer": "It works now. Tested with next@13.4.3 -"}
{"sentences": "Rust is getting an unknown error.", "answer": "Sorry, I investigated the cause and it seems this is due to the prisma.\r\nOnly files that use prisma get errors."}
{"sentences": "not-found.tsx <Link> not working", "answer": "There's a fix on the making for this:\r\n\r\n- similar discussion https://github.com/vercel/next.js/discussions/49516\r\n- issue report https://github.com/vercel/next.js/issues/47862\r\n- potential fix https://github.com/vercel/next.js/pull/49855\r\n\r\n"}
{"sentences": "Error: Minified React error #321", "answer": "Hi @hpachy. Try to delete your `node_modules` and `.next` folder from your local project and then run your `npm run build` again. That seemed to solve it for me."}
{"sentences": "In the React Native Web example project, how do I set pageProps for each page", "answer": "export getServerSideProps function in each page"}
{"sentences": "draftMode() not working in localhost (next dev)", "answer": "Found this to be a Next.js issue with `redirect` : https://github.com/vercel/next.js/issues/49237"}
{"sentences": "npx create-next-app@latest failed!", "answer": "Hi,\r\n\r\nIt works for me. Did you try again? "}
{"sentences": "got the error [ERR_INTERNAL_ASSERTION]: TypeError [ERR_INVALID_THIS]: Value of \"this\" must be of type EventTarget", "answer": "I think this is some sort of Node 16 issue with the EventTarget API. Using Node 18 doesn't trigger this error. \r\n\r\nI tried with Node 16.16.0 - is it possible for you to upgrade to Node 18? It is the LTS after all."}
{"sentences": "Get the original page route in components.", "answer": "pages/foo/[bar]\r\n``` ts\r\nimport { useRouter } from \"next/router\"\r\n\r\nexport default function Page() {\r\n    const router = useRouter();\r\n    console.log(router.pathname);\r\n    return <></>;\r\n}\r\n```\r\n\r\nLogs `/foo/[bar]`."}
{"sentences": "Why is HMR being called on production?", "answer": "@moshie if `/_next/webpack-hmr` is being called it sounds like a non-production build was deployed that would also explain increased memory usage as dev inherently uses more memory than production.   "}
{"sentences": "keepAliveTimeout with standalone output", "answer": "`process.env.KEEP_ALIVE_TIMEOUT`"}
{"sentences": "Server Component set & delete cookies", "answer": "You can set cookies in Server Actions and Route Handlers: https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions"}
{"sentences": "Since I upgraded to Next 13, using jose jwtVerify inside the nextjs middleware is causing an error called ERR_JWS_INVALID.", "answer": "I would just like to make sure that, the issue is not related to https://nextjs.org/docs/messages/middleware-upgrade-guide#cookies-api-revamped, where the cookies API was reworked to return an object instead of a string.\r\n\r\nCould you confirm?"}
{"sentences": "Nextjs Image component stops working when configuring basePath", "answer": "Hi, when using `next/image`, you will have to apply the `basePath` as documented here:\r\n\r\nhttps://nextjs.org/docs/api-reference/next.config.js/basepath#images"}
{"sentences": "Set cookies in server actions", "answer": "Hi,\r\nThere is open issue => https://github.com/vercel/next.js/issues/49259"}
{"sentences": "Vercel deployment with sanity: Cannot find module 'sanity' or its corresponding type declarations.", "answer": "Found a solution which was to make a .vercelignore file and add \"sanity\" in there to ignore the whole folder."}
{"sentences": "Can I buy Next.js merch?", "answer": "Mug: https://edge-mug.vercel.app/edge\r\n\r\nSome of the talks had \"sample\" commerce projects with real URLs in them 🙂 "}
{"sentences": ".env.local is not reading any vaule", "answer": "I have figured it out.....just a simple directory problem"}
{"sentences": "from nextjs 13.3.0 to 13.3.1-canary.11 socket.io not working", "answer": "Could you please open an issue with a reproduction, filling out the issue template? Thank you! We will look into this and get it fixed."}
{"sentences": "NextJS 13.3.0 breaks the Socket.io implementation", "answer": "Please follow: https://github.com/vercel/next.js/issues/49334"}
{"sentences": "[app beta] How to show the \"loading.js\" while \"page.js\" fetches?", "answer": "Well i found the fix.\r\nThe bug happens when writing the URL by hand.\r\nApparently it behaves correctly when navigating to the URL with a \"Link\" component. The `loading.tsx` content shows up inmediatly for 5 seconds and then the `page.tsx`."}
{"sentences": "GCP deployment - Module not found: Can't resolve '@public/badge/badge-xxl-execellent.png', for png/svg file", "answer": "There was a recent breaking change in Cloud Functions that probably caused this issue:\r\nhttps://cloud.google.com/functions/docs/release-notes#April_11_2023\r\n"}
{"sentences": "NEXT_PUBLIC_VERCEL_URL for auto deploy on Vercel", "answer": "Now it works. I didn't change anything in my code. Perhaps this is a server error of Vercel itself."}
{"sentences": "How to instantly refetch dynamic data in Next.js 13", "answer": "Solved it with [router.refresh()](https://beta.nextjs.org/docs/data-fetching/mutating)."}
{"sentences": "`assetPrefix` returns 404 for` _next/*` files.", "answer": "I fixed it using redirect/rewrite methods on Nextjs next.config.js. Cheers!"}
{"sentences": "How to use built-in fetch in tests?", "answer": "The moment you run `import next from 'next'` the polyfill is applied."}
{"sentences": "next/image hostname error", "answer": "My bad, just found the answer here: https://github.com/vercel/next.js/blob/canary/examples/image-component/next.config.js"}
{"sentences": "Uploading file through router API for multi tenancy", "answer": "i fixed it\r\nneed add this code to the bottom of the middleware file\r\n\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - api (API routes)\r\n     */\r\n    '/((?!api).*)',\r\n  ],\r\n};"}
{"sentences": "How can I use app dir to perform the same behavior as getServerSideProps?", "answer": "This was due to the cms client library used within Route Handlers.\r\nIt seems that the fetch contained in the client library was cached.\r\nBy executing the restful api directly without using the client library, ```cache: \"no-store\"``` worked."}
{"sentences": "How can I write stream or buffer to client in route in appdir?", "answer": "Do you mean this one? https://beta.nextjs.org/docs/routing/route-handlers#streaming"}
{"sentences": "Prevent a XML file in the public folder from being wrapped in HTML", "answer": "Your problem is the `hasAccessedBefore` cookie."}
{"sentences": "next.js app deployment errror", "answer": "Hi,\r\n\r\nThis error happens if the first argument passed to `request` is undefined. Make sure your:\r\n\r\n```js\r\nconst graphqlAPI = process.env.NEXT_PUBLIC_GRAPHCMS_ENDPOINT;\r\n```\r\n\r\nIs properly defined in the Vercel dashboard for your project."}
{"sentences": "Redirect based on users ip", "answer": "We'll be doing something like this for the incoming built-in [i18n](https://github.com/vercel/next.js/discussions/17078) support.\r\n\r\nFor now, you can create an API route that checks for the IP and redirects based on that"}
{"sentences": "OG tags are not working with dynamic content", "answer": "```useEffect``` is problem in this case.. If I use ```data.review.title```, instad of setting ```data``` to ```state``` and then using it from there, it works. How stupid am I.. damn.. Thank you guys :)"}
{"sentences": "Release in 6-12 months - App or Pages?", "answer": "It's very close! With a timeline of 6-12 months, I would definitely go with `app` rather than `pages`. You can see the features that are already supported in the [App Router Roadmap](https://beta.nextjs.org/docs/app-directory-roadmap). "}
{"sentences": "Where does NextJS store statically generated pages?", "answer": "I think pages are stored inside `./next/server/pages`"}
{"sentences": "load js file from public folder", "answer": "I had an error, I copied the scripts to the wrong folder. you need not in the `.next` folder"}
{"sentences": "cant access dynamically uploaded images without dev or build", "answer": "The `public` folder is only used to store static content, and not dynamic content. That's why when you rebuild the files will be available."}
{"sentences": "Api route can't serve files after upgrading Ubuntu and docker", "answer": "What's the Node version in both?\r\n\r\n## Edit\r\n\r\nThe introduction of native fetch, might lead to problems,  when used to get data, server side, from 3rd parties."}
{"sentences": "How to Redirect in getStaticProps", "answer": "getStaticProps is not a middleware before rendering the page. Is executed on the build step. So I think that is not possible."}
{"sentences": "Next.js does respect revalidate config with i18n features enabled", "answer": "Update:\r\n\r\nRevalidation seems to be working after all. Build logs simply don't show that it is being revalidated. Opening an issue."}
{"sentences": "Timezone is not correct for Asia/Tehran", "answer": "Nodejs updated its timezone database in v16.19.0. Updating NodeJS to newer version should fix the problem.\r\n\r\nhttps://github.com/nodejs/node/blob/main/doc/changelogs/CHANGELOG_V16.md"}
{"sentences": "Nextjs dynamic route page return 403 Forbidden error for only one specific user dynamic route", "answer": "@icyJoseph Upgrading the nextjs package to 12.3.3 did the work. Thanks for your effort. Appreciate it."}
{"sentences": "Params is undefined when hosting on Vercel.", "answer": "making the name of path segment all lowercase fixed the issue."}
{"sentences": "Change body background dynamically in css", "answer": "Use\r\n```jsx\r\n<style jsx global>\r\n  {`\r\n      body {\r\n          background: red;\r\n       }\r\n   `}\r\n</style>\r\n```\r\n\r\nin your `warning/[id].js`"}
{"sentences": "Rendering twice server side infos", "answer": "I think this is the sort of thing React 18 uncovers. This could be many things:\r\n\r\n- Mutating the DOM without clean up\r\n- Invalid DOM nesting\r\n- Divergent HTML between server and client\r\n- Dynamic imports\r\n\r\nCould you share more about the repo?\r\n"}
{"sentences": "Error running nextjs", "answer": "What is your `node.js` version? \r\nYou can find this using `node -v`, or, alternatively, `node --version`.\r\n\r\nThis `??` syntax is not supported in some older Node.js versions."}
{"sentences": "Is it possible to serve __NEXT_DATA__ from a separate file instead of embedding it in the HTML page?", "answer": "No, this is currently not possible. Alternatively, you can fetch the data on the client-side using a library like [SWR](https://swr.vercel.app). "}
{"sentences": "http-proxy-middleware can't handle POST request in next.js", "answer": "I assume it's related to automatic body parsing:\r\n\r\nYou can disable it using the config options outlined here: https://nextjs.org/docs/api-routes/api-middlewares#custom-config\r\n"}
{"sentences": "How to make Next.js page render on Client-side and totally ignore it on Server-side?", "answer": "You can use [`next/dynamic`](https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr) with `ssr: false`:\r\n\r\n```js\r\nconst DynamicComponentWithNoSSR = dynamic(\r\n  () => import('../components/hello3'),\r\n  { ssr: false }\r\n)\r\n```"}
{"sentences": "gRPC in Next.js", "answer": "On the server we do the following before using grpc-web:\r\n```\r\nimport { grpc } from '@improbable-eng/grpc-web'\r\nimport { NodeHttpTransport } from '@improbable-eng/grpc-web-node-http-transport'\r\n\r\ngrpc.setDefaultTransport(NodeHttpTransport())\r\n```"}
{"sentences": "Invalid hook call in getServerSideProps", "answer": "can not use hooks in getServerSideProps, but you can fetch the data and pass it to useQuery hook in your component as initial data.\r\nssr docs for react query:  [https://react-query.tanstack.com/docs/guides/ssr](url)"}
{"sentences": "Jest with Fetch and msw", "answer": "I ended up giving up and using Axios on the backend. If anyone has a solution to just use `fetch` bundled with NextJS, I'm all ears."}
{"sentences": "Why does Next think my route is dynamic?", "answer": "I see, one of the functions I used to load data called `fetch` and somehow that made the whole route dynamic. After I set the `fetch` to `force-cache` the route is static as expected."}
{"sentences": "Potential Vercel.com Google Indexing Issues", "answer": "Our design system is set to not index (intentionally), you'll see this in the HTML:\r\n\r\n```html\r\n<meta name=\"robots\" content=\"noindex\"/>\r\n```\r\n\r\nThanks for checking!"}
{"sentences": "The provided export path doesn't match the page.", "answer": "Where you able to resolve this? Having the same issue."}
{"sentences": "Next 12.x build - performance drop with cold starts", "answer": "This issues has been resolved with Next 13 "}
{"sentences": "Production build not working", "answer": "Fixed"}
{"sentences": "Dialog Routing approach with /app/ dir", "answer": "If the URL doesn't need to change, just open a client side modal as we usually do. "}
{"sentences": "DUPLICATE: Metadata in client side components as of version 13.2", "answer": "Duplicated entry NVM."}
{"sentences": "Is there a hard limit to number of static pages vercel edge network (CDN) can allow?", "answer": "I would contact Vercel support, the next.js discussion is the wrong place, for a question like this. There is no limit in the docs. But who knows."}
{"sentences": "Clean build yields: warn  - You are using a non-standard \"NODE_ENV\" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env", "answer": "Solution: There was a global NODE_ENV environment variable in my system. (Windows 10) I removed it and now `next build` uses `production` instead of `development`."}
{"sentences": "Firebase middleware for authentication", "answer": "Yep, middleware doesn't support Node.js API. See https://nextjs.org/docs/api-reference/edge-runtime"}
{"sentences": "@next/font is not always loading fonts", "answer": "Looks like it was fixed two weeks ago:\r\n\r\nhttps://github.com/vercel/next.js/pull/45430"}
{"sentences": "External links and `typedRoutes: true` – what's the best way to handle them?", "answer": "Why not use a normal a link? I thought the purpose of the Link tag was to do special NextJS stuff, and it can not do it for external links, so why bother?"}
{"sentences": "13.2.x increased latency on page requests", "answer": "https://github.com/vercel/next.js/releases/tag/v13.2.2-canary.1"}
{"sentences": "Prettier integration doesn't seem to work", "answer": "So what's the behavior you expect exactly?\r\n\r\nIf it's formatting, that's [not what `eslint-config-prettier` does](https://github.com/prettier/eslint-config-prettier#eslint-config-prettier). You could run `npx prettier --write pages` for that. "}
{"sentences": "Are database client instances shared between API routes?", "answer": "I found my answer in https://vercel.com/guides/connection-pooling-with-serverless-functions"}
{"sentences": "any way for cache api response?", "answer": "found the way"}
{"sentences": "Fetching data from API endpoint from within the middleware.", "answer": "Could you share some code? Just to avoid making assumptions."}
{"sentences": "Statically exporting a Next.js application via `next export` disables API routes and middleware.", "answer": "It's fixed in next@canary, expect it to be fixed in `13.1.7`, looks like there was some \"oopsie\" between `13.1.5` and `13.1.6`."}
{"sentences": "Failing to deploy on Vercel", "answer": "Please make sure you have the same Node.js version both in your local machine and deployment. Remove all node_modules and lock files (package-lock.json), reinstall everything with `npm install` for example and push again."}
{"sentences": "Deploy failing on Vercel", "answer": "Before going any deeper, could you make sure that locally you also have Node 18, then remove yarn.lock and the package-lock-ignore thing you have, and install everything with either `npm install` or `yarn`, commit the lock file and push."}
{"sentences": "How to get SSR with appdir ?", "answer": "Yeah this means that something failed, while rendering your page failed, or rather an error was thrown. \r\n\r\nDo you have a repository/branch to take a look at?"}
{"sentences": "SWC won't compile dependencies", "answer": "OK, I found the cause of the problem\r\n\r\n```\r\n{\r\n  transpilePackages: ['pixi.js'],  // fail\r\n  transpilePackages: ['@pixi'],   // success\r\n}\r\n```"}
{"sentences": "Error: Unexpected token 'export' when using Jest in NextJS", "answer": "The below config will resolve the issue in `jest.config.js`: \r\nIn customJestConfig object, add the following property: \r\n\r\n```\r\nmoduleNameMapper: {\r\n    '^uuid$': require.resolve('uuid'),\r\n  },\r\n```\r\n"}
{"sentences": "App breaks after migrating to v13", "answer": "For anyone that need an answer, the memory leak was caused by _redux-state-sync._ If you have the same issue, check if you also have a dependency who have some memory leak issues ! 😉 \r\n\r\nI removed it and now it works like a charm !"}
{"sentences": "beforeInteractive Script in import", "answer": "It's safe to use that way, the warning is probably a bug in this case because it's just verifying the filename where it's used, not where the component it's actually is being called. This could be an issue."}
{"sentences": "Tailwind CSS stopped working when I switched to using the `/app` directory", "answer": "after doing some more research, I found that I needed to add `import '../styles/globals.css'` into the RootLayout in `/app/layout.tsx`"}
{"sentences": "[v13] generateMetadata not having any props, am i missing any configuration?", "answer": "[13.1.7-canary.12](https://github.com/vercel/next.js/releases/tag/v13.1.7-canary.12) seems to fix the issue"}
{"sentences": "Static routes don't take precedence over dynamic routes (Nextjs 13.1.5)", "answer": "settings.jsx isn't a page component, I believe you want settings/page.jsx"}
{"sentences": "TypeError: Cannot read properties of undefined (reading 'compat')", "answer": "This was an issue from mui side and they have fixed this in v5.11.9. Please install the new version which works as expected with all NextJS versions. 👍"}
{"sentences": "next/image lazy loading and fade in animation", "answer": "Not at this time.\r\n\r\nWe would like to add a `placeholder` prop to handle these use cases. \r\n\r\nSee https://github.com/vercel/next.js/issues/18858"}
{"sentences": "Next js & Next Auth - \"sign in with the same account you used originally\" while using same provider", "answer": "Found my issue after all...\r\n\r\nIt was a Database issue. Something was in conflict between Account / User.\r\nHas to drop everything in Account / User collections, and now it works fine!\r\n\r\n"}
{"sentences": "cb.apply is not a function", "answer": "I have just solved this issue myself using `npm install -g create-next-app`  before that command.\r\nThanks"}
{"sentences": "How To Fix NODE_ENV value in my environment.", "answer": "That usually happens when you inject your own `process.env.NODE_ENV`.\r\n\r\nAre you doing thing like `NODE_ENV=production next dev` in your `package.json`?"}
{"sentences": "Error updating Next.js to versions above 13.0", "answer": "Did you tried any other next.js 13 versions too? For example ``v13.1.5``, ``v13.1.1``, ``v13.1.0``, etc.?\r\n\r\nMaybe you can find the last working ``v13`` version for you. We can dig further if we find the last working version."}
{"sentences": "e.stopPropagation doesn't work inside nextjs Link component", "answer": "You need `e.preventDefault()`"}
{"sentences": "why does getSession return null on my Ubuntu server?", "answer": "This is not a Next.js-related problem. I answered it here: https://github.com/nextauthjs/next-auth/discussions/6632?sort=old"}
{"sentences": "What is refractor lang package", "answer": "found the problem https://gist.github.com/theskillwithin/cbbbd3e01d5a7d9174e36e0026d8f67d"}
{"sentences": "Next js App Directory Locale and BasePath Change", "answer": "You can set the language chosen on local storage so if the user access the `/` page, you redirect them to that stored locale path"}
{"sentences": "For one page", "answer": "This is probably some content overflow on the X axis. If you add `overflow-x: hidden;` to your body selector it will solve it, but also ideally you want to find what element is causing this and solve it there (edit: like icyJoseph did above)."}
{"sentences": "nextjs server always return string for binary data", "answer": "no issues for me now. seems a misconfig for me. thx anyway, please help delete it. "}
{"sentences": "Fetch to local API endpoint does not fire", "answer": "you need to return the `res.json()` in the `ApiService.ts`\r\n\r\n```diff\r\n  }).then((res) => {\r\n    console.log(\"but this will not...\");\r\n+    return res.json();\r\n  });\r\n```"}
{"sentences": "How to detect a rewrite in getServerSideProps?", "answer": "i would suggest you use the API middleware for this case since you're dealing with SSR"}
{"sentences": "Passing data from localStorage to getServerSideProps", "answer": "If you want to have data available on both the client and server you could use cookies. \r\n\r\nThis [example](https://github.com/vercel/next.js/blob/canary/examples/with-passport/lib/auth-cookies.js) shows how cookies can be created/destroyed/read. "}
{"sentences": "Can't reach to 404 pages automatically when user go invalid url", "answer": "Self Answer : https://github.com/vercel/next.js/issues/45285"}
{"sentences": "Server-side fetch returns a 403 on build", "answer": "Could it be that a user agent or something like that is the cause of the issue? Are you able to debug from your server? I am not sure if the fetch during dev mode includes some data, whereas the production env fetch doesn't? "}
{"sentences": "Implement a way to get data on Head and Page from a single database query", "answer": "You can use `cache` from `react` to create a function that's deduped.\r\n\r\n```js\r\nimport {cache} from \"react\";\r\n\r\nconst getPageInfoFromDatabase = cache(function getPageInfoFromDatabase() {\r\n\r\n});\r\n```"}
{"sentences": "My DX is gone because of `Refreshing page data due to server-side change`", "answer": "It was an issue with one of the early patches of v13. It got fixed in a later version."}
{"sentences": "Nextjs Api routes working in development but failing in production", "answer": "Found the answer. Make sure to add the environment variables on Nextjs! "}
{"sentences": "jsonwebtoken 8.5.1 dependecy -  High-severity Vulnerability", "answer": "https://github.com/vercel/next.js/pull/44748 it has been patched ~ expect it in the next minor release"}
{"sentences": "Are here any ENV for define between build time / SSR / CSR", "answer": "```js\r\nexport const isBrowser = () => typeof window !== 'undefined'\r\nexport const isServer = () => typeof window === 'undefined'\r\nexport const isBuildTime = () => process.env.NEXT_PHASE === 'phase-production-build'\r\n```"}
{"sentences": "Does Vercel support Next.js APIs from an NX monorepo?", "answer": "I solved the problem by redeploying without using the Vercel cache. The caching system appears to have a bug."}
{"sentences": "Prefetch differences between Next 12.1.5 and Next 13.1.0", "answer": "Followed the thread here:\r\nhttps://github.com/vercel/next.js/discussions/44596\r\n\r\nAdded this to my `next.config.js`:\r\n```\r\nexperimental: {\r\n    middlewarePrefetch: 'strict',\r\n},\r\n```"}
{"sentences": "Next.js Blog Dynamic Routes Tutorial - 404 when visiting `/pages/[id]`", "answer": "I forked your repo, ran it and i don't get any 404. Are you sure you are typing the right url?\r\n\r\n![Screenshot 2023-01-18 at 19 20 13](https://user-images.githubusercontent.com/4821190/213262734-fc74f177-0efd-48cc-8e94-1b489ef540f0.png)\r\n\r\n"}
{"sentences": "Setting value of textarea element in Next.js with ioredis", "answer": "Redis is a server-side only library, you can't use it in the same environment as browser interfaces."}
{"sentences": "Not able to read request headers in API middleware.ts", "answer": "issue found: `tsconfig.json` was lacking `dom` in the `compilerOptions.lib` array. probably related to `Request` object / type.\r\n\r\n```\r\n// tsconfig.json\r\n{\r\n  \"compilerOptions\": {\r\n    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\r\n...\r\n```"}
{"sentences": "Error with window.ethereum undefined", "answer": "How did you get this error? Could you post some screenshots? Is it happening on incognito mode as well?"}
{"sentences": "Can I rename a JS chunk for a page?", "answer": "You can rename the page file as, e.g. pages/foo.js, and then add a `rewrites` rule to map it to /analytics."}
{"sentences": "<Link> using map Unhandled Runtime Error", "answer": "Okk problem solved it was because of the version 13.0.7 upgrading it to \"next\": \"^13.1.2\", works fine thanks"}
{"sentences": "What does disableOptimizedLoading do?", "answer": "Hi @jojov92! I checked with the Next.js team, and they said you should not set that config option manually. It is an experimental setting that could be changed or removed at any time and is meant for internal testing."}
{"sentences": "Error handling response: TypeError: Cannot read properties of null (reading '1')", "answer": "Have you tried running in Incognito mode? The logs seem to indicate that the issue is contained within an extension you have installed, called, webspeed (?)"}
{"sentences": "Is it possible to disable the pre-rendering in a specific page?", "answer": "You can opt-out of pre-rendering by using `getInitialProps`. See this issue for more info https://github.com/vercel/next.js/issues/16124"}
{"sentences": "Detected Possible Cross-site Scripting on https://example.com/_next/?%3cscRipt%3enetsparker(0x0000BF)%3c%2fscRipt%3e  types urls", "answer": "Upgrading next js from 11 to 12 resolved this issue.\r\n\r\nThank you."}
{"sentences": "Are user objects really just limited to \"this\" ?", "answer": "Solved by adding the session callback:\r\n```js\r\n    session: async ({ session, token }) => {\r\n      session.user = token.user;\r\n      return session;\r\n}\r\n```"}
{"sentences": "Im not able to replicate getStaticProps flow using next 13", "answer": "See https://beta.nextjs.org/docs/upgrade-guide#replacing-fallback"}
{"sentences": "Enable package.json home page output", "answer": "https://nextjs.org/docs/api-reference/next.config.js/basepath"}
{"sentences": "Pass a stable and random id from Server to Client Component?", "answer": "I think it all depends on the meaning of \"stable\". What do you consider stable in this case?"}
{"sentences": "How to run the middleware only once at the first visit?", "answer": "Perhaps put a cookie on the session? if the cookie is present, skip redirecting."}
{"sentences": "Tag 'amp-story' is not allowed to have any sibling tags ('body' should only have 1 child).", "answer": "this not a bug, checkout example https://github.com/zeit/next.js/tree/canary/examples/amp-story"}
{"sentences": "NextJS/Mongoose/Typescript Issue", "answer": "I think I may have solved it. Some testing to do but error disappeared.\r\n\r\n```\r\nconst User =\r\n\t(models.User as UserModel) || model<IUser, UserModel>('User', userSchema);\r\n\r\nexport default User;\r\n```"}
{"sentences": "Middleware is using import field instead of browser if exports is there", "answer": "The order matters🤦 moving browser before import worked."}
{"sentences": "Hydration error when using <p> inside <div>", "answer": "Hi,\r\n\r\nThe issue is actually nesting a heading tag, such as `h3`, within a `p` tag. Refer to this resource: https://caninclude.glitch.me/caninclude?child=h3&parent=p.\r\n"}
{"sentences": "unable to use simple routing", "answer": "found the error, typo\r\n\r\n"}
{"sentences": "\"type\": \"module\" does not work and raise \"require() of ES Module\" Error", "answer": "That's a visx problem, not a nextjs one."}
{"sentences": "NextJS Docker image is too big", "answer": "See https://github.com/vercel/next.js/discussions/31546#discussioncomment-1896145 "}
{"sentences": "Service firestore not available", "answer": "The error is now actually solved, I was just importing `initializeApp()` in the wrong way."}
{"sentences": "How to use regular regular expressions in middleware", "answer": "```ts\r\nexport const config = {\r\n  matcher: \"/(.*)%(.*)\",\r\n};\r\n```\r\n\r\n? Could you check?"}
{"sentences": "cannot use css transition inside jsx loop (map)", "answer": "I found that I was writing Card components inside export default Notes.js  . When I moved outside of export default and transition working back ."}
{"sentences": "How to do a dropdown button that expands the screen and push other divs down?", "answer": "Ok.. what I want to do is apparently call \"accordion\"..\r\n\r\nI got some code that I can implement from W3Schools...\r\n\r\n"}
{"sentences": "Get cookies in getInitialProps in _app.js", "answer": "If anyone else has this problem, I solved it using the advanced middleware which was released in 13.1. With it you can simply add custom headers to your middleware request which can be used in `getInitialProps`."}
{"sentences": "Error using dynamic import for SSR False, TypeError: item is not a function", "answer": "Is `regraph/analysis` a React component? `next/dynamic` only works for React components. For other JavaScript functions, you can use \"native\" dynamic imports: https://nextjs.org/docs/advanced-features/dynamic-import"}
{"sentences": "Event listeners not working on Nextjs 13", "answer": "Looks good to me, just tested your repo, everything works fine:\r\n\r\n![click](https://user-images.githubusercontent.com/987947/208888667-c8a24786-81e1-44cf-8128-f82314669d7d.gif)\r\n\r\n"}
{"sentences": "Fetching global data from API at build-time?", "answer": "Update: I went with writing a node script that runs before build and downloads the api response to a file, which then gets imported in app.js.\r\nSeems to work well so far, although getStaticProps would be nicer ofc :)"}
{"sentences": "req.cookies is not able to parse cookie when multiple cookies are present", "answer": "Hi @jagyas! `req.cookies` will always contain all cookies passed to that request from the client. There is no way for `req.cookies` to know which cookie in particular you would want to retrieve."}
{"sentences": "Any ideas why the bootstrap carousel doesn't seem to update?", "answer": "Oh... I see it...\r\n\r\nI wasn't using the component for the carousel.... silly...\r\n\r\nAll fixed..\r\n"}
{"sentences": "Nextjs 13 (13.0.6) Fetch Other Route at First Time when \"standalone\" mode", "answer": "In production, Link components are using prefetch props to optimize the pages. It is expected and normal. You can disable this behaviour if it is not suitable for your usecase."}
{"sentences": "Chunk naming", "answer": "Next uses webpack's [`contenthash`](https://webpack.js.org/guides/caching/) for naming the bundles/chunks, therefore this only changes when the content changes."}
{"sentences": "ISR (revalidate) doesn't work with docker image deployment", "answer": "I found the error, it was on some attributes with Apollo client cache and the place where I put the revalidate property.\r\nApologies for inconvenience."}
{"sentences": "Does on-demand ISR immediately trigger a rebuild or on the next load?", "answer": "It builds it when you call `res.revalidate(\"/something\")`, in fact, you can even `await` that call. \r\n"}
{"sentences": "Does old getServerSideProps still available in Next 13v ? How to fetch from Firstore in Next 13 SSR ?", "answer": "You will need to use the Firebase Admin SDK when using it on the server; the web SDK will only work in browsers. As per Next.js, you shouldn't use hooks, that won't work."}
{"sentences": "[Examples] Provide auth example for \"AWS Amplify with NextJS\" sample", "answer": "The requested example is part of a recent write-up on the AWS blog:\r\n\r\n- [Deploy a Next.js 13 app with authentication to AWS Amplify](https://aws.amazon.com/blogs/mobile/deploy-a-next-js-13-app-with-authentication-to-aws-amplify/)"}
{"sentences": "Error occurred prerendering page /posts/.DS_Store when next build", "answer": "Anyway I touched .DS_Store.md and .DS_Store. It works."}
{"sentences": "no such file or directory... Error: Command \"npm install\" exited with 1", "answer": "Missing `.npmrc` for fontawesome and npmjs\r\n\r\n```\r\n# .npmrc file in root\r\n@fortawesome:registry=https://npm.fontawesome.com/\r\n//npm.fontawesome.com/:_authToken=${FONTAWESOME_TOKEN}\r\n//registry.npmjs.org/:_authToken=${NPM_TOKEN}\r\n```"}
{"sentences": "Complex routes with multiply variables", "answer": "Actually, old question, but fixed completely with appDir in next 13 ^^"}
{"sentences": "Deployment Error : No Next.js version could be detected in your project", "answer": "Is your project nested? Like:\r\n\r\n```\r\nmy-project\r\n  - next-js-app\r\n  - some-other-stuff\r\n  - ... etc etc\r\n```\r\n\r\nThen the deploy tool cannot find the project because it is inside next-js-app.\r\n\r\n## Solution\r\n\r\nIt was a multi folder/nested project issue."}
{"sentences": "500 | Internal Server Error after successfully build and deploy", "answer": "How are you getting these errors? Could you describe more about what your site does? \r\n\r\n500 errors are pretty much your server giving up or crashing, so without much context, we'll be here guessing for as long as the sun shines."}
{"sentences": "Getting/Decoding previewData from the client side?", "answer": "It's not possible to read the cookie client-side as that would be insecure."}
{"sentences": "API routes works locally, but not in production", "answer": "I figured out what the issue is, and I wrote about it [here](https://meje.dev/blog/next-directory-returns-error-404-on-netlify). Kindly take a look.\r\n\r\n"}
{"sentences": "NextJs 13 appDir + Standalone results in 404", "answer": "This, `output: \"standalone\"`, is not yet supported: https://github.com/vercel/next.js/issues/42812#issuecomment-1313287665"}
{"sentences": "Is useRouter from next/navigation not supposed to work in async pages?", "answer": "`useRouter` from  `next/navigation` is a client component hook: https://beta.nextjs.org/docs/api-reference/use-router"}
{"sentences": "Image is not loading in certain viewports.", "answer": "Hi, could you share the link to that site? I tried to zoom in but it is just got pixelated."}
{"sentences": "Next.js 13 (app version) background revalidation and caching dynamic segments", "answer": "Have you tried adding [generateStaticParams](https://beta.nextjs.org/docs/api-reference/generate-static-params)?\r\n\r\nSomething like this should work:\r\n```ts\r\nexport async function generateStaticParams() {\r\n  return []\r\n}\r\n```"}
{"sentences": "'as' prop in <Link> missing in Next13?", "answer": "Hey @williamlmao, we're planning to add routing patterns which will replace the behaviour of `as`. \r\n\r\nI've added a note to the docs here:\r\nhttps://beta.nextjs.org/docs/api-reference/components/link#legacy-props"}
{"sentences": "How to correctly use a SQL DB with NextJS (without express)", "answer": "The Next.js + MySQL example has been updated, including a brand new demo 🎉\r\n\r\nCode: https://github.com/vercel/next.js/tree/canary/examples/with-mysql\r\nDemo: https://next-mysql.vercel.app/"}
{"sentences": "Environment variables are not loaded on client side when import them via Dotenv with a custom server", "answer": "The issue was the wrong configuration for webpack in the next.config.js. The sentry config had broken it. I needed to change the config like that:\r\n\r\nhttps://github.com/getsentry/sentry-javascript/issues/6401#issuecomment-1337709421"}
{"sentences": "@next/font/local dont set weight with tailwind", "answer": "."}
{"sentences": "isSerializable does not include Date type", "answer": "`Date` is serialized to a string and then on the client-side would cause a hydration error as `Date` is expected to be a date object in most cases."}
{"sentences": "next/image for dynamically sized images", "answer": "https://github.com/vercel/next.js/blob/canary/examples/image-component/pages/layout-fill.js\r\n\r\nAs seen in the [Image Demo](https://image-component.nextjs.gallery/layout-fill)!"}
{"sentences": "Need some help with Prisma", "answer": "Some how I manage to solve this. I mean it was't code problem. Just remove node_modules and npm cache clean done the job. "}
{"sentences": "Is it possible to disable API routes?", "answer": "If you want to proxy all `/api/...` calls to another backend, you should be able to use rewrites for that: https://github.com/zeit/next.js/issues/9081"}
{"sentences": "Nextjs serverside pages path not working on Vercel production, but working fine on localhost", "answer": "When i inspecting more, it happen because im using handlebars and using path or fs module so, how to import handlebars from vercel folder output when i deploying again?"}
{"sentences": "API route returns favicon.ico", "answer": "Misspelling caused the error"}
{"sentences": "mime type is never set", "answer": "update, turns out i need to clear the browser cache"}
{"sentences": "Using the baseUrl feature in 9.4 breaks my jest tests. Is there a way to get Jest to use the same config?", "answer": "As Next.js does not ship with Jest or a testing setup, you'll have to configure your custom Jest setup:\r\n```json\r\n\"jest\": {\r\n    \"moduleDirectories\": [\"node_modules\", \"src\"],\r\n   ...\r\n}\r\n```"}
{"sentences": "Hydration failed because the initial UI does not match nextjs on chrome browser", "answer": "Do you see the same error if you open Chrome in Incognito mode?"}
{"sentences": "Homepage downloads blank “index” file instead of loading site on NextJS 13", "answer": "Fixed in v13.0.3"}
{"sentences": "Loading custom Script [Iubenda Example]", "answer": "You should put this line `<div dangerouslySetInnerHTML={{ __html: iubendaImplementation }}> </div>` under the `<NextScript />` line."}
{"sentences": "No Firebase App '[DEFAULT]' has been created - call Firebase App.initializeApp() (app/no-app)", "answer": "I am facing the same issue"}
{"sentences": "Font loader error", "answer": "Hi! What version of `next` are you using? Could you try upgrading?"}
{"sentences": "Image artifacts when using sharp optimizer in production", "answer": "Good news! after searching again throught the `sharp` library github, it seems that a few days ago, the issue was [fixed](https://github.com/lovell/sharp/issues/3395) and pushed with version 0.31.2"}
{"sentences": "Any limit on ISR revalidate?", "answer": "I believe the max caching time period is 31 days. https://vercel.com/docs/concepts/edge-network/caching#limits"}
{"sentences": "New example: With Postgres.js", "answer": "Merged! 😎🍻"}
{"sentences": "Next.js suddenly does not work in WSL 2 (can't open localhost in browsers) if I turn on VPN", "answer": "Okay. After further usage, I found out that if I turn on VPN (I use Avast), browser will not be able to open localhost. Weirdly enough, it only affects port that is used by Next.js. Port that is used by create-react-app can be open in browsers."}
{"sentences": "Cannot read properties of undefined (reading 'fs') after use @next/fonts", "answer": "Fix after update next 13.0 -> 13.0.3"}
{"sentences": "next/link doesn't output className", "answer": "Sorry, the issue was with how we were using SCSS Modules"}
{"sentences": "next getServerSideProps Function enhancement help", "answer": "You can use `resolvedUrl` from the getServerSideProps context object:\r\n\r\n```ts\r\nexport const getServerSideProps = (ctx: GetServerSidePropsContext) => {\r\n  ctx.resolvedUrl // this one\r\n  return { props: { foo: \"bar\" } };\r\n};\r\n\r\n```"}
{"sentences": "@next/font + Tailwind docs or example", "answer": "I wrote an article about it: https://alvar.dev/blog/tailwindcss-with-next-font"}
{"sentences": "Web app working well locally but giving me error when deployed on Vercel", "answer": "Local storage items can be null. You need to add a condition check\r\n\r\nhttps://github.com/xOluwaseyi/musica/blob/e6da18c7bd8ce0572fad4b3cb3a973be50f00fb3/context/index.js#L247-L253\r\n"}
{"sentences": "Trouble accessing cookies in middleware", "answer": "Works for me, what `next` version are you using? what happens if you don't invoke `?.value`?\n\n## Edit\n\nOP is using Next 12."}
{"sentences": "Why does my nav bar forwards me to the old address?", "answer": "Don't ask me how it got fixed but now it is working.\r\n\r\nI was updating other links that have nothing to do with the main nav bar, and suddenly the main nav bar started to work fine from every page...\r\n\r\nIts magic.. "}
{"sentences": "Why does usePathName() in a client component cause a page segment to be fully dynamic (instead of static)?", "answer": "Well, 13.0.2 was updated and the `staticGenerationBailout()` call has been removed, so I guess it wasn't needed.  Everything now works as I originally expected."}
{"sentences": "Cannot access database during build time with dynamic pages", "answer": "Further investigating it, I realised that this is a Google Cloud SQL question rather than a Next.js one."}
{"sentences": "Common chunks in serverless page bundles", "answer": "Is it possible to output common chunks between sls page bundles?\r\n\r\nNot as of right now with webpack. splitChunks is not supported for server-side compilation."}
{"sentences": ".", "answer": "Closed\r\n"}
{"sentences": "Way to get route pathname on layout in next13", "answer": "It is not possible to get the pathname in a layout (when a server component).\r\n\r\nSee Tim's reply on the matter in [41745](https://github.com/vercel/next.js/discussions/41745?sort=old#discussioncomment-4008503)"}
{"sentences": "Type-only export not supported?", "answer": "Figured out that the error was reported in an external directory which was not processed by swc because `experimental.externalDir` was not enabled. Setting `experimental.externalDir: true` in `next.config.js` resolved this issue."}
{"sentences": "Use nested SASS classes with css modules", "answer": "Returning to this, nowdays i just use `[class~=dots]`"}
{"sentences": "Static generation for a subset of pages for a route, and dynamic for the rest", "answer": "I found `fallback: true` is the solution for this. https://nextjs.org/docs/api-reference/data-fetching/get-static-paths"}
{"sentences": "Nextjs 13 in app directory, it does not render tailwind css", "answer": "Have you imported the global.css file in the root layout (app/layout.tsx)?\r\n\r\nhttps://beta.nextjs.org/docs/styling/tailwind-css\r\n"}
{"sentences": "Newbie facing hydration issues and trying to fix it", "answer": "Found the issue. Rendering a `div` inside of a `table` was causing the hydration issue."}
{"sentences": "loading.js not rendered on next 13", "answer": "Got it working, feature working as expected but to trigger fallback rendering you must use \"Link\" from next to navigate to other page and I was typing routes directly in browser."}
{"sentences": "How can I disable inline font optimization (obsoleted)?", "answer": "Sorry, this issue is coming from a third-party library stylesheet.\r\nClosing"}
{"sentences": "Middleware fetch /api ECONNREFUSED", "answer": "Seem like any node version greater than v16 is the problem here.\r\n\r\nhttps://github.com/nodejs/node/issues/40702"}
{"sentences": "amp-carousel autoplay and loop aren't working", "answer": "try empty string, `controls=\"\"`"}
{"sentences": "App not building with npm when using jsx prop in style tag", "answer": "It turned out to be an issue with eslint. After some digging, adding this rule in the `eslintrc.json` fixed the issue.\r\n```js\r\n\"rules\": {\r\n  \"react/no-unknown-property\": [\r\n    2,\r\n    { \"ignore\": [\"jsx\"] }\r\n  ]\r\n}\r\n```"}
{"sentences": "What is the ‘use client’ used for？", "answer": "Hello @wh5938316, for the time being the docs are still in beta, you can read here all about Client Components : https://beta.nextjs.org/docs/rendering/server-and-client-components#client-components"}
{"sentences": "Scripts don't have the right CORS headers when deployed to Vercel", "answer": "I think I found the solution / problem! If you remove the `i18n` section from the next config it seems to work fine.\r\n\r\nI created an example repository for it:\r\nhttps://github.com/0xlain/vercel-cors-bug"}
{"sentences": "useState is keeping original value and not updating", "answer": "You can use `useEffect` to reset your state whenever `src` changes:\r\n\r\n```jsx\r\n// in DemoImage\r\nconst [imgSrc, setImgSrc] = useState(src);\r\nuseEffect(() => {\r\n  setImgSrc(src);\r\n}, [src]);\r\n```\r\n\r\nWould this work?"}
{"sentences": "concurrentFeatures CSS Error", "answer": "Seems to be related to context not being supported in server components.\r\n\r\nWorkaround - add this into your `_document.js` around `<Head/>`\r\n\r\n```\r\n<noscript id=\"__next_css__DO_NOT_USE__\" />\r\n```"}
{"sentences": "A way to rate limit SSR?", "answer": "ended up rate limiting api route and hitting that first before pushing to ssr "}
{"sentences": "How to add crossorigin attribute to <link rel=\"preload\" href=\"...\" as=\"image\" />", "answer": "The latest version 12.3.1 has been fixed #40676"}
{"sentences": "Access context values inside of getLayout", "answer": "Would it make more sense to just do this inside my main `<Layout>` component?\r\n\r\n![layout js — microjournal-Thursday-October-13-2022-01 21 05PM@2x](https://user-images.githubusercontent.com/20052710/195664025-4a80b4a6-168e-4d4d-beb6-d75eafd3b6fd.png)\r\n"}
{"sentences": "Is there a way to combine CSR and SSR/SSG for the same app?", "answer": "Yes, you can. \r\nIf you use `getServerSideProps` on a page it will be server-rendered. \r\nThen can use `useSWR` for client-side rendering.\r\n\r\nMore reading here:\r\nhttps://nextjs.org/docs/basic-features/data-fetching#fetching-data-on-the-client-side"}
{"sentences": "npx create-next-app@latest fails with incorrect data check", "answer": "Could you try upgrading `npm`? and node perhaps? Though it worked for me, with your original specs, npm 6, node 14 and macOS 12.6 - Perhaps there was an actual network issue?"}
{"sentences": "Website unresponsive after deploying to vercel 🥲", "answer": "Hi,\r\n\r\nWhat happens if on your machine you do `next build && next start`? for example with npm: `npm run build && npm run start`? Is the site still working as you expect?"}
{"sentences": "Vercel Deployment Serverless function error", "answer": "@cevr Are you using Sentry? I ran into the same issue, this thread helped: https://github.com/vercel/next.js/issues/30601\r\n\r\nAlso, there's a Sentry thread in here, for reference: https://github.com/getsentry/sentry-javascript/issues/4103"}
{"sentences": "Service workers", "answer": "Greetings, \r\n\r\nI found a better plugging:\r\nhttps://github.com/shadowwalker/next-pwa"}
{"sentences": "Negative lookahead for pageExtensions in NextJS Config", "answer": "Could you try with: `pageExtensions: [\"(?<!test.)(js(x?)|ts(x?))\"]`, it uses a negative look behind assertion, which is not fully supported in browser environments, but it is supported in V8 engines, AFAIK. "}
{"sentences": "NextJS Website Breaks On Production But Works Fine On Development", "answer": "So the issue was `swcMinify`. That sounds like, it should be reported as a bug though."}
{"sentences": "how to integrate 'remark-gfm' and other remark/rehype plugins into 'blog-with-comments' template example...", "answer": "I have handled this issue(?) using `next-mdx-remote` although I'm not sure that this approach is right."}
{"sentences": "How do you test structured data / schema markup from localhost?", "answer": "Maybe you could try with https://theboroer.github.io/localtunnel-www/ , https://github.com/localtunnel/localtunnel, hopefully it doesn't cause sequences to be escaped. "}
{"sentences": "next/link: How to prefetch page data (.json)?", "answer": "I have migrated all pages to use `getInitialProps` and [react-query](https://react-query.tanstack.com/). I also have a custom `<LinkPreload>` that is based on `<Link>` and calls the `.preload` method of each page it tries to preload."}
{"sentences": "Unable to install next-app", "answer": "Try these lines \r\n```\r\nnpm init \r\nnpm install create-next-app@latest --save\r\nnpm create-next-app <appname> --use-npm\r\n```"}
{"sentences": "SyntaxError: Failed to construct 'WebSocket': The URL 'undefined/graphql' is invalid.", "answer": "Oh no anyway, this is fix by adding env😁"}
{"sentences": "Next Middleware doesnt work on local SSL server", "answer": "https://github.com/vercel/next.js/discussions/40344"}
{"sentences": "subfolder routing", "answer": "Are you linking to `href=\"product/file1\"`, without an absolute path? If so, you might want to change that to `href=\"/product/file1\"` \r\n\r\nCan you share a snippet of how you are linking between pages? "}
{"sentences": "I can't access nextjs.org", "answer": "Yes, it's likely you were automatically blocked if you tried to automate sending a large number of requests to nextjs.org. \r\n\r\nAre you still blocked?"}
{"sentences": "Normal scripts \"<script>\" not working after page navigation", "answer": "Where and how are you loading the script?"}
{"sentences": "Weird behaviour with dynamic route - initial state doesn't include query", "answer": "Because I don't see how you can sensibly use SWR along side dynamic routes (or certainly I've not come across any docs) and it seems like a pretty obvious use case: https://swr.vercel.app/#overview"}
{"sentences": "Code executed when yarn start is run", "answer": "You can find [all the commands here](https://github.com/vercel/next.js/tree/canary/packages/next/cli), and this is [next start](https://github.com/vercel/next.js/blob/canary/packages/next/cli/next-start.ts)"}
{"sentences": "Dynamic Routes with Next Export (and say - Vercel)", "answer": "After changing the build step to `next build` instead of `next build && next export`, it all works. But... Is this actually serving the site statically? Or now is it running on a server?"}
{"sentences": "Parsing error: Cannot find module 'next/babel'", "answer": "Never mind, issue solved."}
{"sentences": "NextJS environment variables are undefined in the client-side while using `NEXT_PUBLIC_`", "answer": "I solved this issue, by _checking every time before I use an env-variable_ because of the behavior off `process.env` in next,\r\nhttps://nextjs.org/docs/basic-features/environment-variables#exposing-environment-variables-to-the-browser"}
{"sentences": "How to provide a large ‘sitemap.xml’ in vercel", "answer": "Answer here: https://github.com/vercel/community/discussions/826"}
{"sentences": "Shallow Routing on a dynamic page/route", "answer": "Found a solution, I can just use window.history.pushState() instead of using the router"}
{"sentences": "How to provide a large ‘sitemap.xml’ with Next on Vercel", "answer": "Sorry, this is a [duplicated question](https://github.com/vercel/next.js/discussions/40232). Please disregard it."}
{"sentences": "Will v13 drop IE11 support?", "answer": "According to the [RFC](https://github.com/vercel/next.js/discussions/33227) yes."}
{"sentences": "How to use layout rendering menu with data from server side, to help with SEO", "answer": "I founded a solutions here: https://stackoverflow.com/questions/67431077/next-js-footer-header-loading-via-api-only-once-server-side"}
{"sentences": "Questions about source maps...", "answer": "Hi,\r\n\r\nCould you please run your lighthouse analysis in Incognito mode and report back? I think it has ot do with chrome extensions, but I am not 100% sure."}
{"sentences": "Can't access Page Component props (e.g. getLayout) when using a HOC", "answer": "I'm having the exact same problem"}
{"sentences": "Getting ERR_CONTENT_DECODING_FAILED for webpack chunk on IG/FB's in-app browser", "answer": "It turns out it was not Next.js fault.\r\nThere's a domain redirect to my website on another server and it was caching with Gzip by default.\r\n\r\nFirst Time I'm on a discussion on GH, not sure how to close this out.\r\n\r\nThank you guys!!"}
{"sentences": "On-demand ISR with hostname-rewrites not revalidating", "answer": "Hi, middleware is not executed for On-Demand ISR requests so the path passed to `res.revalidate()` needs to be the exact path that should be revalidated e.g. in the above reproduction it should be `res.revalidate('/_site/site-name')`."}
{"sentences": "How to get rid of hydration error on my next js project?", "answer": "you can follow this documentation:\r\nhttps://nextjs.org/docs/messages/react-hydration-error"}
{"sentences": "How to change the scr attribute of <Image /> component on useEffect", "answer": "set up state to track [src] attribute and then update the state [setSrc] whenever a change event (When a user changes the image) happens. React will rerender the component with changes if [ src ] is changed."}
{"sentences": "middleware can't get client's cookies when access directly?", "answer": "This was my misconfiguration.\r\nSolved.\r\n"}
{"sentences": "Testing links", "answer": "You can use https://www.npmjs.com/package/next-router-mock, which makes it work pretty well.\r\n\r\nThat being said, some tests that involve navigation and such, probably should be run in a headless browser, so called E2E. "}
{"sentences": "How to use useIsFocused in Next js or similar way to use it?", "answer": "I think I got using `useRouter()` so nevermind\r\n\r\nconst router = useRouter();\r\n\r\nuseEffect(()=>{\r\n ///\r\n},[router.pathname])"}
{"sentences": "multiple nextjs on same domain", "answer": "After some discussion, we figured a solution together with @always-maap that would not require multiple apps in the first place, and thus also halves the build time:\r\n\r\nhttps://github.com/balazsorban44/nextjs-34616"}
{"sentences": "Enable production logging", "answer": "Dumb issue on my end, nevermind. Sorry. I'd like to delete this. "}
{"sentences": "[next/image] Support for AVIF image format", "answer": "This is available in Next.js 12 https://github.com/vercel/next.js/pull/29683"}
{"sentences": "How to fix hydration error in next js while everything is right.", "answer": "It's a very common issue in next js projects. Follow this link to figure out why it's happenings. \r\n\r\nhttps://nextjs.org/docs/messages/react-hydration-error"}
{"sentences": "After deploying to vercel, Images have been cropped", "answer": "wrong thread"}
{"sentences": "NPM problem installing Next JS App With Termux on Android", "answer": "Oh calm I was able to outsmart it by merging the VPN app, And now I've successfully installed Nextjs App on Android Thanks and running npm run dev."}
{"sentences": "How can I check which version of Next.js I am working with?", "answer": "You can check that in your `package.json`, it will say something like `\"next\": \"latest\"` or `\"next\": \"^12.2.5\"`. You can see the actual version it resolved to in your `package-lock.json` or `yarn.lock`. "}
{"sentences": "Images not loading in NextJS Headless WordPress demo fresh install", "answer": "Did you add the env variable mentioned here? \r\n\r\nhttps://github.com/vercel/next.js/blob/canary/examples/cms-wordpress/next.config.js"}
{"sentences": "\"x-nextjs-cache\" HTTP Header", "answer": "Hi, this is documented here https://nextjs.org/docs/api-reference/data-fetching/get-static-props#revalidate and here https://nextjs.org/docs/api-reference/next/image#caching-behavior"}
{"sentences": "Trying to find with-jest-react-testing-library example", "answer": "All Jest examples were consolidated into a single example:\r\nhttps://github.com/zeit/next.js/tree/canary/examples/with-jest"}
{"sentences": "Cors Error", "answer": "Hey @klausrichard420! It looks like you are making a request to Firebase directly from your page, without going through Next's API routes. I think you need to configure CORS in your Firebase bucket, not in Next."}
{"sentences": "optimize the volume of my Next. Js project", "answer": "Hi, you may want to checkout our Docker example here https://github.com/vercel/next.js/blob/canary/examples/with-docker/README.md which shows leveraging `output: 'standalone'` for minimizing image sizes. "}
{"sentences": "How can I scan a folder to get the number of files in that folder?", "answer": "const files = fs.readdirSync(path.join(\"pages/blog/castellano\"));"}
{"sentences": "Using text files as database", "answer": "Yes that is possible. To make this work you have to use fs inside GetStaticProps.\r\n\r\nThis [example](https://github.com/vercel/next.js/tree/canary/examples/blog-starter) should be kind of what you want."}
{"sentences": "Property 'getInitialProps' does not exist on type 'FC<ItemProps>'.ts(2339)", "answer": "[The docs mention this](https://nextjs.org/docs/api-reference/data-fetching/getInitialProps#typescript), which should always be your first stop."}
{"sentences": "How to build a knowledge base webapp similar to https://nextjs.org/docs", "answer": "I actually found https://github.com/shuding/nextra , and the version 1 use algolia, but version 2 use flexsearch ♥"}
{"sentences": "Updating static page with redux state from localStorage (getStaticProps / getStaticPaths)", "answer": "You can't use localstorage on getServerSideProps or getStaticPaths as it runs in the server and does not have access to the window object like in the browser. \n\nI will suggest you use useEffect hook to get data from local storage \n"}
{"sentences": "Accessing publicRuntimeConfig in a custom Next.js server?", "answer": "Never mind, I solved it. The environmental variable must still value the NEXT_PUBLIC_X rule even if passed in via a custom server."}
{"sentences": "My Cookie doesn't set when deployed on heroku with Apollo GraphQL and NextJS", "answer": "Solved in backend not in Apollo Client also frontend😍"}
{"sentences": "Production - Cache instruction not applied", "answer": "Make sure your proxy is not overriding the cache-control headers."}
{"sentences": "Sentry v7 breaking entire js system in Next.js", "answer": "See https://github.com/getsentry/sentry-javascript/issues/5452 for further discussion and https://github.com/getsentry/sentry-javascript/pull/5472 for a fix."}
{"sentences": "Contradictory warnings: @next/next/no-before-interactive-script-outside-document and @next/next/no-script-in-document", "answer": "OK - so it looks like the second warning is outdated. I missed this on the [page](https://nextjs.org/docs/messages/no-script-in-document-page):\r\n\r\n```\r\nThis error is not relevant in Next.js versions 12.1.6 or later.\r\n```\r\n"}
{"sentences": "Remove .html on next config redirects", "answer": "Found out it is possible with regex and do it like this: \r\n```\r\n{\r\n    source: '/en/news/:year/:month/:day/:slug*\\\\.html\\\\',\r\n    destination: `/en/news/:year-:month-:day-:slug*`,\r\n    locale: false,\r\n    permanent: true,\r\n}"}
{"sentences": "ENV Variables not working", "answer": "I've found the problem my MONGODB_URI had a special caracter and I had to use \\ to escape it, anyways i'm glad it works now lmao"}
{"sentences": "Should I use getInitialProps or getServerSideProps", "answer": "Recently, I rewrote my blog frontend project with `Next.js`, I use `getStaticProps` in post list and `getServerSideProps ` in post detail page.\r\n\r\nYou can actually try both and choose the one u think is perfect.  😊"}
{"sentences": "Add env variable to make next/image unoptimised", "answer": "You should be able to set this in your `next.config.js` that delegates to all of your images. Please see https://nextjs.org/docs/api-reference/next/image#unoptimized"}
{"sentences": "On-demand revalidate with middleware rewriting", "answer": "Hi, middleware is not run for On-Demand ISR requests so you need to call `res.revalidate()` with the actual page path e.g. `pages/blog/[slug].js` you should call `res.revalidate('/blog/post-1')`."}
{"sentences": "Is a leaderboard a good usecase for Incremental Static Regeneration?", "answer": "Sounds good to me. You could even trigger revalidation upon certain events, like a new leader so that it is shown ASAP. \r\n\r\n"}
{"sentences": "Runtime basepath", "answer": "Actually please close this, looks like https://github.com/vercel/next.js/discussions/16059 is close enough - if unsatisfying...\r\n\r\n(I missed the right search term)"}
{"sentences": "Next Learn Create Nextjs Blog App", "answer": "Hello,  I ran this example, you can replace this place in the picture with the image you want related to your blog.\r\n\r\n![image](https://user-images.githubusercontent.com/53572196/179475158-69ffd0c7-021c-4c25-8085-e3afb2567d9b.png)\r\n"}
{"sentences": "_document 'link' element doesn't work in production.", "answer": "OP, I recently learned that in next@12.1.6, pages with GetServerSideProps do not load fonts, it was a bug! It has been fixed in next@12.2.x, see https://github.com/vercel/next.js/issues/35835 for reference."}
{"sentences": "Got Unexpected token '.' on Cpanel hosting", "answer": "What Node.js version is CPanel running? Feels like it doesn't understand `?.` syntax, which is available after Node.js 14. I think CPanel supports Node 16, but perhaps you have to tell it which version to use."}
{"sentences": "Meta tags not in _document.js not working", "answer": "In your _app.js setup the only thing the only HTML that will get SSR'd is the splash screen. Your meta tags won't show up until setAppLoading is true. You'll need to refactor this to allow the page, or at least meta elements, to be available immediately."}
{"sentences": "GET /_next/image randomly start returning HTTP 500  on Azure App Service static website", "answer": "We updated NextJS to the last version and it solved the issue."}
{"sentences": "How can I reach a component to import to a page?", "answer": "This worked.... don't know why... but it did..\r\n`\r\n../../../components/bog1component`"}
{"sentences": "Next Js direct loading causes 403 forbidden", "answer": "Solved with\r\nmodule.exports = {\r\n  trailingSlash: true,\r\n};\r\n"}
{"sentences": "NextJS converts / to %2F during build", "answer": "duplicate issue? https://github.com/vercel/next.js/discussions/38635?"}
{"sentences": "SWC config in Next.js 12", "answer": "`.swcrc` is not supported at the moment"}
{"sentences": "[TypeError]: The NextURL configuration includes no locale", "answer": "Hi,\r\n\r\nIs the site still down? or showing the issue? I can see gabutnetwork.net fine on my end.\r\n\r\nI guess one problem could be that the `next.config.js` is missing from the deployment. IIRC, it has to follow along with the rest of the build."}
{"sentences": "Deprecated `request.page` in middleware", "answer": "I've found a solution\r\n```ts\r\nimport { getRouteRegex } from 'next/dist/shared/lib/router/utils/route-regex'\r\n\r\nconst route = getRouteRegex('/page/posts/[pid]/[comment]')\r\n\r\nif (route.re.test('/page/posts/123/789')) {\r\n  // matching route...\r\n}\r\n```"}
{"sentences": "experimental.appDir purpose?", "answer": "It's the work in progress flag for the new router which is part of https://nextjs.org/blog/layouts-rfc. Please don't use it yet as it's experimental and things will change/break."}
{"sentences": "Middleware", "answer": "Could you, remove node_modules, and `.next`, and then run `npm install next@12.2.0 --save-exact` or `yarn add next@12.2.0 --exact`? I suspect you have the old middleware there."}
{"sentences": "All next/image components fail to load the src due to a 404", "answer": "Hi,\r\n\r\nHas the URL in the images changed? Between 12.1.0 and 12.2.0, that is. I can only think that perhaps the `cloudinary` loader has started to resolve the URLs' differently.\r\n\r\nI mean the URL that Next.js resolves to, not the underlying asset URL."}
{"sentences": "Would anybody be so awesome to tell me how to target this file?", "answer": "Hi,\r\n\r\n`../../utils/parts-parker` should work right? Goes up once to invent, then once again to `pages(?)` and from there down to `utils`,  and there it finds the `JSON` file.\r\n\r\n"}
{"sentences": "On-demand ISR revalidate not work with hostname-rewrite", "answer": "This seems to be a duplicate of https://github.com/vercel/next.js/discussions/38377#discussioncomment-3093729"}
{"sentences": "Can't access ENV vars defined in .env.test", "answer": "Update: https://github.com/vercel/next.js/pull/38359"}
{"sentences": "Issue with next/jest", "answer": "This could be a just a hunch but maybe you need to use `.env.test.local` for it to be loaded properly "}
{"sentences": "What is the folder `.swc` generated in Next.js 12.2", "answer": "This should be resolved via https://github.com/vercel/next.js/pull/38175 . "}
{"sentences": "next/image is not honoring the `maxAge` set by upstream images", "answer": "I think this has been fixed by https://github.com/vercel/next.js/pull/37625:\r\n\r\nhttps://github.com/vercel/next.js/blame/42ee877e718753a80bec9f220aadf70c217a8745/packages/next/server/image-optimizer.ts#L576\r\n\r\nHave you tried with version 12.2.0?"}
{"sentences": "how i can convert this code to  `export default function`", "answer": "Replace \"export const Navbar = () => {\" with \"export default function Navbar() {\"\n\nBut this would change nothing in the behavior of the code."}
{"sentences": "How to redirect to an external domain through `res.redirect()` from an API route", "answer": "Coming back to this just in case if someone else gets here through Google, the answer was `res.redirect(307, '/path-to-redirect');`"}
{"sentences": "next/image serves image with low resolution per Lighthouse-Best Practices", "answer": "It looks like you're on Next.js 10.0.0, can you please upgrade to 10.0.1+ and remove your `sizes` prop?"}
{"sentences": "Any ideas of why the radio buttons don't set the initial value when sending a form?", "answer": "this works... "}
{"sentences": "Failed to load resource: the server responded with a status of 500 (Internal Server Error)", "answer": "Quick fix...\r\n\r\nput the `router.replace(\"/thankyou\");`  before the fetch...    NOT pretty but works. "}
{"sentences": "Would anybody have any experience sending a contact form to smtp office 365?", "answer": "Oh....\r\n\r\ndon't do a process.env.EMAIL  during the mailData function....   it is sending emails now.... but they are blanked... working on it next."}
{"sentences": "Infinite loop inside middleware", "answer": "You are still redirecting to /profile, so the middleware will go through your if statement and redirect again. If you want this to work your if condition needs to check for query params"}
{"sentences": "Redirecting with Middleware, removing query params", "answer": "Answer is in the post above ✅ "}
{"sentences": "Apply some settings in next.config.js to production build only", "answer": "Hi. It's not a json config, it's a js module. So you can use any expressions in next.config.js. Like:\r\n```\r\n// next.config.js\r\nmodule.exports = {\r\n  compiler: {\r\n    removeConsole: process.env.NODE_ENV === 'production',\r\n  },\r\n}\r\n```"}
{"sentences": "Is there a Vercel discussion section elsewhere? .. I got a hosting question...", "answer": "Ok... apparently I do have build errors... "}
{"sentences": "Shamelessly asking for syntax advice... for href Link using props..", "answer": "Could you share a link to this repository? it works for me... I'd recommend to not use `./`, just use `/` - It works swell for me...\r\n\r\nWhat's exactly not working? You want to reach the path relatively? "}
{"sentences": "Script Components insert multiple script tags.", "answer": "> The id property is required for inline scripts in order for Next.js to track and optimize the script.\r\n\r\nPlace an `id` on the script. For more information please refer to the docs, https://nextjs.org/docs/basic-features/script#inline-scripts."}
{"sentences": "How can I create a meta tag template component?", "answer": "I am often the person that is always against installing new packages, but for this use case I'd highly recommend, https://www.npmjs.com/package/next-seo, which can handle all of these."}
{"sentences": "AssetPrefix is ignored when page having getServersideProps is loaded", "answer": "I found the solution. I have run `next build` inside Docker.  And inside Dockerfile, I am using multi-stage docker build stage. However I am passing assetPrefix ENV to build stage not to runner stage"}
{"sentences": "Rewrites/Redirects not working after deploying using gh-pages", "answer": "It seems Nextjs export doesn't support redirects/rewrites. https://nextjs.org/docs/advanced-features/static-html-export"}
{"sentences": "Reduce the impact of third-party code - Next js", "answer": "I'd recommend reading through these docs: https://nextjs.org/docs/going-to-production\r\n\r\nIn this instance, you can improve performance using `next/script`: https://nextjs.org/docs/basic-features/script"}
{"sentences": "Faunadb example update", "answer": "Hey! If you'd like to open a PR to update the example, that would be amazing 😄 \r\n\r\nhttps://github.com/vercel/next.js/blob/canary/contributing.md"}
{"sentences": "is it intentionally NextResponse.rewrite  of middleware not invoke the other nested middlewares?", "answer": "Got It!\r\n\r\n\r\nI will check out this theory, because it seams to be the expected behaviour.\r\n\r\nThank you!  @thibautsabot ."}
{"sentences": "How to do an action on a post request for a form... ?", "answer": "Oh... I think it is working fine...\r\n\r\nApparently its taking its time for the activation of the form.."}
{"sentences": "Server Error ReferenceError: window is not defined", "answer": "I managed to resolve it. Just dynamically import the component into the index page."}
{"sentences": "On-Demand Revalidation for new content", "answer": "Ok so I figured out my error, I was trying to revalidate a \"new\" page, but that's actually not necessary. Instead I needed to set my `getStaticPaths()` fallback to 'blocking' instead of `false`. Hope this will help someone else learning about next.js!"}
{"sentences": "erros during npm run start..", "answer": "`npm run dev` runs the project in development mode, `npm run build` builds a production version, both of these commands use the `.next folder. `next start` only works when used directly after `npm run build`."}
{"sentences": "Unable to convert example of `useSwr` hook to use `react-query`'s `useMutation` hook?", "answer": "Found the answer → https://stackoverflow.com/a/72507830/6141587"}
{"sentences": "running tests: yarn not installed causes test error", "answer": "Yeah I think this is all coming in over the past 10 days, if not less.  https://github.com/vercel/next.js/pull/37259, there'll be many places where things ought to be updated. "}
{"sentences": "Page data not updating when using router.push(\"/route\")", "answer": "When you do router.push, in the devTools, can you see the  source of the request? if it's from the service worker it'd say so, and that would explain why the data is stale. "}
{"sentences": "Difference between yarn and pnpm for developing with local version of Next.js", "answer": "Hi, seems this occurrence of `yarn` just didn't get updated yet, opened PR updating this here https://github.com/vercel/next.js/pull/37370"}
{"sentences": "error - ./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[2].oneOf[8].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[2].oneOf[8].use[2]!./src/styles/index.css Error: Unexpected '/'. Escaping special characters with \\ may help.", "answer": "i was stupid enough to use `//` as a comment in css rather than `/* */` & also needed to use `tailwindcss/nesting` & remove `postcss-nested` but got it working :)"}
{"sentences": "Rewrite to external URL with subdomain redirects url", "answer": "turns out my problem was a missing trailing slash on my destinations which my blog site (wordpress) was redirecting :+1: "}
{"sentences": "getServersideProps first page load only", "answer": "there's no built-in way of doing that, much to community's dismay. related RFC: https://github.com/vercel/next.js/discussions/29117"}
{"sentences": "I cannot access response data if i send any statusCode other than 200", "answer": "Hi,\r\n\r\nIn one of our applications, except for 3xx, family of codes, 2xx, 4xx and 5xx, use json and we can certainly decode it. Are you perhaps using `axios` client side, or some other kind of fetch client?"}
{"sentences": "ISR on demand how to avoid multiple calls to API in getStaticPaths during revalidation", "answer": "Sorry my bad I was running code in development mode and that is why `getStaticPaths` and `getStaticProps` were triggered with every request"}
{"sentences": "How to fetch more than 20 posts? I'm using Prismic GraphQL API", "answer": "Hey! Welcome to Next.js 😄 Happy to help out. \r\n\r\nOne small Markdown tip: you can use three ` to denote a code block. (```)\r\n\r\nIs `first:24` limiting your GraphQL query to the first 24 results? Try increasing that 👍 "}
{"sentences": "__dirname pointing to `/` (during dev)", "answer": "What does `process.cwd()` point to?\r\n\r\nI remember [seeing some docs](https://nextjs.org/docs/basic-features/data-fetching#reading-files-use-processcwd) about this (related to `getStaticProps` at least)"}
{"sentences": "Runtime configs in nextjs", "answer": "Actually, my needs are the same as #17641 . \r\nI found this topic recently. I ended up using this approach to achieve my needs: https://raphaelpralat.medium.com/system-environment-variables-in-next-js-with-docker-1f0754e04cde "}
{"sentences": "Build fails, can't resolve 'fs', and then property of 'then' of undefined", "answer": "It turned out to be the way I was referencing the env variables.  I found the correct way using `next.config.js`.  It's building properly now, sorry for the false alarm, closing this."}
{"sentences": "Couldn't load texture with Three.js", "answer": "The solution was to remove ambientation from the canvas\r\nThe ambient somehow break the lights.\r\nJust switch from ambient to light (dot and ambient light)"}
{"sentences": "Passing props to Layout", "answer": "I solved my issue today. Will maybe make a repo with the solution in a few days from now."}
{"sentences": "Jquery with next js", "answer": "Hi,\r\n\r\nDo you have more code to look at? Possibly a repository?\r\n\r\n\r\nI wonder if your script is running before there's a `.sidebarCollapse`. Assuming it is not present in the initial HTML. \r\n\r\nMore context is needed to help you out.\r\n\r\n"}
{"sentences": "create-next-app --example on GitHub Enterprise", "answer": "Hello!\r\n\r\nI'm afraid create-next-app will only work for public github URLs.\r\n\r\nYou could either:\r\n- Migrate your example to the public domain\r\n- Ask you user to clone the repository themselves\r\n- Create your own tool to download and extract the archive."}
{"sentences": "TypeScript: Cannot find module '@graphql-types@' in 'with-typescript-graphql'-example", "answer": "Never mind, I just found out that these are generated by graphl-let and typescript didn't find them because I upgraded from Node 14 to 16 meanwhile"}
{"sentences": "Source code for next.js/commerce", "answer": "Hello!\r\n\r\nYou can find the code for the commerce demo here: https://github.com/vercel/commerce.\r\n\r\nThe landing page itself is not open source though.\r\n\r\nFor the scroll animation on the image, it's a `translate3d` with a rotation and a scaling change."}
{"sentences": "zsh: killed     npx next dev", "answer": "Restarted my mac and it automatically worked."}
{"sentences": "node:events:368 - unhandled error - M1 Max MacBook", "answer": "It seems that moving to the very latest release of Node 17 solved my issue."}
{"sentences": "Inline script to inject in head tag but built with webpack", "answer": "I ended up founding a solution in a webpack thread\r\nhttps://github.com/webpack/webpack/discussions/14950 and https://github.com/webpack/webpack/discussions/14956"}
{"sentences": "Run next js Laning page and view its source code", "answer": "Hello!\r\n\r\nThe code for the landing page and the learning docs are not public.\r\nThe next.js repo contains the Next.js framework related code (what developers get from npm)."}
{"sentences": "Can I use a custom --example application?", "answer": "Hello!\r\n\r\nYou should be able to simply do:\r\n```npx create-next-app --example=https://github.com/Vanals/nextjs-template-playground```"}
{"sentences": "Module not found: Can't resolve 'fs'  even using in getStaticPaths and getStaticProps", "answer": "Solved. You can't import anything from anywhere that have fs imported if you aren't gonna use it in getStaticProps or the error will occur. \r\nIn my case **getVideoDownloadLink** is imported but not being used and causes the problem."}
{"sentences": "Huge file size differences between production server and static html export", "answer": "You probably forgot to configure gzip which `next start` handles by default."}
{"sentences": "Can Nextjs on-demand revalidation work with aws or any other provider instead of vercel?", "answer": "On-demand revalidation is not specific to Vercel. It's supported for `next start` as are all other Next.js features."}
{"sentences": "Why does on demand ISR only works when passing a specific route to res.unstable_revalidate?", "answer": "Hello!\r\n\r\n`res.unstable_revalidate('/')` is just an exemple and will only revalidate the Home page, not the whole application.\r\nYou have to pass a specific page for it to be revalidated, you cannot re-generate everything at once."}
{"sentences": "How can i load sass variable from JSON ?", "answer": "@susanta96 check this discussion: https://github.com/vercel/next.js/discussions/19672\r\n"}
{"sentences": "Next Build giving error", "answer": "Hello!\r\n\r\nHow are you calling your `Dashboard` component?\r\nAccording to the error, the `user` object is null."}
{"sentences": "`ReferenceError: performance is not defined` when deploying to Vercel", "answer": "Found [a quick hack](https://github.com/TanStack/react-table/issues/3830#issuecomment-1101012448) to get around this for now."}
{"sentences": "Unable to deploy next.js site with absolute imports using jsconfig.json", "answer": "I've finally resolved this issue. \r\nThe problem is due to my windows machine where I had renamed a file from lowercase to uppercase. \r\nWindows doesn't take this into account so this change of case did not propagate to the Github repo.\r\n"}
{"sentences": "Not able to change request URL", "answer": "Hey @derFBeste!\r\n\r\nCould you please provide a link to your repository or at least the code of your `next.config.js` file and the content of the file where you are doing your fetch.\r\n\r\nThank you."}
{"sentences": "To use middleware you must provide a hostname and port to the Next.js Server", "answer": "See Custom Server docs https://nextjs.org/docs/advanced-features/custom-server\r\n\r\n```js\r\nconst hostname = 'localhost'\r\nconst port = 3000\r\n// when using middleware `hostname` and `port` must be provided below\r\nconst app = next({ dev, hostname, port })\r\n```"}
{"sentences": "How to setup React Testing library with NextJS project that uses ContextProvider?", "answer": "Have you tried adding `modulePaths` to `jest.config.js` - assuming that the code is in `src`\r\n\r\n```js\r\nmodulePaths: ['src'],\r\n```\r\n\r\notherwise:\r\n\r\n```js\r\nmodulePaths: ['./'],\r\n```"}
{"sentences": "@types/react cannot be installed or recognized with installing command.", "answer": "Hey!\r\n\r\nIt looks like it has been fixed by https://github.com/vercel/next.js/pull/36082\r\n\r\nIt's available on the [v12.1.5](https://github.com/vercel/next.js/releases/tag/v12.1.5)"}
{"sentences": "No posts show after following the Vercel Contentful example guide", "answer": "Restarting completely from scratch fixed the issue, so marking this answered."}
{"sentences": "When a 404 is returned during data fetching, Next.js renders a 404 page", "answer": "Solved"}
{"sentences": "Think there's a typo in a tutorial question.", "answer": "Hello!\r\n\r\nIndeed it looks like a typo..\r\nUnfortunately the code for the tutorial is private.\r\n\r\nPinging @leerob for visibility 🙂.\r\n\r\n"}
{"sentences": "React 18", "answer": "Hi, you can use Next.js with React 18 already!\r\n\r\nPlease refer to the docs: https://nextjs.org/docs/advanced-features/react-18#react-18-usage-in-nextjs"}
{"sentences": "ReferenceError: Response is not defined (trying to upgrade from NextJS 11 to 12)", "answer": "Just a note, this was solved by updating to the latest canary build (12.0.8-canary.20)"}
{"sentences": "next@18 and hot reload not work", "answer": "Hello.\r\n\r\nYou need to install Next.js v[12.1.3](https://github.com/vercel/next.js/releases/tag/v12.1.3) or above.\r\nA fix has been included in this version."}
{"sentences": "I am trying to use Bot-Aware ISR Fallback, but it seems not to work", "answer": "**Update:** I have tried it once more, but more thoroughly, and found out that the feature only works with Vercel, at least for now. The other service I tried is AWS Amplify which did not support the feature"}
{"sentences": "How to import 3rd party css dynamically", "answer": "We solved it with latest Canary release of NextJS + in components side we bundled the JS with CSS via webpack. \r\n\r\nThis is because we control those 3rd party components outside Next. "}
{"sentences": "How can I make global logging in to a user for the whole app, the problem is discussed below in detail", "answer": "closed"}
{"sentences": "Invalid time value", "answer": "Hi @gokaygurcan. Assuming you are using `date-fns`, that error occurs when your `date` is not a valid date. If you `console.log(date)` you'll likely see that it is invalid. That usually means the `dateString` is not valid to be used inside `parseISO`"}
{"sentences": "getServerSideProps ECONNREFUSED when in docker", "answer": "Thank you for your help. The issue was you can couldn't call docker host machine on a bridged network"}
{"sentences": "How to pass params to remark(or rehype) plugins?", "answer": "Try `remarkPlugins: [remarkFrontmatter, [remarkToc, {heading: 'contents'}], remarkGfm]`"}
{"sentences": "Self hosted font flashes", "answer": "This has fixed the issue for me for now - https://stackoverflow.com/a/70920009/2529106"}
{"sentences": "Can i make dynamic page with prefix?", "answer": "Why does the page name need to be prefixed with `@`? If you have a page `[username].tsx` and then have your url `localhost:3000/@foo` then `router.query` is `@foo`.\r\n\r\n"}
{"sentences": ".next build folder exceeds 100MB with 0 assets", "answer": "Answer just [above](https://github.com/vercel/next.js/discussions/35727#discussioncomment-2471634) if anyone face the same issue."}
{"sentences": "Pull request best practices regarding canary branch rebasing", "answer": "Hello!\r\n\r\nUnless you have conflict with newer files, you don't have to always keep your branch up-to-date manually.\r\n`kodiak` will update the branch automatically if needed."}
{"sentences": "Getting a lot of Timeout Errors on Vercel", "answer": "I think it was due to an older version of web pack; I removed it and that seems to have helped."}
{"sentences": "Updated eslint-config-next 12.1.1 breaks eslint config (import)", "answer": "https://github.com/vercel/next.js/issues/35606"}
{"sentences": "npm export not generating html files", "answer": "The error was some imported next libraries. Not clear that it was messing with everything. So nevermind this. Delete it if you want"}
{"sentences": "Cacheing common packages", "answer": "Interesting, do you have a repository to take a look? On my site, the `_app` and `_main` bundles are properly cached for 1 year. Do you maybe have `getInitialProps` on `_app` or something like that? Still strange."}
{"sentences": "getInitialProps works in _app.tsx but getServerSideProps doesn't", "answer": "The new data-fetching methods are only available in pages, for a custom App you can only use `getInitialProps`. "}
{"sentences": "Proxy api requests w/o a custom server", "answer": "You can use [custom routes](https://github.com/vercel/next.js/discussions/9081) for this:\r\n```js\r\nrewrites: () => [\r\n  { source: '/api/proxy/:path*', destination: 'http://localhost:5000/:path*' }\r\n]\r\n```"}
{"sentences": "Jest Tests fails after upgrading to 9.3, cannot find interopRequireDefault", "answer": "You will probably want to run this:\r\n\r\n```\r\njest --clearCache\r\n```\r\n\r\nJest caches transforms aggressively and we updated the next/babel preset a bit (to reduce bundle size)."}
{"sentences": "next-swc's mysterious shakeExports option", "answer": "It is used internally by Next.js live. There are no plans to make it public at this point in time. It would be interesting to hear your use case though.  "}
{"sentences": "Need help with deploying nextjs on firebase cloud functions", "answer": "I was able to solve this, check the commit in my repo for fix."}
{"sentences": "on demand ISR does not support custom server with https", "answer": "This actually started working for me with the latest next canary release (`^12.1.1-canary.15` in my case). Seems to be related to PR https://github.com/vercel/next.js/pull/35386."}
{"sentences": "yarn create next-app returns error, but create react-app works just fine", "answer": "have you tried to create the app in another folder? Try to create in some place inside the `C:\\`, seems the sentence \"Estevão Urbano\" is generating an error on console"}
{"sentences": "Place third-party scripts inside a <div>", "answer": "Using React's `dangerouslySetInnerHTML` works!\r\n\r\n```jsx\r\n <div id=\"script\" dangerouslySetInnerHTML={{ __html: `<script src=\"...\"></script>` }} />\r\n```"}
{"sentences": "Error using type module in package.json", "answer": "Hello.\r\n\r\nWhat is the error?\r\nFor a better chance of people finding out the issue, could you provide a link to your repository?"}
{"sentences": "where is v12.1.1-canary.11", "answer": "Hello!\r\n\r\nThere might have been an issue with publishing the version (also happened with 12.1.1-canary.12).\r\n\r\n[12.1.1-canary.13](https://www.npmjs.com/package/next/v/12.1.1-canary.13) is now available though 🙂.\r\n"}
{"sentences": "next/image unoptimized auto fallback to jpg", "answer": "This has been fixed in https://github.com/vercel/next.js/pull/35190\r\n\r\nPlease give it a try with `npm i next@canary` or `yarn add next@canary`, thanks!"}
{"sentences": "does `url` in `NextRequest` always return a fully qualified URL in Middleware?", "answer": "Yes! Next.JS Middleware works always with absolute URLs so you will always get a fully qualified URL. This is true for both production and development and for Vercel."}
{"sentences": "Scheduled regeneration of static pages", "answer": "Hello.\r\n\r\nIf you want to regenerate all of your static pages, why don't you just trigger a new build of the whole application at night? 😄 \r\n\r\nIf it's only a subset of pages, then yes, executing `unstable_revalidate` periodically could make sense."}
{"sentences": "Why my remotes images sometime is JPG? I configured AVIF or WEBP", "answer": "You can see the Size column says \"disk cache\" so this means it was served from the browsers cache on disk, not the server. Try a hard refresh or clear your browser cache."}
{"sentences": "Issue with data from getinitialprops in _app.js 'TypeError: cannot read properties of undefined'", "answer": "It turns out this was a caching issue, all sorted now!"}
{"sentences": "Problem with redirect code", "answer": "Finally I found this, that will respond to my problem\r\nhttps://nextjs.org/docs/api-routes/response-helpers#setting-the-status-code-of-a-response"}
{"sentences": "Switch from npm to yarn", "answer": "Various changes were necessary, not sure which was the fix in the end."}
{"sentences": "Google Analytics and Web Vitals", "answer": "You should use `window.gtag`, if you followed the example."}
{"sentences": "Safe to host multiple next.js handlers in custom server?", "answer": "Per Tim, this is fine to do, but perhaps under tested"}
{"sentences": "How to use build profiling", "answer": "per Tim, this next.js 12 interface, enabled by default, and docs are still TBD"}
{"sentences": "Dont commit public folder bcz it gets regenerated so causes big diff in git but specify favicon.ico in Next.js?", "answer": "Hi,\r\n\r\nThis is not necessarily Next.js related, but I think you could tweak your `.gitignore` file to:\r\n\r\n```\r\n/public/*\r\n!/public/favicon.ico\r\n```"}
{"sentences": "NextJS webpack config - Exclude files from being compiled", "answer": "Found a solution https://stackoverflow.com/questions/71304663/nextjs-webpack-config-exclude-files-from-being-compiled/71318238#71318238"}
{"sentences": "TypeError: Cannot read property 'map' of undefined", "answer": "Change `<SectionServices {...services} />` to `<SectionServices services={services} />` in pages/index.tsx\r\n\r\n"}
{"sentences": "Invalid hook call without hooks", "answer": "I have fixed it!\r\n\r\nI don't really understand what was causing the problem but full reinstall using `apt-get` of npm and nodejs fixed the issue for me!"}
{"sentences": "How to get ?xx= URL parameters in getServerSideProps", "answer": "```js\r\nexport async function getServerSideProps({ query }) {\r\n  const category = query.category\r\n  ...\r\n}\r\n```\r\n\r\nYou can grab the query string via `context.query`"}
{"sentences": "Phase detection for Playwright tests", "answer": "In playwright webServer config, you can set environment variables there. Use this env var in next.config.js to disable `devIndicators`."}
{"sentences": "images are blurred in dev env", "answer": "i just set a custom loader instead of using cloudinary. a fake custom loader, basically same image src, but that solved the blurring issue. following this: https://github.com/vercel/next.js/discussions/19065#discussion-31794"}
{"sentences": "ESLint error: Missing key prop for element in array", "answer": "Hello.\r\n\r\nThe issue has been fixed here: https://github.com/vercel/next.js/pull/34800"}
{"sentences": "Placeholder generator doesn't take transparent image into account", "answer": "I came up with a solution on my own:\r\nhttps://medium.com/@gabrielm-linassi/how-to-incrementally-load-transparent-images-with-nextjs-28ca5fdc8d6b"}
{"sentences": "When would SWC be updated?", "answer": "Answered by @kdy1: https://github.com/swc-project/swc/pull/3459#issuecomment-1048414839"}
{"sentences": "How to build a site just like nextjs.org/learn with Next.js", "answer": "Hello.\r\n\r\nFrom Tim Neutkens: \r\n> The code for [https://nextjs.org/learn](https://nextjs.org/learn/) is not open source as we're consolidating all components between sites nowadays."}
{"sentences": "i18n - per locale browser chunks, common server chunks", "answer": "We plugged in http://messageformat.github.io/messageformat in conjunction with a custom webpack loader to build locale _specific_ components."}
{"sentences": "NextJS api rewrite on Vercel and usage", "answer": "Hi there\r\nIf the response is being served from Vercel, whether we're the origin or whether we're proxying from another origin, it's still being served/handled by us. Therefore, it will be counted towards bandwidth usage."}
{"sentences": "Is it possible to use less in next.js?", "answer": "Hello!\r\n\r\n`@zeit/next-css` is deprecated.\r\nYou could use https://github.com/elado/next-with-less that seems to work and be maintained or you can try to use some [loader](https://github.com/webpack-contrib/less-loader) yourself."}
{"sentences": "help me, sass variable does not compile", "answer": "This is a sass problem. I'm not familiar with it because I'm not familiar with it😂\r\n\r\nSee the document for details\r\n\r\nhttps://sass-lang.com/documentation/breaking-changes/css-vars"}
{"sentences": "Importing 3rd party packages via npm", "answer": "Awesome and thank you @2stash. it's really a nice explanation, now i got a clear idea https://github.com/vercel/next.js/discussions/34548#discussioncomment-2215325"}
{"sentences": "React state not reflected in html file generated with next export", "answer": "Turns out the JS work as expected when the html file is run in a web server environment."}
{"sentences": "Bug with on-demand revalidation? Both the old and new versions of the page are showing", "answer": "I see that someone posted an issue already: https://github.com/vercel/next.js/issues/34531\r\n\r\nI've uploaded a recording to the issue thread that shows the problem clearly."}
{"sentences": "Stalled NextJS build on Creating an optimized production build", "answer": "Issue was resolved. In. the new code a script generated an export of itself which is why running it in dev mode fixed the issue"}
{"sentences": "Handle external URL's with query params", "answer": "My url was `/redirects` and not `/redirect`. "}
{"sentences": "Not able to set multiple cookies with middleware function", "answer": "Hi, as an alternative workaround, you could try [this answer](https://github.com/vercel/community/discussions/259#discussioncomment-2090179) \r\n\r\nI already reworked my code to have one json cookie so I didn’t test."}
{"sentences": "Error after migrating from Gatsby", "answer": "Nevermind I found the issue. I was importing an svg file directly lol."}
{"sentences": "Long TTFB in localhost", "answer": "Solved. It's not slow when deployed on Vercel. Also I made a mistake in returning all 300,000 documents under getStaticPaths, which should only be returning a smaller number of paths required at build time. Thanks NextJs community."}
{"sentences": "How do you use decorated functional components with `next/link`?", "answer": "Turns out that was easier than expected, just pass `ref` argument around in the decorator also."}
{"sentences": "How to fetch data from server once then make it global for every page", "answer": "I believe in _app.js , req is part of ctx so you need to do something like below: \r\n\r\nasync ({ ctx: { req } }) => {\r\n  console.log(req.host);\r\n};\r\n"}
{"sentences": "Potential Issue with Release v11.1.3", "answer": "Please see https://github.com/vercel/next.js/issues/34139#issuecomment-1034290706"}
{"sentences": "next/image lazy loading with lazyBoundary x-axis?", "answer": "Already an issue raised that is resolved:\r\n\r\nhttps://github.com/vercel/next.js/issues/32774"}
{"sentences": "Using ssr with express session", "answer": "I figured out the issue, I was using `context.req.cookies` instead of `context.req.headers.cookie`. Changing this solved my issue... Wish this was updated in the docs..."}
{"sentences": "Deploying nextjs onto AWS EC2 with PM2", "answer": "I found a solution:\r\n\r\n`sudo pm2 start npm --name \"<name>\" -- run prod`"}
{"sentences": "How to customize site based on build-time env variables?", "answer": "Hi,\r\nYou can use this to determine which environment is running: `process.env.NODE_ENV`.\r\nWhen running `next dev`, it will say 'development' and 'production' for `next start` command.\r\nAlso this variable can be changed in package.json."}
{"sentences": "eslint-config-next not working with eslint v8", "answer": "Support for ESLint v8 did not land until [12.0.5](https://github.com/vercel/next.js/releases/tag/v12.0.5), you will need to be on 7.x"}
{"sentences": "Next.js with MongoDB and Mongoose throws 500 Internal Server Error when deploy it on Vercel", "answer": "You cannot fetch API routes in `getServerSideProps` or `getStaticProps`.  You can extract the logics to use in both places like `db.getProduct(params.id)`"}
{"sentences": "What is the best way to use global variable?", "answer": "I used Jotai and it did great job."}
{"sentences": "Is it possible to pass data from _middleware.ts to pages components?", "answer": "I see we can do this using `NextResponse.rewrite()` function as used here: https://github.com/vercel/examples/blob/main/edge-functions/power-parity-pricing-strategies/pages/edge/_middleware.ts"}
{"sentences": "@sentry/nextjs withSentryConfig enables productionBrowserSourceMaps, in the end, assets sourcemap is open to the public.", "answer": "@andrewli-ca I just found that `@sentry/nextjs` is updated and started to support options `hideSourceMaps`. I think you can check [this pr](https://github.com/getsentry/sentry-javascript/pull/4436). Even if I didn't try to use it yet, I will do it soon."}
{"sentences": "Trigger one page rebuild from custom express server", "answer": "This is covered by this RFC: https://github.com/zeit/next.js/discussions/11552"}
{"sentences": "NextJS 12: Webpack alias does not work when alias is outside of next root", "answer": "I solved it using the `externalDir` option (added by the PR https://github.com/vercel/next.js/pull/22867). I hope it stops being an experimental feature to be a production ready one soon."}
{"sentences": "Configure api route path", "answer": "Ended up finding the answer here: \r\nhttps://github.com/vercel/next.js/discussions/22256"}
{"sentences": "How does Next.js compute the built-in geo localization data", "answer": "My bett would be that it is being provisioned by the edge servers as a header once you an url."}
{"sentences": "Middleware: How to rewrite api with authorization header to another api end point?", "answer": "https://github.com/vercel/examples/blob/main/edge-functions/add-header/pages/_middleware.ts"}
{"sentences": "Error occurred prerendering page on CI/CD, works locally?", "answer": "I figured out it was because I had a API variable in a local .env file that I didn't add in CI/CD so the fetch was executing without the base path."}
{"sentences": "What is the suggested way of static data fetching for persistent components?", "answer": "This is a re-appearing discussion, I think this one is the most \"official\" one, that could solve the problem:\r\nhttps://github.com/vercel/next.js/discussions/10949"}
{"sentences": "The meaning of <> </>", "answer": "They’re [shorthand](https://reactjs.org/docs/fragments.html#short-syntax) JSX for a React [Fragment](https://reactjs.org/docs/fragments.html). However, unlike a `<Fragment>`, they can’t contain a `key` prop."}
{"sentences": "How to serve NextJS static files through custom Express server?", "answer": "Hi,\r\n\r\nTo serve static assets in public folder with express, require `path` module (no need to install it first) and use `server.use(express.static(path.join(__dirname, 'public')));`."}
{"sentences": "What is @next/react-dev-overlay exactly?", "answer": "https://stackoverflow.com/questions/70665580/what-is-the-purpose-of-next-react-dev-overlay/70681184#70681184"}
{"sentences": "Next JS Standalone build queries", "answer": "`sharp` is being traced as long as it is installed when you build the app. You might need to install `canary` for that, or wait until it is available on `latest`"}
{"sentences": "Block Bad Bots", "answer": "https://github.com/vercel/community/discussions/74"}
{"sentences": "Dynamic Import returns LoadableComponent instead of Module", "answer": "`next/dynamic` is only for components, not any dynamic imports. You should be using pure `import()`!"}
{"sentences": "Ignore typescript typing error when building from `Next.js` v12.0.7", "answer": "Nevermind, it seems that it's because typescript compiler is picking up that file regardless if `node_modules` is included.\r\n\r\nhttps://github.com/Microsoft/TypeScript/wiki/FAQ#why-is-a-file-in-the-exclude-list-still-picked-up-by-the-compiler"}
{"sentences": "Using the 'fs' module in pages/_middleware.js", "answer": "Found the problem, the middleware is executed via edge functions. And edge functions don't support native modules from NodeJs. \r\n\r\nReference: [edge-runtime](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis)"}
{"sentences": "Incompatible href and as values when using Catch All Route", "answer": "Been testing around a bit and believe the correct format is actually to put the entire slug path in a single query param named slug. So for the path\r\n\r\n `/company/1/Company`\r\n\r\nthe correct href value should be:\r\n\r\n`/company/[...slug]?slug=1/Company`"}
{"sentences": "Nextjs MongoDB template: clientPromise is not a function", "answer": "Parentheses aren't needed.\r\nclientPromise should be used like this:\r\n`const  client = await clientPromise;`\r\n`const db = await client.db('optional db name');`"}
{"sentences": "HMR doesn't work when external react and react-dom.", "answer": "I can confirm the issue\r\n\r\n@MrKou47 the { isServer } made my day thanks :)"}
{"sentences": "Splash Screen while server is generating?", "answer": "Answered https://github.com/vercel/next.js/discussions/15974"}
{"sentences": "Deployment error with next-learn - Module not found: Can't resolve 'date-fns' in '/vercel/path0/components'", "answer": "Oh ok the deployment was looking at a previous commit. I couldn't figure out how to change that so I deleted the project and recreated. Maybe I could have waited a while and it would have updated, I don't know..."}
{"sentences": "Facebook comment moderator system don't work", "answer": "It's work now"}
{"sentences": "【beginner】I found a place to fix it in the doc, but I don't know where the file is in the folder.", "answer": "I believe the site build is not under github. That's why you can't find it "}
{"sentences": "Unminified code in \"webpack\" folder in production", "answer": "Found the answer myself just a few minutes later 😅 - I think that it's nothing to do with next.js, but actually Sentry - which are we also using."}
{"sentences": "ReferenceError: AbortController is not defined", "answer": "Hi, you can avoid this error from occurring server-side by moving the `AbortController` initializing inside of your `useEffect` as this is only executed client-side. "}
{"sentences": "Add more i18n configuration options", "answer": "**Update:** As you mentioned, this is now enabled through [Middleware](https://nextjs.org/docs/middleware) which gives you full flexibility to control your i18n routing."}
{"sentences": "How to run \"next dev\" general app on HTTPS instead of HTTP on localhost", "answer": "I have tested \r\nhttps://github.com/vercel/next.js/discussions/10935#discussioncomment-584332\r\n\r\nIt works for me fine.... :)\r\n\r\n"}
{"sentences": "How to fetch Serverside data on NextJS 12 from an external API?", "answer": "`getServerSideProps` is not deprecated. It still works in 12."}
{"sentences": "Blank page, white page on mobile. Is there a software to see error on mobile?", "answer": "@LucaNerlich  I found one, best for now browserstack.com. Hope this help full some one. I got one year free for this"}
{"sentences": "I am getting an error in `Implemeting getStaticProps` guide page", "answer": "I solved it. I had a typo in _app.js\r\nhttps://github.com/vercel/next.js/discussions/18057"}
{"sentences": "Cannot set property 'styles' of undefined", "answer": "Sory for late,  solution is [here](https://www.npmjs.com/package/less-vars-to-js) "}
{"sentences": "Cant change locale on 404 page on Vercel", "answer": "Okay, after removing my hook and adding the next/link component with a local it works as expected. I still don't know why this happened"}
{"sentences": "When are redirects processed? Build-time only? How can we fetch them from a CMS?", "answer": "Correct, redirects are processed at build time.\r\n\r\nSome potential solutions here -> https://vercel.com/support/articles/how-can-i-increase-the-limit-of-redirects-or-use-dynamic-redirects-on-vercel"}
{"sentences": "Is using next/head to set canonical urls good enough for SEO purposes?", "answer": "There was a bug in our code that was causing the wrong value to be initialized in next/head.  We found it and have patched it.  Thank you."}
{"sentences": "Is it possible to create page for locale manually? (asking because of MDX)", "answer": "Yes with [with-mdx-remote](https://github.com/vercel/next.js/tree/canary/examples/with-mdx-remote) example.\r\n\r\nYou have `pages/info.js` instead of `pages/info.mdx`. Idea is using `locale` from `getStaticProps` to read `info.${locale}.mdx` and render them."}
{"sentences": "CSS is broken after upgrading to v11", "answer": "@mfix22 I will be taking a look at this soon!"}
{"sentences": "Does NextJs have an official chat on Gitter or Discord", "answer": "Vercel now does have a brand new Discord server just for Next.js: http://nextjs.org/discord"}
{"sentences": "how can i redirect to another port (ps:host) in middleware file", "answer": "NextResponse.redirect() works somehow"}
{"sentences": "Conflicting public files and dynamic routes", "answer": "Turns out I was simply stupid of not checking the clients’ files and notice that in some cases it was Index.html and in others it was index.html (case-sensitive) 😒"}
{"sentences": "next 12, openapi-generator (without babel with swc)", "answer": "fixed in version next@12.0.7"}
{"sentences": "Can a Next.js component call an async function?", "answer": "Hello.\r\n\r\nIf your function is asynchronous you need to `await` that Promise.\r\n\r\n```js\r\nar = await archiveRes();\r\n```\r\n\r\nSince this is a React component, you will probably have to use `useEffect`."}
{"sentences": "query params are automatically dropped", "answer": "Resolved. It's something on my end."}
{"sentences": "Next.js 10.0.3 gives Javascript heap out of memory error in dev environment with Tailwind CSS (PostCSS Plugin)", "answer": "The solution here is to use the new [Tailwind JIT Compiler](https://tailwindcss.com/docs/just-in-time-mode#enabling-jit-mode)!\r\n\r\nThe [Tailwind + Next.js](https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss) has also been updated."}
{"sentences": "My website deployed on Vercel keeps giving me the \"429: TOO_MANY_REQUESTS\" errors. It hasn't been launched yet, so it can't be having too much traffic. What could be going wrong, how can I debug this?", "answer": "Hey there,\r\n\r\nPlease see this guide for more information: https://vercel.com/guides/what-should-i-do-if-i-receive-a-429-error-on-vercel"}
{"sentences": "Create app via `yarn create next-app` but fail", "answer": "Well...I found that this problem may be caused by the network. I retry `yarn create next-app -ts`  in my office which has a 1Gb network. And the problem was gone."}
{"sentences": "How to use the Edge Runtime for getStaticProps ISR?", "answer": "Hello.\r\n\r\nAs of today, you can only run middleware on the Edge Runtime."}
{"sentences": "Building on Netlify fails", "answer": "Came back to this. Turned out the issue was using bcrypt instead of using bcryptjs. "}
{"sentences": "Splash Screen while server is generating", "answer": "Closing this thanks to @stigkj https://nextjs.org/docs/basic-features/data-fetching#fallback-pages"}
{"sentences": "Unable to run example", "answer": "Actually... looks like I was running into weird issues with multiple NPM versions possibly.\r\nI did an uninstall of node and also removed all related directories and installed nvm-windows and can now get the example running properly."}
{"sentences": "Change the element of the root __next div", "answer": "It is not possible to change the element type. You could wrap it though with whatever element you want using a [Custom Document](https://nextjs.org/docs/advanced-features/custom-document)."}
{"sentences": "Builds failing on Vercel (ERR_INVALID_URL)", "answer": "Turns out it was an issue with `next-auth` not inferring the URL from the VERCEL_URL correctly. This was fixed in beta-7"}
{"sentences": "How to use dynamic imports in hybrid amp page", "answer": "I figured out the issue while creating a minimal reproduction. The imports were declared within the context of the component rendering them. This resulted in the imports working fine in the normal version and them being ignored in the amp version."}
{"sentences": "NextJS bandwidth usage on Vercel looks inflated", "answer": "https://github.com/vercel/vercel/discussions/6459#discussioncomment-1696358"}
{"sentences": "ISR: incorrect behavior or concept misunderstanding", "answer": "Use revalidate\r\n\r\n```jsx\r\nif (errorCode || isEmpty(pageData)) {\r\n    return {\r\n        notFound: true,\r\n        revalidate: 10\r\n    };\r\n}\r\n```"}
{"sentences": "getInitialProps does not pass props to component", "answer": "Hi @tri-nguyen-nfq. Do you have a custom `_app.js`? If so, could you share the code?"}
{"sentences": "Problem with router and revalidate", "answer": "Turns out revalidation is logged.\r\n\r\nSo on revalidate instead `/` the path is `/index` thats the whole cause of the problem."}
{"sentences": "Nx + next.js setup deployment on Vercel fails", "answer": "Wrong package-lock.json was commit, resolved."}
{"sentences": "Using css modules on client-side rendered pages when incrementally adopting next.js", "answer": "The culprit turned out to be the fact that I still had babel-plugin-css-modules-transform included in my .babelrc plugins list. Removing it fixed the issue."}
{"sentences": "Dynamic and Static routes with next.js", "answer": "Hi, yes that is correct static pages will match before dynamic pages so that is the appropriate way to handle what you are describing. "}
{"sentences": "Is it acceptable to name index.jsx page as export function called [Index]", "answer": "Yes you can name the components anything inside pages."}
{"sentences": "Error on Tutorial Setup", "answer": "Hey!\r\n\r\nI tried with node 17.1.0 as well and did not encounter any problem.\r\nWhat is the output of `npx create-next-app --version` ?"}
{"sentences": "Is there a way to rewrite url for files inside the public directory", "answer": "Hi, you can leverage the rewrites config in `next.config.js` to achieve this https://nextjs.org/docs/api-reference/next.config.js/rewrites, note if you have a `pages/index.js` it will take priority over the rewrite. "}
{"sentences": "Identifying client/server in getServerSideProps", "answer": "The entire basis for the question seems flawed - as I cannot find these headers at all in a more advanced repo I'm working in.\r\n"}
{"sentences": "Question about middleware", "answer": "Middleware runs on the server but with a more limited set of APIs than you get on your normal server code.  These more limited APIs allow it to run on the Vercel Edge network which is fast and closer to the client.  So, it's about tradeoffs. "}
{"sentences": "Adding class to html before interactive", "answer": "Okay... so I was really idiot...\r\n\r\n```js\r\nconst html = document.querySelector(\"html\");\r\nhtml.classList.add(\"dark\");\r\n```\r\n\r\nhas fixed the issue."}
{"sentences": "Should I versioning `tsbuildinfo`?", "answer": "Next.js generates its own `.tsbuildinfo` at `.next/cache`. So, I guess you don't commit `tsconfig.tsbuildinfo` to version control."}
{"sentences": "Next/image component from 3rd party library throws next.config.js error", "answer": "Hello!\r\n\r\nThe issue has been identified here https://github.com/vercel/next.js/issues/31065 and it seems that the Next.js team is currently working on it."}
{"sentences": "rewrites will render twice", "answer": "Hi, this is the expected behavior and a note was added in the documentation for this here https://github.com/vercel/next.js/pull/30747"}
{"sentences": "deploying Tailwind with Next.js to Vercel not worked", "answer": "This was wrong with `tailwind.config.js`.\r\nMy `purge` path was: `purge: ['./components/**/*.{js,ts,jsx,tsx}', './pages/**/*.{js,ts,jsx,tsx}']`,\r\nbut correct one is `purge: ['./src/components/**/*.{js,ts,jsx,tsx}', './src/pages/**/*.{js,ts,jsx,tsx}']`"}
{"sentences": "newbie help with getStaticProps", "answer": "OK, I have now worked out that the issue I was experiencing was not actually related to getStaticProps at all, but was in fact a routing issue. I would delete the above post, but don't believe I can."}
{"sentences": "iSSG build cache is not purged on deploy", "answer": "my bad guys :facepalm: i pushed different commit without page be deleted. Vercel is good :+1:"}
{"sentences": "Returning notFound in getServerSideProps causes an error.", "answer": "It looks like you should only return `return { notFound: true }` and no other props. Is that way your `return` statement looks like?"}
{"sentences": "How to reference global css class name from css module?", "answer": "Ok, found this:\r\nhttps://github.com/css-modules/css-modules#exceptions\r\nSo in example above it looks like: \r\n```scss\r\n.myButton {\r\n  global: .lib-button-label { \r\n    background: red;\r\n  }\r\n}\r\n```\r\nAnd it works, thanks for help :smile: "}
{"sentences": "NextJS 11 to 12 Upgrade dependency Warnings", "answer": "actually just resolved with `npm i next@latest --legacy-peer-deps`"}
{"sentences": "Should a pure Server Component page have no JavaScript?", "answer": "Shouldn't this be possible @leerob?"}
{"sentences": "How to enable babel.config.js during yarn dev", "answer": "I 've found the `ignore` option not being taken in was the problem; #27557"}
{"sentences": "Unable to configure nextjs to run with nginx server in docker", "answer": "From @wwwdepot 's answer, I figured I needed to use the nextjs container name `ifp-frontend` as the server name of nginx. Changing the `server nextjs:3000;` to `server ifp-frontend:3000;` in `nginx/default.conf` fixed my problem."}
{"sentences": "Next/Image supported formats", "answer": "Hello.\r\n\r\nYou can take a look at this file: https://github.com/vercel/next.js/blob/canary/packages/next/server/image-optimizer.ts#L22 where you can see the different handled format and how they are transformed."}
{"sentences": "Env variable is undefined in next/image src", "answer": "Using lowercase `process` solves the issue\r\nI was importing `Process from process`, no idea why 😅"}
{"sentences": "Module not found: Can't resolve 'fs'", "answer": "When I encountered this error it was because I was using it on the frontend, not the backend (api). So I think you have to have all of that code in some api route...\r\n\r\nMaybe this eill help ~>\r\nhttps://github.com/vercel/next.js/issues/4552 "}
{"sentences": "What will be the baseURL for api endpoints in Ngnix server for my nextjs app?", "answer": "I got the answer, The baseURL should be your website DNS name."}
{"sentences": "Is there an SWC equivalent to `defaultLoaders.babel` passed to custom webpack config?", "answer": "When SWC is enabled `defaultLoaders.babel` refers to the SWC loader for backwards compat, so you can rely on that so it will be compatible between enabled/disabled"}
{"sentences": "NextJS 11 to 12 Upgrade dependency Warnings pt. 2", "answer": "Make sure you have the latest version of npm installed as well"}
{"sentences": "Using next-bundle-analyzer with ESM and next.config.mjs", "answer": "`module.exports = ...` is equivalent to `export default ...` in ES6 syntax.\r\n\r\n```js\r\nexport default bundleAnalyzer(nextConfig)\r\n```"}
{"sentences": "Set next export directory from next.config", "answer": "Hello!\r\n\r\nAs of today it seems that the export output directory can only be set by the CLI option.\r\nSee: https://github.com/vercel/next.js/blob/canary/packages/next/export/index.ts#L258"}
{"sentences": "Can't seem to get some libraries (sanitize-html) working in IE", "answer": "Resolved via https://github.com/vercel/next.js/issues/30262"}
{"sentences": "Next Js Static Hosting with Firebase", "answer": "[Answer found](https://github.com/vercel/next.js/discussions/30533#discussioncomment-1565896)"}
{"sentences": "Firebase Static Hosting Issue", "answer": "Try adding this to the firebase.json file under \"hosting\":\r\n`\"cleanUrls\": true\"`"}
{"sentences": "Is there a way to parse html in getStaticProps?", "answer": "example here takes some html from a cms rich text fields... converts the images to next/image, then converts it all back into a string.\r\n\r\nhttps://gist.github.com/magicspon/1095cd5267adda9329383a63d130fdf9"}
{"sentences": "Constantly getting disconnect", "answer": "Problem solved."}
{"sentences": "How can i use external scripts in nextjs?", "answer": "Hello.\r\n\r\nWhat do you mean by \"not working\" ? Is the script not loaded at all ?\r\nDoes it work with a basic `script` tag ?"}
{"sentences": "Is there a tracing tool available for nextjs?", "answer": "I guess you should be able to use any tracing tool that supports node."}
{"sentences": "Fast refresh isn't working in custom express server with typescript.", "answer": "After upgrading to v12, It's fixed now, thank you.\r\n"}
{"sentences": "Middleware error using exact code given in conf", "answer": "Ok, since I was using the updated react and react-dom, that was causing a few issues with types, I reverted back to the latest release for now."}
{"sentences": "TypeError: Cannot read property 'pathname' of null (production system down)", "answer": "Hi, this should be resolved in `v9.5.1-canary.1` of Next.js specifically this PR https://github.com/vercel/next.js/pull/15604"}
{"sentences": "error eslint when I create a new project next", "answer": "resolved after changing node version from 17.0.1 current to 14.18.1 LTS"}
{"sentences": "Will ISR push the latest version if there has been no change?", "answer": "Hello.\r\n\r\nYes, when someone visit your website after the revalidate period, it'll still update the cache even if there is no change (see: https://youtu.be/eMwTEo6AjDc?t=1590)"}
{"sentences": "Can't run `next lint` because ESLint can't be found", "answer": "I had this problem recently, and downgrading to eslint@7 fixed it."}
{"sentences": "Fetching data for PR build on Vercel", "answer": "Do not use `fetch()` to call an API route in `getStaticProps`, read notes https://nextjs.org/docs/basic-features/data-fetching."}
{"sentences": "Fast refresh fails in Google Chrome.", "answer": "Hi, this looks like a cache issue with a configured `service-worker`, see [here](https://stackoverflow.com/questions/33704791/how-do-i-uninstall-a-service-worker) for how to clear the service worker"}
{"sentences": "next app is being served from only build", "answer": "`yarn dev` should be used for development while `yarn start` is meant to be run in production. Your code will not live reload when running `yarn start`."}
{"sentences": "Do we have a way to access prefetch data when hovering over links?", "answer": "There is currently no way to get the prefetched data as you described. "}
{"sentences": "Is it expected that building a project runs the actual code?", "answer": "ahh, pages are prerendered, never mind!"}
{"sentences": "How to set custom header from Server set value", "answer": "I found another solution to get deviceId from App. They give me data with `cookie` with Headers that auto save in browser cookie field. So I don't need to care about it. "}
{"sentences": "Preview mode not working in production", "answer": "Found the issue, build IDs are important!\r\n\r\nI had the build ID hardcoded since we build the site on each server during deployment. Making these dynamic, for instance calculating a checksum of your project should do the trick."}
{"sentences": "next build is hanging on DigitalOcean Ubuntu server (timeout)", "answer": "I got my NextJS app to successfully to build on the server! Here's the fix that worked for me:\r\n\r\n```\r\n$ npm cache clean --force\r\n$ rm -rf node_modules\r\n$ npm install\r\n```"}
{"sentences": "What are the folders required to run on production", "answer": "Hello!\r\n\r\nCheck out this documentation: https://nextjs.org/docs/deployment#docker-image\r\n\r\nAs you can see, `public`, `.next`, `node_modules` and `package.json` are copied (and probably `next.config.js` if you are customising it)."}
{"sentences": "npx create-next-app@latest does not install because of eslint", "answer": "Hello @angelozehr !\r\n\r\nWhat npm version are you using ?\r\n\r\nIt seems that your issue might have been fixed by https://github.com/vercel/next.js/pull/29837.\r\nCould you try running `npx create-next-app@11.1.3-canary.65` instead ?"}
{"sentences": "Dev overlay doesn't work in Chrome. Works in other browsers", "answer": "[Solved](https://github.com/vercel/next.js/issues/29290#issuecomment-940882209)"}
{"sentences": "Build production fail Error: resolve-url-loader: CSS error", "answer": "What Next.js version are you on? It may be too old!\r\n\r\nWe'll need a fully reproducing demo to help you find the bug in your setup."}
{"sentences": "Slug getting index on google", "answer": "Hi, it looks like you rendered a link with `/blog/[slug]` on one of those pages instead of using the actual `href` for the page. "}
{"sentences": "Redirects: a “*” throws “Error parsing `/fr/blog/*`”", "answer": "Hi, If you want to match `/fr/blog` itself along with all other paths the source would need to be `source: '/fr/blog(/.*)?'` note: if using the built-in i18n config as well you need to set `locale: false` to allow matching specific locales. "}
{"sentences": "api redirect works with form action but not fetch.", "answer": "Nvm, reddit got my back 😁. What worked for me was to use getServerSideProps to fetch to the api route, get the redirect url and redirect from getServerSideProps."}
{"sentences": "How to avoid caching with getServerSideProps", "answer": "In case of anyone face with this problem; it wasn't about next.js, I created a single instance of apollo client."}
{"sentences": "Removing SSP code from browser bundle", "answer": "Next.js Team made this tool to preview code elimination https://next-code-elimination.vercel.app/"}
{"sentences": "Use the image component with IMGIX web proxy source.", "answer": "Went ahead and just added a custom loader function 😄"}
{"sentences": "Error: getaddrinfo ENOTFOUND when calling docker container from server-side methods during BUILD TIME", "answer": "Fix: DO NOT build next.js app when building docker image. Build next.js app when container starting and right after api container."}
{"sentences": "E-commerce solutions", "answer": "I've chosen BigCommerce. I started with swell.is but I find it not that stable. So, I've switched to BC which is very complete."}
{"sentences": "Bulk 301 Redirect", "answer": "Closing this, as we're not going ahead with Bulk redirect as it can be a performance bottleneck for the website.\r\n\r\nThanks @wilsonneto-dev for your time. 👍 "}
{"sentences": "Webpack fails to compile TypeScript in monorepo - Unexpected Token", "answer": "Never mind - I managed to solve the problem by using npmjs.com/package/next-transpile-modules"}
{"sentences": "React does not recognize the  disablePlaceholder prop on a DOM element.", "answer": "Hi, `disablePlaceholder` is not a prop for `next/image` and the placeholder is only enabled when set so can be removed. See list of `next/image` props here https://nextjs.org/docs/api-reference/next/image"}
{"sentences": "YAMLException when running yarn lint on next.js v11", "answer": "Answered: I had some old eslint files from an old project on my computer that I found that I removed which solved the issue."}
{"sentences": "How to disable lazy load in Image Component ?", "answer": "Hi!\r\n\r\nThere is a `loading` prop in the image component: https://nextjs.org/docs/api-reference/next/image#loading\r\n\r\nYou can use `eager` to load the image immediately."}
{"sentences": "onClick events not fire in root page in production", "answer": "i solve it ,the problem was in Rehydration and  (working with SSR ) and make sure that the page complete loaded first"}
{"sentences": "Why cant I fetch data from my api?", "answer": "Hi !\r\n\r\nYou are using `getServerSideProps` inside a **component** instead of a **page**.\r\n\r\n[Data fetching](https://nextjs.org/docs/basic-features/data-fetching) methods only work on pages."}
{"sentences": "Config React app route to run Next.js app", "answer": "Hi @bhuvaneshdesai 👋🏼 \r\n\r\nYou can take the Next.js incremental adoption approach. You may find these two pages helpful: \r\n\r\n- https://nextjs.org/blog/incremental-adoption\r\n- https://nextjs.org/docs/migrating/incremental-adoption"}
{"sentences": "Weird behavior for custom hooks in components within \"pages\"", "answer": "I realized the problem seemed to be related to`superjson`, thus can mark as resolved. "}
{"sentences": "Why does Dev slowly strangle my machines RAM?", "answer": "https://github.com/vercel/next.js/issues/29142\r\n\r\nI decided that I had enough info to take this up as an issue.."}
{"sentences": "How to fix the burger menu when switching pages in next js", "answer": "You can create a custom App component which wraps all of your pages: https://nextjs.org/docs/advanced-features/custom-app\r\n\r\nYou can then put your navigation (or anything else you want to persist) inside the `pages/_app.js`"}
{"sentences": "GetServerSideProps with locale", "answer": "solved!"}
{"sentences": "getStaticProps slug param returning favicon.ico", "answer": "Use absolute URL for favicon! In your case, it loads favicon at the page location  `/user/page/favicon.ico` instead of your public folder.\r\n```js\r\n// fix\r\n<link rel=\"shortcut icon\" href=\"/favicon.ico\" />\r\n```"}
{"sentences": "Having trouble Importing Third Party NPM/JS libraries (animejs, granimjs)", "answer": "Figured it out pretty embarrassing. Oh well Here's what the solution was: \r\n`const anime = (await import('animejs')).default`\r\n\r\nbasically adding .default to end of the await wrapping for importing."}
{"sentences": "Cannot use autofocus?", "answer": "This one tripped me up - when using `next dev`, it wasn't working as I'd expect (must be due to the browser not thinking it's a fresh page load with Fast Refresh, maybe?). When I ran `next build && next start` and also when deployed to prod, it worked!"}
{"sentences": "CSS transform translateX behaving differently when in NextJS app (Mobile)", "answer": "`< meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>` solved this problem for me"}
{"sentences": "next/script package with custom document", "answer": "you can put the `next/script` component in `pages/_app.js`."}
{"sentences": "Link to `/tags/react` from under `/tutorials/intro-to-react` using `href` of `Link`?", "answer": "Turns out, I had to append `/` before to make it work like:\r\n\r\n```tsx\r\n<Link href={`/tags/${tag}`}>\r\n```"}
{"sentences": "NextJs11 + Emotion11 + Typescript You have tried to stringify object returned from `css` function.", "answer": "Please ignore it appears my issue was I had named the babel file incorrectly causing nextjs to not be able to pick it up...smh\r\n\r\n- I had the ifle name as `.babel.config.js` when it should be `babel.config.js` no `.`"}
{"sentences": "Handle Multiple API calls in getStaticProps", "answer": "return a Promise, and use Promise.all"}
{"sentences": "Client side hydration not working in production mode", "answer": "Do you happen to have a repository that reproduces this? That'd be super helpful in tracking down what might be causing this."}
{"sentences": "issue templates not working", "answer": "Fixed now."}
{"sentences": "Stop build from JS", "answer": "There is no internal method that Next exposes to stop a build. If you are fetching the data within `getStaticProps` you could throw an error: `new Error('something bad happened')` which would stop executing the buidl."}
{"sentences": "next build, error when trying to ignore already bundled file", "answer": "I've found this https://github.com/vercel/next.js/issues/27557\r\n"}
{"sentences": "Use different _app and _document for certain pages", "answer": "Please read the docs on layouts, which can solve this for you 😄 \r\n\r\nhttps://nextjs.org/docs/basic-features/layouts"}
{"sentences": "How to provide multiple sources to Next Image component", "answer": "Correct, this is not supported currently. I am going to lock this and move the discussion to the RFC for `picture`, which would support this.\r\n\r\nhttps://github.com/vercel/next.js/discussions/25393"}
{"sentences": "Generate sitemap for static site with dynamic routes", "answer": "Edit: Moved to docs https://github.com/vercel/next.js/pull/28346"}
{"sentences": "How to generate static sitemap and rss of a static blog", "answer": "Edit: Moved to docs https://github.com/vercel/next.js/pull/28346"}
